"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{4393:(y,P,t)=>{t.d(P,{FC:()=>E,SD:()=>p,T9:()=>n});var h=t(467),R=t(369);const o=new R.w({name:"_localDB",driverOrder:[R.C.IndexedDB,R.C.LocalStorage]}),E=function(){var a=(0,h.A)(function*(r){var i;yield o.create(),(r=null!==(i=r)&&void 0!==i?i:{}).params=r.params||{};try{var c=(yield o.get("setting"))||{};return"function"==typeof r.callback&&r.callback(c),c}catch(U){"function"==typeof r.callback&&r.callback(),console.error(U)}return{}});return function(i){return a.apply(this,arguments)}}(),n=function(){var a=(0,h.A)(function*(r){var i;yield o.create();var u="setting";(r=null!==(i=r)&&void 0!==i?i:{}).params=r.params||{};try{var c=(yield o.get(u))||{};Object.assign(c,r.params),yield o.set(u,c),"function"==typeof r.callback&&r.callback(c)}catch(U){"function"==typeof r.callback&&r.callback(),console.error(U)}});return function(i){return a.apply(this,arguments)}}(),p=function(){var a=(0,h.A)(function*(r){var i;yield o.create(),(r=null!==(i=r)&&void 0!==i?i:{}).params=r.params||{};try{yield o.set("setting",{}),"function"==typeof r.callback&&r.callback()}catch(c){"function"==typeof r.callback&&r.callback(),console.error(c)}});return function(i){return a.apply(this,arguments)}}()},1038:(y,P,t)=>{t.d(P,{v:()=>o});var h=t(467),R=t(7158);const o=function(){var E=(0,h.A)(function*(n){n.params=n.params||{};var p=[];n.params.subFolder&&(n.params.subFolder=n.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),n.params.subFolder&&p.push(n.params.subFolder)),n.params.isconvertvideo=!!n.params.isconvertvideo,n.params.isconvertpdf2image=!!n.params.isconvertpdf2image,n.params.isconvertoffice2image=!!n.params.isconvertoffice2image,n.params.isresizeimage=!!n.params.isresizeimage;const a=new FormData;a.append("path",p.join("/")),a.append("types",n.params.fileType||null),a.append("file",n.params.file||null),a.append("base64",n.params.base64||!1),a.append("isconvertvideo",n.params.isconvertvideo),a.append("isconvertpdf2image",n.params.isconvertpdf2image),a.append("isconvertoffice2image",n.params.isconvertoffice2image),a.append("isresizeimage",n.params.isresizeimage),(0,R.ZD)({url:"files",params:a,success:r=>{"function"==typeof n.callback&&n.callback(r.data||null)},error:r=>{"function"==typeof n.callback&&n.callback(),console.error(n,r)},loading:n.loading})});return function(p){return E.apply(this,arguments)}}()},9946:(y,P,t)=>{t.d(P,{ks:()=>E,sh:()=>n,z:()=>o});var h=t(467),R=t(7158);const o=function(){var p=(0,h.A)(function*(a){a.params=a.params||{},(0,R.hm)({url:"api/User/get-user",params:{},success:r=>{"function"==typeof a.callback&&a.callback(r.data||null)},error:r=>{var i;"function"==typeof a.callback&&a.callback(null==r||null===(i=r.response)||void 0===i?void 0:i.data),console.error(r)},loading:null==a?void 0:a.loading})});return function(r){return p.apply(this,arguments)}}(),E=function(){var p=(0,h.A)(function*(a){var r,i,u,c,U;a.params=a.params||{},(0,R.IH)({url:"api/User/update-user",params:{UserId:null!==(r=a.params.UserId)&&void 0!==r?r:null,FullName:null!==(i=a.params.FullName)&&void 0!==i?i:null,Address:null!==(u=a.params.Address)&&void 0!==u?u:null,Gender:null!==(c=a.params.Gender)&&void 0!==c?c:null,Birthday:null!==(U=a.params.Birthday)&&void 0!==U?U:null},success:b=>{"function"==typeof a.callback&&a.callback(b.data||null)},error:b=>{var T;"function"==typeof a.callback&&a.callback(null==b||null===(T=b.response)||void 0===T?void 0:T.data),console.error(b)},loading:null==a?void 0:a.loading})});return function(r){return p.apply(this,arguments)}}(),n=function(){var p=(0,h.A)(function*(a){var r,i;a.params=a.params||{},(0,R.IH)({url:"api/User/update-avatar",params:{UserId:null!==(r=a.params.UserId)&&void 0!==r?r:null,Avatar:null!==(i=a.params.Avatar)&&void 0!==i?i:null},success:u=>{"function"==typeof a.callback&&a.callback(u.data||null)},error:u=>{var c;"function"==typeof a.callback&&a.callback(null==u||null===(c=u.response)||void 0===c?void 0:c.data),console.error(u)},loading:null==a?void 0:a.loading})});return function(r){return p.apply(this,arguments)}}()},6488:(y,P,t)=>{t.r(P),t.d(P,{UserPageModule:()=>C});var h=t(177),R=t(9417),o=t(4488),E=t(2175),n=t(467),p=t(23),a=t(1038),r=t(9946),i=t(6539),u=t(1312),c=t(8833),U=t(5312),b=t(7518),T=t(4393),e=t(4438),O=t(345),M=t(4842);const S=[{path:"",component:(()=>{var d;class A{constructor(m,l,f,s){var v=this;this.titleService=m,this.translateService=l,this.loadingController=f,this.toastController=s,this.APP_ROUTE=c._,this.api_url=U.c.api_url,this.params={},this.APP_FUNC_FormatMobileNumber=u.IV,(0,n.A)(function*(){v.loading=yield v.loadingController.create({message:""})})()}ngOnInit(){var m=this;(0,n.A)(function*(){(yield(0,i.kU)())&&m.refreshData()})()}onIonRefresher(m){this.refreshData(()=>{m.target.complete()})}refreshData(m){var l=this;return(0,n.A)(function*(){(0,r.z)({loading:f=>{var s,v;f?null===(s=l.loading)||void 0===s||s.present():null===(v=l.loading)||void 0===v||v.dismiss()},callback:f=>{var s,v,g;null!=f&&f.Succeeded?(l.user=null!==(s=f.Data)&&void 0!==s?s:{},null!==(v=l.user)&&void 0!==v&&v.FullName?l.titleService.setTitle(null===(g=l.user)||void 0===g?void 0:g.FullName):l.translateService.stream("User").subscribe(_=>{l.titleService.setTitle(_)})):(0,b.cX)(l.toastController,{},f).then(_=>_.present()),m&&m()}})})()}signOut(m){return(0,n.A)(function*(){yield(0,T.SD)(),(0,p.wn)({callback:()=>{window.location.href=c._.AUTH}})})()}changeAvatar(m){var l=this;return(0,n.A)(function*(){(0,u.oG)({accept:"image/*"},f=>{(0,a.v)({loading:s=>{var v,g;s?null===(v=l.loading)||void 0===v||v.present():null===(g=l.loading)||void 0===g||g.dismiss()},params:{file:f[0],subFolder:"avatar",fileType:"image"},callback:s=>{var v;0==(null==s?void 0:s.ReturnCode)&&(0,r.sh)({loading:g=>{var _,I;g?null===(_=l.loading)||void 0===_||_.present():null===(I=l.loading)||void 0===I||I.dismiss()},params:{UserId:null===(v=l.user)||void 0===v?void 0:v.UserId,Avatar:`${s.path}/${s.file.name}`},callback:g=>{null!=g&&g.Succeeded?l.refreshData():(0,b.cX)(l.toastController,{},g).then(_=>_.present())}})}})})})()}}return(d=A).\u0275fac=function(m){return new(m||d)(e.rXU(O.hE),e.rXU(M.c$),e.rXU(o.Xi),e.rXU(o.K_))},d.\u0275cmp=e.VBU({type:d,selectors:[["app-user"]],decls:71,vars:59,consts:[[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"container","py-5"],[3,"click"],[3,"src"],[1,"user-name","text-ellipsis","my-4"],[1,"text-center","text-primary","mt-0","mb-1"],[1,"text-center","text-muted"],["mode","ios","lines","none"],["button","","detail","true","color","light","detail-icon","chevron-forward-outline",3,"href"],[1,"my-5"],["mode","ios","lines","none","fill","clear","expand","block",3,"click"],[1,"text-center","text-danger"]],template:function(m,l){if(1&m&&(e.j41(0,"ion-content",0)(1,"ion-refresher",1),e.bIt("ionRefresh",function(s){return l.onIonRefresher(s)}),e.nrm(2,"ion-refresher-content"),e.k0s(),e.j41(3,"div",2)(4,"ion-thumbnail",3),e.bIt("click",function(s){return l.changeAvatar(s)}),e.nrm(5,"img",4),e.k0s(),e.j41(6,"div",5)(7,"h5",6)(8,"b"),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.j41(11,"div",7)(12,"small"),e.EFF(13),e.nI1(14,"translate"),e.k0s()()(),e.j41(15,"ion-list",8)(16,"ion-item",9)(17,"ion-label"),e.EFF(18),e.nI1(19,"translate"),e.k0s()(),e.j41(20,"ion-item",9)(21,"ion-label"),e.EFF(22),e.nI1(23,"translate"),e.k0s()(),e.j41(24,"ion-item",9)(25,"ion-label"),e.EFF(26),e.nI1(27,"translate"),e.k0s()(),e.j41(28,"ion-item",9)(29,"ion-label"),e.EFF(30),e.nI1(31,"translate"),e.k0s()()(),e.j41(32,"ion-list",8)(33,"ion-item",9)(34,"ion-label"),e.EFF(35),e.nI1(36,"translate"),e.k0s()(),e.j41(37,"ion-item",9)(38,"ion-label"),e.EFF(39),e.nI1(40,"translate"),e.k0s()(),e.j41(41,"ion-item",9)(42,"ion-label"),e.EFF(43),e.nI1(44,"translate"),e.k0s()(),e.j41(45,"ion-item",9)(46,"ion-label"),e.EFF(47),e.nI1(48,"translate"),e.k0s()()(),e.j41(49,"ion-list",8)(50,"ion-item",9)(51,"ion-label"),e.EFF(52),e.nI1(53,"translate"),e.k0s()(),e.j41(54,"ion-item",9)(55,"ion-label"),e.EFF(56),e.nI1(57,"translate"),e.k0s()(),e.j41(58,"ion-item",9)(59,"ion-label"),e.EFF(60),e.nI1(61,"translate"),e.k0s()(),e.j41(62,"ion-item",9)(63,"ion-label"),e.EFF(64),e.nI1(65,"translate"),e.k0s()()(),e.j41(66,"div",10)(67,"ion-button",11),e.bIt("click",function(s){return l.signOut(s)}),e.j41(68,"ion-label",12),e.EFF(69),e.nI1(70,"translate"),e.k0s()()()()()),2&m){let f,s;e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("src",null!=l.user&&l.user.Avatar?l.api_url+"readfile/"+(null==l.user?null:l.user.Avatar):"assets/favicon/favicon.svg",e.B4B),e.R7$(4),e.JRh(null!==(f=null==l.user?null:l.user.FullName)&&void 0!==f?f:e.bMT(10,29,"NotUpdate")),e.R7$(4),e.JRh(null!==(s=l.APP_FUNC_FormatMobileNumber(null==l.user?null:l.user.PhoneNumber))&&void 0!==s?s:e.bMT(14,31,"NotUpdate")),e.R7$(3),e.Y8G("href",l.APP_ROUTE.USER_INFO),e.R7$(2),e.JRh(e.bMT(19,33,"UserInfo")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.VEHICLE),e.R7$(2),e.JRh(e.bMT(23,35,"Vehicle")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.ORDER_INFO),e.R7$(2),e.JRh(e.bMT(27,37,"OrderHistory")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.BILL_INFO),e.R7$(2),e.JRh(e.bMT(31,39,"BillHistory")),e.R7$(3),e.Y8G("href",l.APP_ROUTE.SETTING),e.R7$(2),e.JRh(e.bMT(36,41,"Setting")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.FEEDBACK),e.R7$(2),e.JRh(e.bMT(40,43,"Feedback")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.USER_MANUAL),e.R7$(2),e.JRh(e.bMT(44,45,"UseManual")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.SUPPORT),e.R7$(2),e.JRh(e.bMT(48,47,"Support")),e.R7$(3),e.Y8G("href",l.APP_ROUTE.ABOUT_US),e.R7$(2),e.JRh(e.bMT(53,49,"AboutUs")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.POLICIES_AND_REGULATIONS),e.R7$(2),e.JRh(e.bMT(57,51,"PoliciesAndRegulations")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.SALES_AND_PAYMENT_POLICIES),e.R7$(2),e.JRh(e.bMT(61,53,"SalesAndPaymentPolicies")),e.R7$(2),e.Y8G("href",l.APP_ROUTE.TERMS_OF_USE),e.R7$(2),e.JRh(e.bMT(65,55,"TermsOfUse")),e.R7$(5),e.JRh(e.bMT(70,57,"SignOut"))}},dependencies:[o.Jm,o.W9,o.uz,o.he,o.nf,o.To,o.Ki,o.Zx,M.D9],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size: 6rem;--border-radius: 50%;margin:auto;cursor:pointer}ion-list[_ngcontent-%COMP%]{margin:1.25rem 0;border-radius:.75rem}"]}),A})()}];let k=(()=>{var d;class A{}return(d=A).\u0275fac=function(m){return new(m||d)},d.\u0275mod=e.$C({type:d}),d.\u0275inj=e.G2t({imports:[E.iI.forChild(S),E.iI]}),A})();var $=t(9500);let C=(()=>{var d;class A{}return(d=A).\u0275fac=function(m){return new(m||d)},d.\u0275mod=e.$C({type:d}),d.\u0275inj=e.G2t({imports:[h.MD,R.YN,o.bv,k,$.x]}),A})()}}]);