"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2768],{6944:(N,D,g)=>{g.d(D,{KX:()=>F,_$:()=>E,aN:()=>k,cb:()=>v,eu:()=>j,kO:()=>d,wm:()=>O});var b=g(467),$=g(5972);const d=function(){var h=(0,b.A)(function*(l){var u,_,p,f;l.params=l.params||{},(0,$.hm)({url:"api/ChargingSession/get-mychargingsessions",params:{VSessionStatus:null!==(u=l.params.VSessionStatus)&&void 0!==u?u:null,VSessionStatusMulti:null!==(_=l.params.VSessionStatusMulti)&&void 0!==_?_:null,PageNumber:null!==(p=l.params.PageNumber)&&void 0!==p?p:1,PageSize:null!==(f=l.params.PageSize)&&void 0!==f?f:10},success:C=>{"function"==typeof l.callback&&l.callback(C.data||null)},error:C=>{var T;"function"==typeof l.callback&&l.callback(null==C||null===(T=C.response)||void 0===T?void 0:T.data),console.error(C)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}(),F=function(){var h=(0,b.A)(function*(l){var u,_,p;l.params=l.params||{},(0,$.hm)({url:"api/ChargingSession/get-mybyordercode",params:{OrderCode:null!==(u=l.params.OrderCode)&&void 0!==u?u:null,PageNumber:null!==(_=l.params.PageNumber)&&void 0!==_?_:1,PageSize:null!==(p=l.params.PageSize)&&void 0!==p?p:10},success:f=>{"function"==typeof l.callback&&l.callback(f.data||null)},error:f=>{var C;"function"==typeof l.callback&&l.callback(null==f||null===(C=f.response)||void 0===C?void 0:C.data),console.error(f)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}(),v=function(){var h=(0,b.A)(function*(l){l.params=l.params||{},(0,$.hm)({url:`api/ChargingSession/get-mybyid/${l.params.ChargeSessionId}`,success:u=>{"function"==typeof l.callback&&l.callback(u.data||null)},error:u=>{var _;"function"==typeof l.callback&&l.callback(null==u||null===(_=u.response)||void 0===_?void 0:_.data),console.error(u)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}(),k=function(){var h=(0,b.A)(function*(l){var u,_,p;l.params=l.params||{},(0,$.Ll)({url:"api/ChargingSession/start-create",params:{StationCode:null!==(u=l.params.StationCode)&&void 0!==u?u:null,ConnectorId:null!==(_=l.params.ConnectorId)&&void 0!==_?_:null,OrderCode:null!==(p=l.params.OrderCode)&&void 0!==p?p:null},success:f=>{"function"==typeof l.callback&&l.callback(f.data||null)},error:f=>{var C;"function"==typeof l.callback&&l.callback(null==f||null===(C=f.response)||void 0===C?void 0:C.data),console.error(f)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}(),O=function(){var h=(0,b.A)(function*(l){var u;l.params=l.params||{},(0,$.Ll)({url:"api/ChargingSession/start",params:{ChargeSessionId:null!==(u=l.params.ChargeSessionId)&&void 0!==u?u:null},success:_=>{"function"==typeof l.callback&&l.callback(_.data||null)},error:_=>{var p;"function"==typeof l.callback&&l.callback(null==_||null===(p=_.response)||void 0===p?void 0:p.data),console.error(_)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}(),E=function(){var h=(0,b.A)(function*(l){var u;l.params=l.params||{},(0,$.Ll)({url:"api/ChargingSession/stop",params:{ChargeSessionId:null!==(u=l.params.ChargeSessionId)&&void 0!==u?u:null},success:_=>{"function"==typeof l.callback&&l.callback(_.data||null)},error:_=>{var p;"function"==typeof l.callback&&l.callback(null==_||null===(p=_.response)||void 0===p?void 0:p.data),console.error(_)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}(),j=function(){var h=(0,b.A)(function*(l){l.params=l.params||{},(0,$.hm)({url:`api/ChargingSession/monitor/${l.params.StationCode}/${l.params.ConnectorId}`,success:u=>{"function"==typeof l.callback&&l.callback(u.data||null)},error:u=>{var _;"function"==typeof l.callback&&l.callback(null==u||null===(_=u.response)||void 0===_?void 0:_.data),console.error(u)},loading:null==l?void 0:l.loading})});return function(u){return h.apply(this,arguments)}}()},2768:(N,D,g)=>{g.r(D),g.d(D,{OrderInfoDetailPageModule:()=>Tn});var b=g(177),$=g(9417),d=g(8974),F=g(2175),v=g(467),k=g(8833),n=g(4438),O=g(4842);let y=(()=>{var o;class s{constructor(t,e){this.router=t,this.modalController=e,this.APP_ROUTE=k._}ngOnInit(){}closeModal(t){this.modalController.dismiss()}navigateByUrl(t){var e=this;return(0,v.A)(function*(){e.modalController.dismiss().then(a=>{e.router.navigateByUrl(t)})})()}}return(o=s).\u0275fac=function(t){return new(t||o)(n.rXU(F.Ix),n.rXU(d.W3))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-modal-add-customer-invoice-success"]],decls:13,vars:9,consts:[[1,"p-4","text-center"],["src","../../../assets/icon/ion-img/success.svg"],[1,"mt-5"],["color","medium","fill","outline","shape","round","expand","block",3,"click"]],template:function(t,e){1&t&&(n.j41(0,"div",0),n.nrm(1,"ion-img",1),n.j41(2,"h4"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"div")(6,"small"),n.EFF(7),n.nI1(8,"translate"),n.k0s()(),n.j41(9,"div",2)(10,"ion-button",3),n.bIt("click",function(r){return e.closeModal(r)}),n.EFF(11),n.nI1(12,"translate"),n.k0s()()()),2&t&&(n.R7$(3),n.JRh(n.bMT(4,3,"InvoiceRequestSent")),n.R7$(4),n.JRh(n.bMT(8,5,"InvoiceRequestSentMessage")),n.R7$(4),n.JRh(n.bMT(12,7,"Close")))},dependencies:[d.Jm,d.KW,O.D9],styles:["ion-img[_ngcontent-%COMP%]{width:3.5rem;margin:1rem auto}"]}),s})();var E=g(1806),j=g(9051),h=g(5970),l=g(8650);const u=o=>({$implicit:o});function _(o,s){1&o&&(n.j41(0,"div",19),n.nrm(1,"ion-spinner",20),n.k0s())}function p(o,s){1&o&&(n.j41(0,"div",21),n.nrm(1,"ion-img",22),n.j41(2,"div",23),n.EFF(3),n.nI1(4,"translate"),n.k0s()()),2&o&&(n.R7$(3),n.JRh(n.bMT(4,1,"DataNotFound")))}function f(o,s){if(1&o&&(n.qex(0),n.j41(1,"div",24),n.eu8(2,25),n.k0s(),n.bVm()),2&o){const i=s.$implicit;n.XpG();const t=n.sdS(34);n.R7$(2),n.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",n.eq3(2,u,i))}}function C(o,s){if(1&o){const i=n.RV6();n.j41(0,"ion-infinite-scroll",26),n.bIt("ionInfinite",function(e){n.eBV(i);const a=n.XpG();return n.Njj(a.onIonInfinite(e))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function T(o,s){1&o&&(n.j41(0,"small",39),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&o&&(n.R7$(),n.SpI("(",n.bMT(2,1,"Default"),")"))}function V(o,s){if(1&o){const i=n.RV6();n.j41(0,"div",27)(1,"div",28)(2,"ion-radio",29)(3,"div",30)(4,"b",31),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.DNE(7,T,3,3,"small",32),n.k0s()(),n.j41(8,"div",33)(9,"ion-button",34),n.bIt("click",function(e){const a=n.eBV(i).$implicit,r=n.XpG();return n.Njj(r.editCustomerInvoice(e,a.CustomerInvoiceId))}),n.nrm(10,"ion-icon",35),n.k0s(),n.j41(11,"ion-button",36),n.bIt("click",function(e){const a=n.eBV(i).$implicit,r=n.XpG();return n.Njj(r.deleteCustomerInvoice(e,a.CustomerInvoiceId))}),n.nrm(12,"ion-icon",37),n.k0s()()(),n.nrm(13,"hr"),n.j41(14,"table",38)(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.j41(22,"tr")(23,"td"),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"td")(27,"b"),n.EFF(28),n.k0s()()(),n.j41(29,"tr")(30,"td"),n.EFF(31),n.nI1(32,"translate"),n.k0s(),n.j41(33,"td")(34,"b"),n.EFF(35),n.k0s()()(),n.j41(36,"tr")(37,"td"),n.EFF(38),n.nI1(39,"translate"),n.k0s(),n.j41(40,"td")(41,"b"),n.EFF(42),n.k0s()()(),n.j41(43,"tr")(44,"td"),n.EFF(45),n.nI1(46,"translate"),n.k0s(),n.j41(47,"td")(48,"b"),n.EFF(49),n.k0s()()(),n.j41(50,"tr")(51,"td"),n.EFF(52),n.nI1(53,"translate"),n.k0s(),n.j41(54,"td")(55,"b"),n.EFF(56),n.k0s()()()()()}if(2&o){const i=s.$implicit;n.R7$(2),n.Y8G("value",i.CustomerInvoiceId),n.R7$(3),n.JRh(n.bMT(6,15,"ExportBillInfo")),n.R7$(2),n.Y8G("ngIf",i.IsDefault),n.R7$(10),n.JRh(n.bMT(18,17,"FullName")),n.R7$(4),n.JRh(i.BuyerName),n.R7$(3),n.JRh(n.bMT(25,19,"BillCompanyName")),n.R7$(4),n.JRh(i.CompanyName),n.R7$(3),n.JRh(n.bMT(32,21,"BillCompanyAddress")),n.R7$(4),n.JRh(i.Address),n.R7$(3),n.JRh(n.bMT(39,23,"BillCompanyTax")),n.R7$(4),n.JRh(i.TaxCode),n.R7$(3),n.JRh(n.bMT(46,25,"Email")),n.R7$(4),n.JRh(i.BuyerEmail),n.R7$(3),n.JRh(n.bMT(53,27,"Mobile")),n.R7$(4),n.JRh(i.BuyerPhone)}}let B=(()=>{var o;class s{constructor(t,e,a,r){this.modalController=t,this.toastController=e,this.loadingController=a,this.animationController=r,this.APP_ROUTE=k._,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.customerInvoices=[],this.loadingController.create({message:""}).then(c=>this.loading=c)}close(t){this.modalController.dismiss(null,"close")}submit(t){this.modalController.dismiss(this.CustomerInvoiceId,"submit")}ngOnInit(){this.refreshData()}onIonRefresher(t){this.filter={},this.refreshData(()=>{t.target.complete()})}onIonInfinite(t){this.loadMore(()=>{t.target.complete()})}resetData(){this.customerInvoices.length=0}pushData(t){1==this.paging.page&&(this.customerInvoices.length=0),this.customerInvoices=this.customerInvoices.concat(t)}totalData(){return this.customerInvoices.length}refreshData(t){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging(t)}loadMore(t){this.paging.page+=1,this.loadData_Paging(t)}searchChange(t){this.filter={},this.filter.search=t.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}sortChange(t,e){this.paging.sortfield=t||null,this.paging.sorttype=e||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}loadData_Paging(t){var e=this;return(0,v.A)(function*(){e.paging.loading=!0,(0,h.Ul)({loading:a=>{var r,c;a?null===(r=e.loading)||void 0===r||r.present():null===(c=e.loading)||void 0===c||c.dismiss()},params:{PageNumber:e.paging.page,PageSize:e.paging.limit},callback:a=>{var r;e.response=a,null!=a&&a.Succeeded?e.pushData(null!==(r=a.Data)&&void 0!==r?r:[]):(0,l.cX)(e.toastController,{},a).then(c=>c.present()),e.paging.loading=!1,e.paging.active=!(null==a||!a.HasNextPage),t&&t()}})})()}editCustomerInvoice(t,e){this.presentModalAddCustomerInvoice(t,e)}deleteCustomerInvoice(t,e){e&&(0,l.Yy)(this.modalController,this.animationController,{selectedId:e,message:{TitleConfirm:"Delete_Confirm",TextConfirm:"Delete"},fnConfirm:a=>{(0,h.NT)({loading:r=>{var c,m;r?null===(c=this.loading)||void 0===c||c.present():null===(m=this.loading)||void 0===m||m.dismiss()},params:{CustomerInvoiceId:a},callback:r=>{null!=r&&r.Succeeded?this.refreshData():(0,l.cX)(this.toastController,{},r).then(c=>c.present())}})}})}changeCustomerInvoice(t){this.CustomerInvoiceId=t.detail.value}presentModalAddCustomerInvoice(t,e){var a=this;return(0,v.A)(function*(){const r=yield a.modalController.create({component:E.$,componentProps:{CustomerInvoiceId:e},cssClass:"ion-modal-breakpoint",backdropDismiss:!0,keyboardClose:!0,breakpoints:[.75,1],initialBreakpoint:.75});r.onDidDismiss().then(c=>{"success"==c.role&&a.refreshData()}),r.present()})()}presentModalAddCustomerInvoiceSuccess(t){var e=this;return(0,v.A)(function*(){(yield e.modalController.create({component:y,cssClass:"ion-modal-small",backdropDismiss:!0,keyboardClose:!0})).present()})()}}return(o=s).\u0275fac=function(t){return new(t||o)(n.rXU(d.W3),n.rXU(d.K_),n.rXU(d.Xi),n.rXU(d.Hx))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-modal-customer-invoice"]],inputs:{CustomerInvoiceId:"CustomerInvoiceId"},decls:35,vars:17,consts:[["templateCustomerInvoice",""],["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","container container-loading py-5 text-center",4,"ngIf"],["mode","md",3,"ionChange","value"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12"],["color","primary","expand","block","shape","round","fill","outline",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/plus-circle.svg"],[1,"col-12","my-3","text-center"],[1,"text-muted"],[3,"ionInfinite",4,"ngIf"],[1,"p-3"],["color","primary","expand","block","shape","round",3,"click"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","container-loading","py-5","text-center"],["src","../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[1,"col-12","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-customer-invoice","rounded","bg-white"],[1,"d-flex","justify-content-between"],["label-placement","end",3,"value"],[1,"text-wrap"],[1,"mr-1"],["class","text-primary d-inline-block",4,"ngIf"],[1,"text-nowrap"],["size","small","color","medium","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/edit.svg",1,"fs-4"],["size","small","color","danger","fill","clear",3,"click"],["name","close-outline",1,"fs-5"],[1,"table","table-borderless","m-0"],[1,"text-primary","d-inline-block"]],template:function(t,e){if(1&t){const a=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),n.bIt("click",function(c){return n.eBV(a),n.Njj(e.close(c))}),n.nrm(4,"ion-icon",3),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6),n.nI1(7,"translate"),n.k0s()()(),n.j41(8,"ion-content")(9,"ion-refresher",4),n.bIt("ionRefresh",function(c){return n.eBV(a),n.Njj(e.onIonRefresher(c))}),n.nrm(10,"ion-refresher-content"),n.k0s(),n.DNE(11,_,2,0,"div",5)(12,p,5,3,"div",6),n.j41(13,"ion-radio-group",7),n.bIt("ionChange",function(c){return n.eBV(a),n.Njj(e.changeCustomerInvoice(c))}),n.j41(14,"div",8)(15,"div",9),n.DNE(16,f,3,4,"ng-container",10),n.j41(17,"div",11)(18,"ion-button",12),n.bIt("click",function(c){return n.eBV(a),n.Njj(e.presentModalAddCustomerInvoice(c))}),n.nrm(19,"ion-icon",13),n.j41(20,"ion-label"),n.EFF(21),n.nI1(22,"translate"),n.k0s()()(),n.j41(23,"div",14)(24,"small",15),n.EFF(25),n.nI1(26,"translate"),n.k0s()()()()(),n.DNE(27,C,2,0,"ion-infinite-scroll",16),n.k0s(),n.j41(28,"ion-footer")(29,"div",17)(30,"ion-button",18),n.bIt("click",function(c){return n.eBV(a),n.Njj(e.submit(c))}),n.EFF(31),n.nI1(32,"translate"),n.k0s()()(),n.DNE(33,V,57,29,"ng-template",null,0,n.C5r)}2&t&&(n.R7$(6),n.JRh(n.bMT(7,9,"CustomerInvoiceSaved")),n.R7$(5),n.Y8G("ngIf",!e.response),n.R7$(),n.Y8G("ngIf",e.response&&!e.customerInvoices.length),n.R7$(),n.Y8G("value",e.CustomerInvoiceId),n.R7$(3),n.Y8G("ngForOf",e.customerInvoices),n.R7$(5),n.JRh(n.bMT(22,11,"Create")),n.R7$(4),n.JRh(n.bMT(26,13,"CustomerInvoiceNotice")),n.R7$(2),n.Y8G("ngIf",e.paging.active),n.R7$(4),n.JRh(n.bMT(32,15,"Choice")))},dependencies:[b.Sq,b.bT,b.T3,d.Jm,d.QW,d.W9,d.M0,d.eU,d.iq,d.KW,d.Ax,d.Hp,d.he,d.KO,d.f0,d.To,d.Ki,d.w2,d.BC,d.ai,d.uR,d.Je,O.D9],styles:[".table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;white-space:nowrap;text-align:right}.card-customer-invoice[_ngcontent-%COMP%]{padding:1rem}.card-customer-invoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-customer-invoice[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-customer-invoice[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}"]}),s})();var A=g(2233),x=g(6944),J=g(9061),X=g(6539),U=g(2313),S=g(1312),P=g(3588),Y=g(7586),w=g.n(Y),G=g(5972);const L=function(){var o=(0,v.A)(function*(s){var i,t,e,a,r,c,m,I;s.params=s.params||{},(0,G.Ll)({url:"api/Einvoice/createmyinvoice",params:{IsCompany:null!==(i=s.params.IsCompany)&&void 0!==i?i:null,BuyerName:null!==(t=s.params.BuyerName)&&void 0!==t?t:null,TaxCode:null!==(e=s.params.TaxCode)&&void 0!==e?e:null,CompanyName:null!==(a=s.params.CompanyName)&&void 0!==a?a:null,Address:null!==(r=s.params.Address)&&void 0!==r?r:null,BuyerPhone:null!==(c=s.params.BuyerPhone)&&void 0!==c?c:null,BuyerEmail:null!==(m=s.params.BuyerEmail)&&void 0!==m?m:null,BillId:null!==(I=s.params.BillId)&&void 0!==I?I:null},success:R=>{"function"==typeof s.callback&&s.callback(R.data||null)},error:R=>{var M;"function"==typeof s.callback&&s.callback(null==R||null===(M=R.response)||void 0===M?void 0:M.data),console.error(R)},loading:null==s?void 0:s.loading})});return function(i){return o.apply(this,arguments)}}(),K=function(){var o=(0,v.A)(function*(s){var i;s.params=s.params||{},(0,G.IH)({url:"api/Einvoice/noeinvoice",params:{BillId:null!==(i=s.params.BillId)&&void 0!==i?i:null},success:t=>{"function"==typeof s.callback&&s.callback(t.data||null)},error:t=>{var e;"function"==typeof s.callback&&s.callback(null==t||null===(e=t.response)||void 0===e?void 0:e.data),console.error(t)},loading:null==s?void 0:s.loading})});return function(i){return o.apply(this,arguments)}}(),z=(o,s)=>[o,s];function H(o,s){1&o&&(n.j41(0,"div",9),n.nrm(1,"ion-spinner",10),n.k0s())}function W(o,s){1&o&&(n.qex(0),n.j41(1,"div",12),n.nrm(2,"ion-spinner",13),n.k0s(),n.bVm())}function Q(o,s){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&o){const i=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"PaymentMethod")),n.R7$(3),n.JRh(i.orderInfo.KindOfCard)}}function Z(o,s){if(1&o&&(n.qex(0),n.j41(1,"tr")(2,"td"),n.EFF(3),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()(),n.bVm()),2&o){let i;const t=s.$implicit,e=n.XpG(3);n.R7$(3),n.JRh(t.ProductName),n.R7$(2),n.SpI("",e.APP_FUNC_FormatMoney(null!==(i=t.RealAmount)&&void 0!==i?i:0),"\u0111")}}function q(o,s){if(1&o&&(n.j41(0,"tr",22)(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&o){const i=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"Discount")),n.R7$(3),n.SpI("-",i.APP_FUNC_FormatMoney(i.orderInfo.PromoteValue),"\u0111")}}function nn(o,s){if(1&o&&(n.qex(0),n.j41(1,"div",24)(2,"div",25)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",15)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&o){const i=n.XpG(3);n.R7$(4),n.JRh(n.bMT(5,3,"Exchange")),n.R7$(5),n.JRh(n.bMT(10,5,"ExchangeValue")),n.R7$(4),n.SpI("",i.APP_FUNC_FormatMoney(i.orderInfo.ExchangeValue),"\u0111")}}function en(o,s){1&o&&(n.j41(0,"b",19),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&o&&(n.R7$(),n.JRh(n.bMT(2,1,"RefundYes")))}function tn(o,s){if(1&o&&(n.qex(0),n.j41(1,"div",26)(2,"table",15)(3,"tr")(4,"td"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"td"),n.DNE(8,en,3,3,"b",27),n.k0s()(),n.j41(9,"tr")(10,"td"),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.j41(13,"td")(14,"b"),n.EFF(15),n.k0s()()()()(),n.bVm()),2&o){const i=n.XpG(3);n.R7$(5),n.JRh(n.bMT(6,4,"Refund")),n.R7$(3),n.Y8G("ngIf",i.orderInfo.IsRefund),n.R7$(3),n.JRh(n.bMT(12,6,"RefundValue")),n.R7$(4),n.SpI("",i.APP_FUNC_FormatMoney(i.orderInfo.RefundValue),"\u0111")}}function on(o,s){if(1&o&&(n.qex(0),n.j41(1,"div",28)(2,"div",25)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",15)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&o){const i=n.XpG(3);n.R7$(4),n.JRh(n.bMT(5,3,"BillVAT")),n.R7$(5),n.JRh(n.bMT(10,5,"Status")),n.R7$(4),n.JRh(i.orderInfo.VEinvoiceStatusName)}}function rn(o,s){if(1&o&&(n.qex(0),n.j41(1,"div",14)(2,"table",15)(3,"tr")(4,"td"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"td")(8,"b"),n.EFF(9),n.k0s()()(),n.j41(10,"tr")(11,"td"),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"td")(15,"b"),n.EFF(16),n.k0s()()(),n.j41(17,"tr")(18,"td"),n.EFF(19),n.nI1(20,"translate"),n.k0s(),n.j41(21,"td")(22,"b"),n.EFF(23),n.k0s()()(),n.DNE(24,Q,6,4,"tr",6),n.j41(25,"tr")(26,"td"),n.EFF(27),n.nI1(28,"translate"),n.k0s(),n.j41(29,"td"),n.EFF(30),n.k0s()()()(),n.nrm(31,"hr",16),n.j41(32,"div",17)(33,"div",18)(34,"b"),n.EFF(35),n.nI1(36,"translate"),n.k0s()(),n.j41(37,"table",15)(38,"tr")(39,"td"),n.EFF(40),n.nI1(41,"translate"),n.k0s(),n.j41(42,"td")(43,"div"),n.EFF(44),n.k0s(),n.j41(45,"div")(46,"b",19),n.EFF(47),n.k0s(),n.j41(48,"small"),n.EFF(49),n.k0s()()()(),n.DNE(50,Z,6,2,"ng-container",20)(51,q,6,4,"tr",21),n.j41(52,"tr",22)(53,"td")(54,"b"),n.EFF(55),n.nI1(56,"translate"),n.k0s(),n.nrm(57,"br"),n.j41(58,"small",23),n.EFF(59),n.nI1(60,"translate"),n.k0s()(),n.j41(61,"td",19)(62,"strong"),n.EFF(63),n.k0s()()()()(),n.DNE(64,nn,14,7,"ng-container",6)(65,tn,16,8,"ng-container",6)(66,on,14,7,"ng-container",6),n.bVm()),2&o){let i,t,e,a;const r=n.XpG(2);n.R7$(5),n.JRh(n.bMT(6,26,"OrderCode")),n.R7$(4),n.JRh(r.orderInfo.OrderCode),n.R7$(3),n.JRh(n.bMT(13,28,"TotalAmount")),n.R7$(4),n.SpI("",r.APP_FUNC_FormatMoney(r.orderInfo.RealValue),"\u0111"),n.R7$(3),n.JRh(n.bMT(20,30,"OrderStatus")),n.R7$(3),n.ZvI("text-",r.APP_FUNC_GetColor_VOrderStatus(r.orderInfo.VOrderStatus),""),n.R7$(),n.JRh(r.orderInfo.VOrderStatusName),n.R7$(),n.Y8G("ngIf",(null==r.orderInfo?null:r.orderInfo.RealValue)&&r.orderInfo.Paymethod),n.R7$(3),n.JRh(n.bMT(28,32,"OrderDate")),n.R7$(3),n.JRh(r.APP_FUNC_FormatDate(null!==(i=r.orderInfo.PurchaseDate)&&void 0!==i?i:r.orderInfo.OrderDate)),n.R7$(5),n.JRh(n.bMT(36,34,"Detail")),n.R7$(5),n.JRh(n.bMT(41,36,"ChargingPackage")),n.R7$(4),n.JRh(r.orderInfo.ChargePackName),n.R7$(3),n.SpI("",r.APP_FUNC_FormatMoney(null!==(t=r.orderInfo.PayValue)&&void 0!==t?t:0),"\u0111"),n.R7$(2),n.Lme(" / ",r.orderInfo.PowerValue," ",null!==(e=r.orderInfo.Unit)&&void 0!==e?e:"kWh",""),n.R7$(),n.Y8G("ngForOf",r.orderDetails),n.R7$(),n.Y8G("ngIf",r.orderInfo.PromoteValue),n.R7$(4),n.JRh(n.bMT(56,38,"Total")),n.R7$(4),n.JRh(n.bMT(60,40,"IncludedVAT")),n.R7$(4),n.SpI("",r.APP_FUNC_FormatMoney(null!==(a=r.orderInfo.RealValue)&&void 0!==a?a:0),"\u0111"),n.R7$(),n.Y8G("ngIf",(null==r.orderInfo?null:r.orderInfo.VOrderStatus)==r.v_order_status.DaHoanTien||(null==r.orderInfo?null:r.orderInfo.VOrderStatus)==r.v_order_status.DaSuDung&&r.orderInfo.ExchangeValue),n.R7$(),n.Y8G("ngIf",(null==r.orderInfo?null:r.orderInfo.VOrderStatus)==r.v_order_status.DaHoanTien||(null==r.orderInfo?null:r.orderInfo.VOrderStatus)==r.v_order_status.DaSuDung&&r.orderInfo.RefundValue),n.R7$(),n.Y8G("ngIf",(null==r.orderInfo?null:r.orderInfo.VEinvoiceStatus)&&(null==r.orderInfo?null:r.orderInfo.VEinvoiceStatus)!=r.v_einvoice_status.ChuaXacNhan)}}function an(o,s){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&o){const i=n.XpG(5);n.R7$(2),n.JRh(n.bMT(3,2,"Email")),n.R7$(4),n.JRh(i.customerInvoice.BuyerEmail)}}function ln(o,s){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&o){const i=n.XpG(5);n.R7$(2),n.JRh(n.bMT(3,2,"Mobile")),n.R7$(4),n.JRh(i.customerInvoice.BuyerPhone)}}function sn(o,s){if(1&o&&(n.j41(0,"table",15)(1,"tr")(2,"td"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"td")(6,"b"),n.EFF(7),n.k0s()()(),n.j41(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td")(13,"b"),n.EFF(14),n.k0s()()(),n.j41(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.j41(22,"tr")(23,"td"),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"td")(27,"b"),n.EFF(28),n.k0s()()(),n.DNE(29,an,7,4,"tr",6)(30,ln,7,4,"tr",6),n.k0s()),2&o){const i=n.XpG(4);n.R7$(3),n.JRh(n.bMT(4,10,"FullName")),n.R7$(4),n.JRh(i.customerInvoice.BuyerName),n.R7$(3),n.JRh(n.bMT(11,12,"BillCompanyName")),n.R7$(4),n.JRh(i.customerInvoice.CompanyName),n.R7$(3),n.JRh(n.bMT(18,14,"BillCompanyAddress")),n.R7$(4),n.JRh(i.customerInvoice.Address),n.R7$(3),n.JRh(n.bMT(25,16,"BillCompanyTax")),n.R7$(4),n.JRh(i.customerInvoice.TaxCode),n.R7$(),n.Y8G("ngIf",i.customerInvoice.BuyerEmail),n.R7$(),n.Y8G("ngIf",i.customerInvoice.BuyerPhone)}}function cn(o,s){if(1&o){const i=n.RV6();n.j41(0,"div",33)(1,"div",34)(2,"b"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",35),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(3);return n.Njj(a.presentModalCustomerInvoice(e))}),n.nrm(6,"ion-icon",36),n.k0s()(),n.nrm(7,"hr"),n.DNE(8,sn,31,18,"table",37),n.k0s()}if(2&o){const i=n.XpG(3);n.R7$(3),n.JRh(n.bMT(4,2,"ExportBillInfo")),n.R7$(5),n.Y8G("ngIf",i.customerInvoice)}}function dn(o,s){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"div",29)(2,"ion-radio-group",30),n.bIt("ionChange",function(e){n.eBV(i);const a=n.XpG(2);return n.Njj(a.changeIsGetBill(e))}),n.j41(3,"ion-radio",31),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"ion-radio",31),n.EFF(7),n.nI1(8,"translate"),n.k0s()()(),n.DNE(9,cn,9,4,"div",32),n.bVm()}if(2&o){const i=n.XpG(2);n.R7$(2),n.Y8G("value",0),n.R7$(),n.Y8G("value",0),n.R7$(),n.JRh(n.bMT(5,6,"NoGetBill")),n.R7$(2),n.Y8G("value",1),n.R7$(),n.JRh(n.bMT(8,8,"YesGetBill")),n.R7$(2),n.Y8G("ngIf",i.IsGetBill)}}function un(o,s){if(1&o&&(n.qex(0),n.j41(1,"div",11),n.DNE(2,W,3,0,"ng-container",6)(3,rn,67,42,"ng-container",6)(4,dn,10,10,"ng-container",6),n.k0s(),n.bVm()),2&o){let i;const t=n.XpG();n.R7$(2),n.Y8G("ngIf",(null==t.orderInfo?null:t.orderInfo.VOrderStatus)==t.v_order_status.DangThanhToan),n.R7$(),n.Y8G("ngIf",t.orderInfo),n.R7$(),n.Y8G("ngIf",(null==t.orderInfo?null:t.orderInfo.VEinvoiceStatus)==t.v_einvoice_status.ChuaXacNhan&&(null==t.orderInfo?null:t.orderInfo.RealValue)&&n.l_i(3,z,t.v_order_status.DaSuDung,t.v_order_status.DaHoanTien).includes(null!==(i=null==t.orderInfo?null:t.orderInfo.VOrderStatus)&&void 0!==i?i:0))}}function mn(o,s){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",38)(3,"ion-button",39),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(2);return n.Njj(a.openDetailChargingSession(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"GoToChargingSession")))}function _n(o,s){if(1&o&&(n.j41(0,"div",41)(1,"div")(2,"small"),n.EFF(3),n.nI1(4,"translate"),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"div")(7,"b"),n.EFF(8),n.k0s()(),n.j41(9,"small"),n.EFF(10),n.nI1(11,"translate"),n.k0s()()),2&o){const i=n.XpG(3);n.R7$(3),n.E5c("",n.bMT(4,5,"Minute")," ",i.APP_FUNC_RoundNumber(i.timeout/6e4,1)," ",n.bMT(5,7,"Minute"),"!"),n.R7$(5),n.JRh(i.getTimeCountdown()),n.R7$(2),n.JRh(n.bMT(11,9,"PleaseStartChargingSession"))}}function gn(o,s){if(1&o){const i=n.RV6();n.j41(0,"ion-button",39),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(4);return n.Njj(a.chargingStart(e))}),n.j41(1,"ion-label"),n.EFF(2),n.nI1(3,"translate"),n.k0s()()}2&o&&(n.R7$(2),n.JRh(n.bMT(3,1,"StartChargingSession")))}function pn(o,s){if(1&o&&(n.qex(0),n.j41(1,"div"),n.DNE(2,gn,4,3,"ion-button",42),n.k0s(),n.bVm()),2&o){const i=n.XpG(3);n.R7$(2),n.Y8G("ngIf",i.timeCountdown>0)}}function fn(o,s){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"div",43)(2,"div",44)(3,"small"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"div",45)(7,"ion-button",46),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(3);return n.Njj(a.sendFeedback(e))}),n.j41(8,"ion-label"),n.EFF(9),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(4),n.JRh(n.bMT(5,2,"OrderHasExpired")),n.R7$(5),n.JRh("Feedback"))}function vn(o,s){if(1&o&&(n.qex(0),n.j41(1,"ion-footer")(2,"div",38),n.DNE(3,_n,12,11,"div",40)(4,pn,3,1,"ng-container",6)(5,fn,10,4,"ng-container",6),n.k0s()(),n.bVm()),2&o){const i=n.XpG(2);n.R7$(3),n.Y8G("ngIf",i.timeCountdown>0),n.R7$(),n.Y8G("ngIf",i.timeCountdown>0),n.R7$(),n.Y8G("ngIf",i.timeCountdown<=0)}}function hn(o,s){if(1&o&&(n.qex(0),n.DNE(1,mn,7,3,"ng-container",6)(2,vn,6,3,"ng-container",6),n.bVm()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.chargingSession),n.R7$(),n.Y8G("ngIf",!i.chargingSession)}}function In(o,s){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",38)(3,"ion-button",39),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(2);return n.Njj(a.openDetailChargingSession(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"GoToChargingSession")))}function Cn(o,s){if(1&o&&(n.qex(0),n.DNE(1,In,7,3,"ng-container",6),n.bVm()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.chargingSession)}}function bn(o,s){if(1&o){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",38)(3,"ion-button",47),n.bIt("click",function(e){n.eBV(i);const a=n.XpG();return n.Njj(a.sendFeedback(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&o&&(n.R7$(5),n.JRh(n.bMT(6,1,"SendFeedback")))}function Rn(o,s){if(1&o){const i=n.RV6();n.j41(0,"div",38)(1,"ion-button",49),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(3);return n.Njj(a.completeOrder(e))}),n.j41(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()()()}2&o&&(n.R7$(3),n.JRh(n.bMT(4,1,"Complete")))}function $n(o,s){if(1&o){const i=n.RV6();n.j41(0,"div",38)(1,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const a=n.XpG(3);return n.Njj(a.openDetailBill(e))}),n.nrm(2,"ion-icon",51),n.j41(3,"ion-label"),n.EFF(4),n.nI1(5,"translate"),n.k0s()()()}2&o&&(n.R7$(4),n.JRh(n.bMT(5,1,"ViewBill")))}function kn(o,s){if(1&o&&(n.j41(0,"ion-footer"),n.DNE(1,Rn,5,3,"div",48)(2,$n,6,3,"div",48),n.k0s()),2&o){const i=n.XpG(2);n.R7$(),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VEinvoiceStatus)==i.v_einvoice_status.ChuaXacNhan),n.R7$(),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VEinvoiceStatus)!=i.v_einvoice_status.ChuaXacNhan)}}function Fn(o,s){if(1&o&&(n.qex(0),n.DNE(1,kn,3,2,"ion-footer",6),n.bVm()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngIf",null==i.orderInfo?null:i.orderInfo.BillId)}}const Pn=[{path:"",component:(()=>{var o;class s{constructor(t,e,a,r,c){var m;this.router=t,this.loadingController=a,this.toastController=r,this.modalController=c,this.APP_ROUTE=k._,this.APP_FUNC_FormatMoney=S.xi,this.APP_FUNC_FormatDate=S.Rv,this.APP_FUNC_GetColor_VOrderStatus=S.qM,this.APP_FUNC_RoundNumber=S.Rw,this.v_order_status=P.TL,this.v_einvoice_status=P.XM,this.orderDetails=[],this.customerInvoices=[],this.intervalCounter=0,this.timeout=18e4,this.timeCountdown=0,this.intervalCountdown=null,this.loadingController.create({message:""}).then(R=>this.loading=R);let I=null!==(m=e.snapshot.params.id)&&void 0!==m?m:"";I&&(this.OrderId=parseInt(I))}ngOnInit(){var t=this;(0,v.A)(function*(){(yield(0,X.kU)())&&(t.refreshData(),t.refreshInterval())})()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}refreshInterval(){clearInterval(this.intervalReload),this.intervalReload=setInterval(()=>{var t,e;this.orderInfo&&[P.TL.DangThanhToan,P.TL.DaThanhToan].includes(null!==(t=null===(e=this.orderInfo)||void 0===e?void 0:e.VOrderStatus)&&void 0!==t?t:0)&&this.refreshData(()=>{this.intervalCounter++,this.intervalCounter>=10&&clearInterval(this.intervalReload)})},3e3)}refreshData(t){this.OrderId&&(0,J.vp)({loading:e=>{var a,r;e?null===(a=this.loading)||void 0===a||a.present():null===(r=this.loading)||void 0===r||r.dismiss()},params:{OrderId:this.OrderId},callback:e=>{var a,r,c;this.response=e,null!=e&&e.Succeeded?(this.orderInfo=e.Data,[P.TL.DaThanhToan,P.TL.DangTrongPhienSac].includes(null!==(a=null===(r=this.orderInfo)||void 0===r?void 0:r.VOrderStatus)&&void 0!==a?a:0)&&(0,x.KX)({params:{OrderCode:null===(c=this.orderInfo)||void 0===c?void 0:c.OrderCode},callback:m=>{var I;if(null!=m&&m.Succeeded){if(this.chargingSession=(null!==(I=m.Data)&&void 0!==I?I:[]).find(R=>{var M;return[P.jT.DangSac].includes(null!==(M=R.VSessionStatus)&&void 0!==M?M:0)}),this.chargingSession)return}else(0,l.cX)(this.toastController,{},m).then(R=>R.present());this.setTimeCountdown()}})):(0,l.cX)(this.toastController,{},e).then(m=>m.present()),t&&t()}})}chargingStart(t){var e=this;return(0,v.A)(function*(){var a,r,c;(0,x.aN)({loading:m=>{var I,R;m?null===(I=e.loading)||void 0===I||I.present():null===(R=e.loading)||void 0===R||R.dismiss()},params:{StationCode:null===(a=e.orderInfo)||void 0===a?void 0:a.StationCode,ConnectorId:null===(r=e.orderInfo)||void 0===r?void 0:r.ConnectorId,OrderCode:null===(c=e.orderInfo)||void 0===c?void 0:c.OrderCode},callback:m=>{null!=m&&m.Succeeded?window.location.replace(k._.CHARGING_SESSION_DETAIL.replace(":id",m.Data)):(0,l.cX)(e.toastController,{},m).then(I=>I.present())}})})()}sendFeedback(t){var e=this;return(0,v.A)(function*(){var a;(yield e.modalController.create({component:j.l,componentProps:{feedback:{DocType:U.v.ORDER_INFO,DocId:null===(a=e.orderInfo)||void 0===a?void 0:a.OrderId}},cssClass:"ion-modal-breakpoint",breakpoints:[1],initialBreakpoint:1})).present()})()}shareOrder(t){var e=this;return(0,v.A)(function*(){var a,r,c,m;yield A.S.share({title:null===(a=e.orderInfo)||void 0===a?void 0:a.OrderCode,text:(0,S.Rv)(null===(r=e.orderInfo)||void 0===r?void 0:r.OrderDate),url:k._.ORDER_INFO_DETAIL.replace(":id",null!==(c=null===(m=e.orderInfo)||void 0===m||null===(m=m.OrderId)||void 0===m?void 0:m.toString())&&void 0!==c?c:""),dialogTitle:"Share order"})})()}changeIsGetBill(t){this.IsGetBill=t.detail.value,this.GetCustomerinvoices()}selectCustomerInvoice(t){this.presentModalCustomerInvoice(t)}editCustomerInvoice(t){var e;this.presentModalAddCustomerInvoice(t,null===(e=this.customerInvoice)||void 0===e?void 0:e.CustomerInvoiceId)}GetCustomerinvoices(){var t=this;return(0,v.A)(function*(){(0,h.Ul)({loading:e=>{var a,r;e?null===(a=t.loading)||void 0===a||a.present():null===(r=t.loading)||void 0===r||r.dismiss()},params:{PageNumber:1,PageSize:100},callback:e=>{var a;if(null!=e&&e.Succeeded)if(t.customerInvoices=null!==(a=e.Data)&&void 0!==a?a:[],t.customerInvoices.length)if(1==t.customerInvoices.length)t.customerInvoice=t.customerInvoices[0];else{var r;t.customerInvoice=null!==(r=t.customerInvoices.filter(c=>c.IsDefault)[0])&&void 0!==r?r:t.customerInvoices[0]}else t.presentModalAddCustomerInvoice()}})})()}GetCustomerinvoice(t){var e=this;return(0,v.A)(function*(){t&&(0,h.kT)({loading:a=>{var r,c;a?null===(r=e.loading)||void 0===r||r.present():null===(c=e.loading)||void 0===c||c.dismiss()},params:{CustomerInvoiceId:t},callback:a=>{null!=a&&a.Succeeded&&(e.customerInvoice=a.Data)}})})()}completeOrder(t){var e=this;return(0,v.A)(function*(){var a;if(null!==(a=e.orderInfo)&&void 0!==a&&a.BillId)if(e.IsGetBill){var r;L({params:Object.assign({},e.customerInvoice,{BillId:null===(r=e.orderInfo)||void 0===r?void 0:r.BillId}),callback:m=>{null!=m&&m.Succeeded?(e.refreshData(),e.presentModalAddCustomerInvoiceSuccess()):(0,l.cX)(e.toastController,{},m).then(I=>I.present())}})}else{var c;K({params:{BillId:null===(c=e.orderInfo)||void 0===c?void 0:c.BillId},callback:m=>{null!=m&&m.Succeeded?e.refreshData():(0,l.cX)(e.toastController,{},m).then(I=>I.present())}})}})()}presentModalCustomerInvoice(t){var e=this;return(0,v.A)(function*(){var a;const r=yield e.modalController.create({component:B,componentProps:{CustomerInvoiceId:null===(a=e.customerInvoice)||void 0===a?void 0:a.CustomerInvoiceId}});r.onDidDismiss().then(c=>{"submit"==c.role&&e.GetCustomerinvoice(c.data)}),r.present()})()}presentModalAddCustomerInvoice(t,e){var a=this;return(0,v.A)(function*(){const r=yield a.modalController.create({component:E.$,componentProps:{CustomerInvoiceId:e},mode:"ios",cssClass:"ion-modal-breakpoint",backdropDismiss:!0,keyboardClose:!0,breakpoints:[.75,1],initialBreakpoint:.75});r.onDidDismiss().then(c=>{"success"==c.role&&a.GetCustomerinvoices()}),r.present()})()}presentModalAddCustomerInvoiceSuccess(t){var e=this;return(0,v.A)(function*(){(yield e.modalController.create({component:y,cssClass:"ion-modal-small",backdropDismiss:!0,keyboardClose:!0})).present()})()}openDetailBill(t){var e=this;return(0,v.A)(function*(){var a,r;e.router.navigateByUrl(k._.BILL_INFO_DETAIL.replace(":id",null!==(a=null===(r=e.orderInfo)||void 0===r||null===(r=r.BillId)||void 0===r?void 0:r.toString())&&void 0!==a?a:""))})()}openDetailChargingSession(t){var e=this;return(0,v.A)(function*(){var a,r;e.router.navigateByUrl(k._.CHARGING_SESSION_DETAIL.replace(":id",null!==(a=null===(r=e.chargingSession)||void 0===r||null===(r=r.ChargeSessionId)||void 0===r?void 0:r.toString())&&void 0!==a?a:""))})()}setTimeCountdown(){var t;if(null!==(t=this.orderInfo)&&void 0!==t&&t.PurchaseDate){let e=new Date(this.orderInfo.PurchaseDate).getTime()-(new Date).getTime()+this.timeout;if(e>0){this.timeCountdown=e,clearInterval(this.intervalCountdown);let a=1e3;this.intervalCountdown=setInterval(()=>{if(this.timeCountdown<=a)return this.timeCountdown=0,void clearInterval(this.intervalCountdown);this.timeCountdown-=a},a)}}}getTimeCountdown(){return w()(this.timeCountdown).format("mm:ss")}}return(o=s).\u0275fac=function(t){return new(t||o)(n.rXU(F.Ix),n.rXU(F.nX),n.rXU(d.Xi),n.rXU(d.K_),n.rXU(d.W3))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-order-info-detail"]],decls:22,vars:14,consts:[["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","end",1,"ion-no-margin",3,"click"],["color","primary",1,"ion-no-margin"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","mb-5"],[1,"text-center","line-height-0","mb-3"],["color","primary","name","crescent"],[1,"card-order","rounded","bg-white"],[1,"table","table-borderless","m-0"],[1,"border-dashed"],[1,"card-order-detail","rounded","bg-white"],[1,"mt-3","mb-2"],[1,"text-primary"],[4,"ngFor","ngForOf"],["class","border-top",4,"ngIf"],[1,"border-top"],[1,"font-condensed"],[1,"card-order-exchange","rounded","bg-white","mt-3"],[1,"mb-2","d-flex","justify-content-between"],[1,"card-order-refund","rounded","bg-white","mt-3"],["class","text-primary",4,"ngIf"],[1,"card-order-einvoice","rounded","bg-white","mt-3"],[1,"mt-5","mb-3","bill-group-radio"],["mode","md",3,"ionChange","value"],["label-placement","end",3,"value"],["class","card-bill rounded bg-white mt-3",4,"ngIf"],[1,"card-bill","rounded","bg-white","mt-3"],[1,"d-flex","align-items-center","justify-content-between"],["size","small","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/chevron-right.svg",1,"fs-4"],["class","table table-borderless m-0",4,"ngIf"],[1,"container","py-3"],["color","primary","expand","block","shape","round",3,"click"],["class","mb-3 text-center",4,"ngIf"],[1,"mb-3","text-center"],["color","primary","expand","block","shape","round",3,"click",4,"ngIf"],[1,"row","align-items-center"],[1,"col","pr-2"],[1,"col-auto","pl-2"],["color","medium","shape","round","fill","outline","expand","block",3,"click"],["color","warning","shape","round","fill","outline","expand","block",3,"click"],["class","container py-3",4,"ngIf"],["color","primary","shape","round","expand","block",3,"click"],["color","primary","shape","round","fill","outline","expand","block",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/view-circle.svg",1,"fs-4"]],template:function(t,e){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n.nrm(3,"ion-back-button",1),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"ion-buttons",2),n.bIt("click",function(r){return e.shareOrder(r)}),n.j41(8,"ion-chip",3)(9,"ion-label"),n.EFF(10),n.nI1(11,"translate"),n.k0s()()()()(),n.j41(12,"ion-content")(13,"ion-refresher",4),n.bIt("ionRefresh",function(r){return e.onIonRefresher(r)}),n.nrm(14,"ion-refresher-content"),n.k0s(),n.DNE(15,H,2,0,"div",5)(16,un,5,6,"ng-container",6),n.k0s(),n.qex(17,7),n.DNE(18,hn,3,2,"ng-container",8)(19,Cn,2,1,"ng-container",8)(20,bn,7,3,"ng-container",8)(21,Fn,2,1,"ng-container",8),n.bVm()),2&t&&(n.R7$(3),n.Y8G("defaultHref",e.APP_ROUTE.TABS_DEFAULT),n.R7$(2),n.JRh(n.bMT(6,10,"OrderInfo")),n.R7$(5),n.JRh(n.bMT(11,12,"Share")),n.R7$(5),n.Y8G("ngIf",!e.response),n.R7$(),n.Y8G("ngIf",null==e.response?null:e.response.Succeeded),n.R7$(),n.Y8G("ngSwitch",null==e.orderInfo?null:e.orderInfo.VOrderStatus),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DaThanhToan),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DangTrongPhienSac),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.KhongThanhCong),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DaSuDung))},dependencies:[b.Sq,b.bT,b.ux,b.e1,d.Jm,d.QW,d.ZB,d.W9,d.M0,d.eU,d.iq,d.he,d.KO,d.f0,d.To,d.Ki,d.w2,d.BC,d.ai,d.uR,d.Je,d.el,O.D9],styles:['ion-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0;padding-right:.5rem;font-size:.875rem;color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   b[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;white-space:nowrap;text-align:right}.card-order[_ngcontent-%COMP%]{padding:1rem}.card-order.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.card-order-detail[_ngcontent-%COMP%]{padding:1rem}.card-order-detail.rounded[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-top-right-radius:0!important;border-bottom-left-radius:1.5rem!important;border-bottom-right-radius:1.5rem!important}.card-order-exchange[_ngcontent-%COMP%], .card-order-refund[_ngcontent-%COMP%], .card-order-einvoice[_ngcontent-%COMP%]{padding:1rem}.card-order-exchange.rounded[_ngcontent-%COMP%], .card-order-refund.rounded[_ngcontent-%COMP%], .card-order-einvoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]{padding:1rem}.card-bill.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.bill-group-radio[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin:0 2rem .5rem 0}hr.border-dashed[_ngcontent-%COMP%]{margin:0;position:relative;z-index:1}hr.border-dashed[_ngcontent-%COMP%]:before, hr.border-dashed[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;z-index:2;bottom:0;margin-bottom:-1rem;width:2rem;height:2rem;border-radius:50%;background-color:var(--ion-background-color-primary)}hr.border-dashed[_ngcontent-%COMP%]:before{left:-1rem}hr.border-dashed[_ngcontent-%COMP%]:after{right:-1rem}']}),s})()}];let Mn=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[F.iI.forChild(Pn),F.iI]}),s})();var On=g(3584);let Tn=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[b.MD,$.YN,d.bv,Mn,On.x]}),s})()}}]);