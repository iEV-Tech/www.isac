"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3512],{3512:(Y,p,c)=>{c.r(p),c.d(p,{CustomerInvoicePageModule:()=>J});var g=c(177),v=c(9417),l=c(3092),f=c(7625),d=c(467),h=c(1806),_=c(5970),u=c(8650),I=c(8833),t=c(4438),C=c(4842);const P=e=>({$implicit:e});function R(e,r){1&e&&(t.j41(0,"div",14),t.nrm(1,"ion-img",15),t.j41(2,"div",16),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&e&&(t.R7$(3),t.JRh(t.bMT(4,1,"DataNotFound")))}function b(e,r){if(1&e&&(t.qex(0),t.j41(1,"div",17),t.eu8(2,18),t.k0s(),t.bVm()),2&e){const o=r.$implicit;t.XpG();const n=t.sdS(26);t.R7$(2),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,P,o))}}function T(e,r){if(1&e){const o=t.RV6();t.j41(0,"ion-infinite-scroll",19),t.bIt("ionInfinite",function(i){t.eBV(o);const a=t.XpG();return t.Njj(a.onIonInfinite(i))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function F(e,r){1&e&&(t.j41(0,"small",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" (",t.bMT(2,1,"Default"),") "))}function $(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"BillTax")),t.R7$(4),t.JRh(o.TaxCode)}}function M(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"BillCompanyName")),t.R7$(4),t.JRh(o.CompanyName)}}function j(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"BillBuyerName")),t.R7$(4),t.JRh(o.BuyerName)}}function x(e,r){if(1&e&&t.DNE(0,M,7,4,"tr",31)(1,j,7,4,"tr",31),2&e){const o=t.XpG().$implicit;t.Y8G("ngIf",o.CompanyName),t.R7$(),t.Y8G("ngIf",o.BuyerName)}}function E(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"FullName")),t.R7$(4),t.JRh(o.BuyerName)}}function y(e,r){if(1&e&&t.DNE(0,E,7,4,"tr",31),2&e){const o=t.XpG().$implicit;t.Y8G("ngIf",o.BuyerName)}}function k(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"BillAddress")),t.R7$(4),t.JRh(o.Address)}}function D(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"Email")),t.R7$(4),t.JRh(o.BuyerEmail)}}function G(e,r){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"td")(5,"b"),t.EFF(6),t.k0s()()()),2&e){const o=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"Mobile")),t.R7$(4),t.JRh(o.BuyerPhone)}}function N(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",20)(1,"div",21)(2,"div",22)(3,"b",23),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.DNE(6,F,3,3,"small",24),t.k0s(),t.j41(7,"div",25)(8,"ion-button",26),t.bIt("click",function(i){const a=t.eBV(o).$implicit,s=t.XpG();return t.Njj(s.editCustomerInvoice(i,a.CustomerInvoiceId))}),t.nrm(9,"ion-icon",27),t.k0s(),t.j41(10,"ion-button",28),t.bIt("click",function(i){const a=t.eBV(o).$implicit,s=t.XpG();return t.Njj(s.deleteCustomerInvoice(i,a.CustomerInvoiceId))}),t.nrm(11,"ion-icon",29),t.k0s()()(),t.nrm(12,"hr"),t.j41(13,"table",30),t.DNE(14,$,7,4,"tr",31)(15,x,2,2)(16,y,1,1)(17,k,7,4,"tr",31)(18,D,7,4,"tr",31)(19,G,7,4,"tr",31),t.k0s()()}if(2&e){const o=r.$implicit;t.R7$(4),t.JRh(t.bMT(5,7,"ExportBillInfo")),t.R7$(2),t.Y8G("ngIf",o.IsDefault),t.R7$(8),t.Y8G("ngIf",o.TaxCode),t.R7$(),t.vxM(15,o.IsCompany?15:16),t.R7$(2),t.Y8G("ngIf",o.Address),t.R7$(),t.Y8G("ngIf",o.BuyerEmail),t.R7$(),t.Y8G("ngIf",o.BuyerPhone)}}const O=[{path:"",component:(()=>{var e;class r{constructor(n,i,a,s){this.modalController=n,this.toastController=i,this.loadingController=a,this.animationController=s,this.APP_ROUTE=I._,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.customerInvoices=[],this.limitLoad=0}ngOnInit(){this.refreshData()}onIonRefresher(n){this.filter={},this.refreshData(()=>{n.target.complete()})}onIonInfinite(n){this.loadMore(()=>{n.target.complete()})}pushData(n){1==this.paging.page&&(this.customerInvoices.length=0),this.customerInvoices=this.customerInvoices.concat(n)}totalData(){return this.customerInvoices.length}refreshData(n){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(n)}loadMore(n){this.paging.page+=1,this.loadData_Paging_Limit(n)}searchChange(n){this.filter={},this.filter.search=n.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(n,i){this.paging.sortfield=n||null,this.paging.sorttype=i||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(n){var i=this;return(0,d.A)(function*(){if(i.limitLoad>0)return void(n&&n());i.limitLoad=300;let a=setInterval(()=>{i.limitLoad-=100,i.limitLoad<=0&&(clearInterval(a),i.loadData_Paging(n))},100)})()}loadData_Paging(n){var i=this;return(0,d.A)(function*(){i.paging.loading=!0,(0,_.Ul)({loadingController:i.loadingController,params:{PageNumber:i.paging.page,PageSize:i.paging.limit},callback:a=>{var s;i.response=a,null!=a&&a.Succeeded?i.pushData(null!==(s=a.Data)&&void 0!==s?s:[]):(0,u.cX)(i.toastController,{},a).then(m=>m.present()),i.paging.loading=!1,i.paging.active=!(null==a||!a.HasNextPage),n&&n()}})})()}editCustomerInvoice(n,i){this.presentModalAddCustomerInvoice(n,i)}deleteCustomerInvoice(n,i){i&&(0,u.Yy)(this.modalController,this.animationController,{selectedId:i,message:{TitleConfirm:"Delete_Confirm",TextConfirm:"Delete"},fnConfirm:a=>{(0,_.NT)({loadingController:this.loadingController,params:{CustomerInvoiceId:a},callback:s=>{null!=s&&s.Succeeded?this.refreshData():(0,u.cX)(this.toastController,{},s).then(m=>m.present())}})}})}changeCustomerInvoice(n){this.CustomerInvoiceId=n.detail.value}presentModalAddCustomerInvoice(n,i){var a=this;return(0,d.A)(function*(){const s=yield a.modalController.create({component:h.$,componentProps:{CustomerInvoiceId:i}});s.onDidDismiss().then(m=>{"success"==m.role&&a.refreshData()}),s.present()})()}}return(e=r).\u0275fac=function(n){return new(n||e)(t.rXU(l.W3),t.rXU(l.K_),t.rXU(l.Xi),t.rXU(l.Hx))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-customer-invoice"]],inputs:{CustomerInvoiceId:"CustomerInvoiceId"},decls:27,vars:13,consts:[["templateCustomerInvoice",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container container-loading py-5 text-center",4,"ngIf"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12"],["color","primary","expand","block","shape","round","fill","outline",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/plus-circle.svg"],[1,"col-12","my-3","text-center"],[1,"text-muted"],[3,"ionInfinite",4,"ngIf"],[1,"container","container-loading","py-5","text-center"],["src","../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[1,"col-12","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-customer-invoice","rounded","bg-white"],[1,"d-flex","justify-content-between"],[1,"text-wrap"],[1,"mr-1"],["class","text-primary d-inline-block",4,"ngIf"],[1,"text-nowrap"],["size","small","color","medium","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/edit.svg",1,"fs-4"],["size","small","color","danger","fill","clear",3,"click"],["name","close-outline",1,"fs-5"],[1,"table","table-borderless","m-0"],[4,"ngIf"],[1,"text-primary","d-inline-block"]],template:function(n,i){if(1&n){const a=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"translate"),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-refresher",3),t.bIt("ionRefresh",function(m){return t.eBV(a),t.Njj(i.onIonRefresher(m))}),t.nrm(9,"ion-refresher-content"),t.k0s(),t.DNE(10,R,5,3,"div",4),t.j41(11,"div",5)(12,"div",6),t.DNE(13,b,3,4,"ng-container",7),t.j41(14,"div",8)(15,"ion-button",9),t.bIt("click",function(m){return t.eBV(a),t.Njj(i.presentModalAddCustomerInvoice(m))}),t.nrm(16,"ion-icon",10),t.j41(17,"ion-label"),t.EFF(18),t.nI1(19,"translate"),t.k0s()()(),t.j41(20,"div",11)(21,"small",12),t.EFF(22),t.nI1(23,"translate"),t.k0s()()()(),t.DNE(24,T,2,0,"ion-infinite-scroll",13),t.k0s(),t.DNE(25,N,20,9,"ng-template",null,0,t.C5r)}2&n&&(t.R7$(3),t.Y8G("defaultHref",i.APP_ROUTE.USER),t.R7$(2),t.JRh(t.bMT(6,7,"ExportBillInfo")),t.R7$(5),t.Y8G("ngIf",i.response&&!i.customerInvoices.length),t.R7$(3),t.Y8G("ngForOf",i.customerInvoices),t.R7$(5),t.JRh(t.bMT(19,9,"Create")),t.R7$(4),t.SpI(" ",t.bMT(23,11,"CustomerInvoiceNotice")," "),t.R7$(2),t.Y8G("ngIf",i.paging.active))},dependencies:[g.Sq,g.bT,g.T3,l.Jm,l.QW,l.W9,l.eU,l.iq,l.KW,l.Ax,l.Hp,l.he,l.To,l.Ki,l.BC,l.ai,l.el,C.D9],styles:[".table[_ngcontent-%COMP%]{table-layout:fixed}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade);font-size:.875rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-customer-invoice[_ngcontent-%COMP%]{padding:1rem}.card-customer-invoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-customer-invoice[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-customer-invoice[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}"]}),r})()}];let B=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[f.iI.forChild(O),f.iI]}),r})();var X=c(3890);let J=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[g.MD,v.YN,l.bv,B,X.x]}),r})()}}]);