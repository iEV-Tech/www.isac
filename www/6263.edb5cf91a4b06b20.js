"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6263],{6263:(Y,C,g)=>{g.r(C),g.d(C,{ChargingLocationPageModule:()=>B});var d=g(177),L=g(9417),p=g(8974),F=g(2175),u=g(467),y=g(2482),T=g(7392),R=g(7762),I=g(5312),h=g(3801),f=g(6841),m=g(1312),v=g(7518),P=g(3588),_=g(8833),t=g(4438),x=g(4842);const j=o=>({$implicit:o});function E(o,s){1&o&&(t.j41(0,"div",16),t.nrm(1,"ion-spinner",17),t.k0s())}function D(o,s){if(1&o){const l=t.RV6();t.qex(0),t.j41(1,"ion-button",22),t.bIt("click",function(n){t.eBV(l);const a=t.XpG(3);return t.Njj(a.refreshCurrentPosition(n))}),t.nrm(2,"ion-icon",23),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.bVm()}if(2&o){const l=t.XpG().$implicit;t.R7$(4),t.JRh(l.text)}}function S(o,s){if(1&o){const l=t.RV6();t.qex(0),t.j41(1,"ion-button",22),t.bIt("click",function(n){t.eBV(l);const a=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.clearFilter(n,a))}),t.j41(2,"ion-label"),t.EFF(3),t.k0s(),t.nrm(4,"ion-icon",24),t.k0s(),t.bVm()}if(2&o){const l=t.XpG().$implicit;t.R7$(3),t.JRh(l.text)}}function b(o,s){if(1&o){const l=t.RV6();t.qex(0),t.j41(1,"ion-button",22),t.bIt("click",function(n){t.eBV(l);const a=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.clearFilter(n,a))}),t.j41(2,"ion-label"),t.EFF(3),t.k0s(),t.nrm(4,"ion-icon",24),t.k0s(),t.bVm()}if(2&o){const l=t.XpG().$implicit;t.R7$(3),t.JRh(l.text)}}function G(o,s){if(1&o&&(t.qex(0)(1,19),t.DNE(2,D,5,1,"ng-container",20)(3,S,5,1,"ng-container",20)(4,b,5,1,"ng-container",21),t.bVm()()),2&o){const l=s.$implicit;t.R7$(),t.Y8G("ngSwitch",l.type),t.R7$(),t.Y8G("ngSwitchCase","Nearby"),t.R7$(),t.Y8G("ngSwitchCase","Search")}}function V(o,s){if(1&o&&(t.j41(0,"div",18),t.DNE(1,G,5,3,"ng-container",14),t.k0s()),2&o){const l=t.XpG();t.R7$(),t.Y8G("ngForOf",l.getFilters())}}function N(o,s){1&o&&(t.j41(0,"div",25),t.nrm(1,"img",26),t.j41(2,"div",27),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&o&&(t.R7$(3),t.JRh(t.bMT(4,1,"DataNotFound")))}function O(o,s){if(1&o&&(t.qex(0),t.j41(1,"div",28),t.eu8(2,29),t.k0s(),t.bVm()),2&o){const l=s.$implicit;t.XpG();const e=t.sdS(19);t.R7$(2),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,j,l))}}function $(o,s){if(1&o){const l=t.RV6();t.j41(0,"ion-infinite-scroll",30),t.bIt("ionInfinite",function(n){t.eBV(l);const a=t.XpG();return t.Njj(a.onIonInfinite(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function M(o,s){if(1&o){const l=t.RV6();t.j41(0,"div",31)(1,"div",32),t.bIt("click",function(){const n=t.eBV(l).$implicit,a=t.XpG();return t.Njj(a.openDetail(n.ChargeLocationId))}),t.j41(2,"div",33)(3,"ion-avatar"),t.nrm(4,"img",34),t.k0s(),t.j41(5,"div",35)(6,"small"),t.EFF(7),t.k0s()()(),t.j41(8,"div",36)(9,"h6",37)(10,"b"),t.EFF(11),t.k0s()(),t.j41(12,"div"),t.nrm(13,"ion-icon",38),t.j41(14,"ion-text",39)(15,"small",40)(16,"b"),t.EFF(17),t.k0s(),t.EFF(18),t.k0s()()(),t.j41(19,"div")(20,"small"),t.EFF(21),t.k0s()()()(),t.j41(22,"div",41)(23,"div")(24,"ion-text",39)(25,"small"),t.EFF(26),t.k0s(),t.EFF(27," - "),t.j41(28,"small"),t.EFF(29),t.k0s()()(),t.j41(30,"div")(31,"ion-button",42),t.bIt("click",function(n){const a=t.eBV(l).$implicit,i=t.XpG();return t.Njj(i.openDirection(n,a))}),t.j41(32,"ion-label"),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.nrm(35,"ion-icon",43),t.k0s()()()()}if(2&o){let l,e,n,a;const i=s.$implicit,r=t.XpG();t.R7$(4),t.Y8G("src",r.getLocImage(i),t.B4B),t.R7$(3),t.SpI("",r.getDistance2CL(i),"km"),t.R7$(4),t.JRh(i.LocName),t.R7$(5),t.HbH(i.TotalConnectorReady?"text-primary":"text-danger"),t.R7$(),t.JRh(null!==(l=i.TotalConnectorReady)&&void 0!==l?l:0),t.R7$(),t.SpI("/",null!==(e=i.TotalConnector)&&void 0!==e?e:0," \u0111\u1ea7u s\u1ea1c s\u1eb5n s\xe0ng"),t.R7$(3),t.JRh(i.LocAddress),t.R7$(5),t.JRh(null!==(n=i.OpenTimeStart)&&void 0!==n?n:"--:--"),t.R7$(3),t.JRh(null!==(a=i.OpenTimeEnd)&&void 0!==a?a:"--:--"),t.R7$(2),t.Y8G("color",r.APP_FUNC_GetColor_VLocationStatus(i.VLocationStatus)),t.R7$(2),t.JRh(t.bMT(34,12,"Direction"))}}const k=[{path:"",component:(()=>{var o;class s{constructor(e,n,a){var i=this;this.modalController=e,this.toastController=n,this.loadingController=a,this.APP_ROUTE=_._,this.v_location_status=P.Ix,this.APP_FUNC_GetColor_VLocationStatus=m.Bb,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.currentPosition=I.c.app_default.geolocation.pos,this.chargingLocations=[],(0,h.X)().then(r=>this.currentPosition=r),(0,u.A)(function*(){i.loading=yield i.loadingController.create({message:""})})()}ngOnInit(){this.refreshData()}onIonRefresher(e){this.filter={},this.refreshData(()=>{e.target.complete()})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}resetData(){this.chargingLocations.length=0}pushData(e,n){this.chargingLocations=this.chargingLocations.concat(e),n&&n(this.chargingLocations)}totalData(){return this.chargingLocations.length}refreshData(e){this.filter={},this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging(e)}loadMore(e){this.paging.page+=1,this.loadData_Paging(e)}searchChange(e){this.filter={},this.filter.search=e.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging()}sortChange(e,n){this.paging.sortfield=e||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging()}loadData_Paging(e){var n=this;return(0,u.A)(function*(){if(n.paging.loading=!0,n.filter.search)(0,f.tC)({loading:i=>{var r,c;i?null===(r=n.loading)||void 0===r||r.present():null===(c=n.loading)||void 0===c||c.dismiss()},params:{Search:n.filter.search,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:i=>{var r;n.response=i,null!=i&&i.Succeeded?n.pushData(null!==(r=i.Data)&&void 0!==r?r:[]):(0,v.cX)(n.toastController,{},i).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==i||!i.HasNextPage),e&&e()}});else if(n.filter.ElectricTypeFilter||n.filter.ConnectorTypeFilter||n.filter.VConnectorStatusFilter)(0,f.Zd)({loading:i=>{var r,c;i?null===(r=n.loading)||void 0===r||r.present():null===(c=n.loading)||void 0===c||c.dismiss()},params:{ElectricTypeFilter:n.filter.ElectricTypeFilter,ConnectorTypeFilter:n.filter.ConnectorTypeFilter,VConnectorStatusFilter:n.filter.VConnectorStatusFilter,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:i=>{var r;n.response=i,null!=i&&i.Succeeded?n.pushData(null!==(r=i.Data)&&void 0!==r?r:[]):(0,v.cX)(n.toastController,{},i).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==i||!i.HasNextPage),e&&e()}});else{var a=yield(0,h.X)();(0,f.Bc)({loading:i=>{var r,c;i?null===(r=n.loading)||void 0===r||r.present():null===(c=n.loading)||void 0===c||c.dismiss()},params:{TopLeftLat:a.lat+.1,TopLeftLong:a.lng-.1,RightBottomLat:a.lat-.1,RightBottomLong:a.lng+.1,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:i=>{var r;n.response=i,null!=i&&i.Succeeded?(n.pushData(null!==(r=i.Data)&&void 0!==r?r:[],c=>{c.forEach(H=>{})}),0==n.totalData()&&1==n.paging.page&&(n.filter.VConnectorStatusFilter=P.EF.DangRanh,n.filterChange())):(0,v.cX)(n.toastController,{},i).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==i||!i.HasNextPage),e&&e()}})}})()}presentModalFilterChargingLocationComponent(e){var n=this;return(0,u.A)(function*(){const a=yield n.modalController.create({component:y.T,componentProps:{filter:Object.assign({},n.filter,{search:null})},mode:"ios"});a.onDidDismiss().then(i=>{"clear"==i.role?(n.filter={},n.filterChange()):"submit"==i.role&&(n.filter=i.data,n.filterChange())}),a.present()})()}openDirection(e,n){return(0,u.A)(function*(){e.preventDefault(),yield T.P.open({url:(0,m.LZ)(yield(0,h.X)(),{lat:null==n?void 0:n.LocLat,lng:null==n?void 0:n.LocLong})})})()}hrefDetail(e){var n;return _._.CHARGING_LOCATION_DETAIL.replace(":id",null!==(n=null==e?void 0:e.toString())&&void 0!==n?n:"")}openDetail(e){return(0,u.A)(function*(){window.location.href=_._.CHARGING_LOCATION_DETAIL.replace(":id",e)})()}getLocImage(e){var n;if(!e.LocImage&&e.LocImages)if("string"==typeof e.LocImages){var a,i;e.LocImage=(null!==(a=(null!==(i=JSON.parse(e.LocImages))&&void 0!==i?i:[])[0])&&void 0!==a?a:{}).imageurl}else{var r,c;e.LocImage=(null!==(r=(null!==(c=e.LocImages)&&void 0!==c?c:[])[0])&&void 0!==r?r:{}).imageurl}return null!==(n=e.LocImage)&&void 0!==n?n:"assets/favicon/favicon.svg"}getDistance2CL(e){return parseFloat((0,m.GH)(this.currentPosition,{lat:null==e?void 0:e.LocLat,lng:null==e?void 0:e.LocLong}).toFixed(2))}JSONstringify(e){return JSON.stringify(null!=e?e:{},null,2)}getFilters(){var e=[];if(this.filter.search&&e.push({type:"Search",value:this.filter.search,text:this.filter.search}),this.filter.ElectricTypeFilter)switch(this.filter.ElectricTypeFilter){case 1:e.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"AC"});break;case 2:e.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"DC"});break;case 3:e.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"T\u1ea5t c\u1ea3 d\xf2ng \u0111i\u1ec7n"})}if(this.filter.VConnectorStatusFilter)switch(this.filter.VConnectorStatusFilter){case 2500:e.push({type:"VConnectorStatusFilter",value:this.filter.VConnectorStatusFilter,text:"S\u1eb5n s\xe0ng s\u1ea1c"});break;case 2599:e.push({type:"VConnectorStatusFilter",value:this.filter.VConnectorStatusFilter,text:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"})}return this.filter.ConnectorTypeFilter&&this.filter.ConnectorTypeFilter.split(";").forEach(n=>{e.push({type:"ConnectorTypeFilter",value:n,text:n})}),e.length||e.push({type:"Nearby",value:"Nearby",text:"G\u1ea7n \u0111\xe2y"}),e}clearFilter(e,n){var a=this;return(0,u.A)(function*(){if("Search"==n.type)a.filter.search=void 0;else if("ElectricTypeFilter"==n.type)a.filter.ElectricTypeFilter=void 0;else if("VConnectorStatusFilter"==n.type)a.filter.VConnectorStatusFilter=void 0;else if("ConnectorTypeFilter"==n.type){var i;a.filter.ConnectorTypeFilter=null===(i=a.filter.ConnectorTypeFilter)||void 0===i?void 0:i.split(";").filter(r=>r!=n.value).join(";")}a.filterChange()})()}refreshCurrentPosition(e){var n=this;return(0,u.A)(function*(){R.L.getCurrentPosition({enableHighAccuracy:!0,maximumAge:3e5}).then(a=>{a.coords&&((0,h.f)({params:{lat:a.coords.latitude,lng:a.coords.longitude}}),n.refreshData())})})()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(p.W3),t.rXU(p.K_),t.rXU(p.Xi))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-charging-location"]],decls:20,vars:6,consts:[["templateChargingLocation",""],[1,"container","p-0","d-flex","align-items-center"],[1,"flex-grow-1"],["mode","md","search-icon"," ","placeholder","T\xecm tr\u1ea1m s\u1ea1c ...",3,"ionChange","ionClear"],[1,"pl-3"],["mode","md","color","light","shape","round",3,"click"],["src","../../../assets/icon/ion-icon/filter.svg"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","container list-filters",4,"ngIf"],["class","container py-5 text-center",4,"ngIf"],[1,"container","pt-3","pb-4"],[1,"row"],[4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","list-filters"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","ios","size","small","shape","round","color","primary",3,"click"],["slot","start","name","locate-outline"],["slot","end","name","close-outline"],[1,"container","py-5","text-center"],["src","../../../assets/image/temp/no-info.svg"],[1,"text-muted","mt-4"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-day"],[1,"d-flex","align-items-start","p-3","cursor-pointer",3,"click"],[1,"col-auto","px-0"],[3,"src"],[1,"text-danger","text-center","mt-1"],[1,"col","pr-0"],[1,"my-0"],["src","../../../assets/icon/ion-icon/electric.svg","color","primary"],["color","medium"],[1,"font-weight-medium"],[1,"d-flex","align-items-center","justify-content-between","px-3","pb-3"],["shape","round",3,"click","color"],["src","../../../assets/icon/ion-icon/direction.svg","color","primary","slot","end"]],template:function(e,n){if(1&e){const a=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",1)(3,"div",2)(4,"ion-searchbar",3),t.bIt("ionChange",function(r){return t.eBV(a),t.Njj(n.searchChange(r))})("ionClear",function(r){return t.eBV(a),t.Njj(n.searchChange(r))}),t.k0s()(),t.j41(5,"div",4)(6,"ion-button",5),t.bIt("click",function(r){return t.eBV(a),t.Njj(n.presentModalFilterChargingLocationComponent(r))}),t.nrm(7,"ion-icon",6),t.k0s()()()()(),t.j41(8,"ion-content",7)(9,"ion-refresher",8),t.bIt("ionRefresh",function(r){return t.eBV(a),t.Njj(n.onIonRefresher(r))}),t.nrm(10,"ion-refresher-content"),t.k0s(),t.DNE(11,E,2,0,"div",9)(12,V,2,1,"div",10)(13,N,5,3,"div",11),t.j41(14,"div",12)(15,"div",13),t.DNE(16,O,3,4,"ng-container",14),t.k0s()(),t.DNE(17,$,2,0,"ion-infinite-scroll",15),t.k0s(),t.DNE(18,M,36,14,"ng-template",null,0,t.C5r)}2&e&&(t.R7$(8),t.Y8G("fullscreen",!0),t.R7$(3),t.Y8G("ngIf",!n.response),t.R7$(),t.Y8G("ngIf",n.response),t.R7$(),t.Y8G("ngIf",n.response&&!n.chargingLocations.length),t.R7$(3),t.Y8G("ngForOf",n.chargingLocations),t.R7$(),t.Y8G("ngIf",n.paging.active))},dependencies:[d.Sq,d.bT,d.T3,d.ux,d.e1,d.fG,p.mC,p.Jm,p.W9,p.eU,p.iq,p.Ax,p.Hp,p.he,p.To,p.Ki,p.S1,p.w2,p.IO,p.ai,p.Gw,x.D9],styles:["ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding:0}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: .5rem;--padding-end: .5rem}.card-day[_ngcontent-%COMP%]{border:1px solid var(--ion-color-gray);border-radius:1rem}.card-day[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:3rem;height:3rem}.card-day[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .card-day[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{vertical-align:middle}.list-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 1rem;--padding-end: 1rem;margin:0 .5rem .5rem 0}.list-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover   ion-icon[slot=end][_ngcontent-%COMP%]{color:var(--ion-color-danger)}"]}),s})()}];let A=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[F.iI.forChild(k),F.iI]}),s})();var X=g(9500);let B=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[d.MD,L.YN,p.bv,A,X.x]}),s})()}}]);