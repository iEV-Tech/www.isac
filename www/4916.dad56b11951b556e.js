"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4916],{6944:(j,y,p)=>{p.d(y,{KX:()=>k,_$:()=>O,aN:()=>R,cb:()=>v,eu:()=>T,kO:()=>d,wm:()=>D});var I=p(467),F=p(7158);const d=function(){var C=(0,I.A)(function*(s){var u,m,h;s.params=s.params||{},(0,F.hm)({url:"api/ChargingSession/get-mychargingsessions",params:{VSessionStatus:null!==(u=s.params.VSessionStatus)&&void 0!==u?u:null,PageNumber:null!==(m=s.params.PageNumber)&&void 0!==m?m:1,PageSize:null!==(h=s.params.PageSize)&&void 0!==h?h:10},success:_=>{"function"==typeof s.callback&&s.callback(_.data||null)},error:_=>{var b;"function"==typeof s.callback&&s.callback(null==_||null===(b=_.response)||void 0===b?void 0:b.data),console.error(_)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}(),k=function(){var C=(0,I.A)(function*(s){var u,m,h;s.params=s.params||{},(0,F.hm)({url:"api/ChargingSession/get-mybyordercode",params:{OrderCode:null!==(u=s.params.OrderCode)&&void 0!==u?u:null,PageNumber:null!==(m=s.params.PageNumber)&&void 0!==m?m:1,PageSize:null!==(h=s.params.PageSize)&&void 0!==h?h:10},success:_=>{"function"==typeof s.callback&&s.callback(_.data||null)},error:_=>{var b;"function"==typeof s.callback&&s.callback(null==_||null===(b=_.response)||void 0===b?void 0:b.data),console.error(_)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}(),v=function(){var C=(0,I.A)(function*(s){s.params=s.params||{},(0,F.hm)({url:`api/ChargingSession/get-mybyid/${s.params.ChargeSessionId}`,success:u=>{"function"==typeof s.callback&&s.callback(u.data||null)},error:u=>{var m;"function"==typeof s.callback&&s.callback(null==u||null===(m=u.response)||void 0===m?void 0:m.data),console.error(u)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}(),R=function(){var C=(0,I.A)(function*(s){var u,m,h;s.params=s.params||{},(0,F.Ll)({url:"api/ChargingSession/start-create",params:{StationCode:null!==(u=s.params.StationCode)&&void 0!==u?u:null,ConnectorId:null!==(m=s.params.ConnectorId)&&void 0!==m?m:null,OrderCode:null!==(h=s.params.OrderCode)&&void 0!==h?h:null},success:_=>{"function"==typeof s.callback&&s.callback(_.data||null)},error:_=>{var b;"function"==typeof s.callback&&s.callback(null==_||null===(b=_.response)||void 0===b?void 0:b.data),console.error(_)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}(),D=function(){var C=(0,I.A)(function*(s){var u;s.params=s.params||{},(0,F.Ll)({url:"api/ChargingSession/start",params:{ChargeSessionId:null!==(u=s.params.ChargeSessionId)&&void 0!==u?u:null},success:m=>{"function"==typeof s.callback&&s.callback(m.data||null)},error:m=>{var h;"function"==typeof s.callback&&s.callback(null==m||null===(h=m.response)||void 0===h?void 0:h.data),console.error(m)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}(),O=function(){var C=(0,I.A)(function*(s){var u;s.params=s.params||{},(0,F.Ll)({url:"api/ChargingSession/stop",params:{ChargeSessionId:null!==(u=s.params.ChargeSessionId)&&void 0!==u?u:null},success:m=>{"function"==typeof s.callback&&s.callback(m.data||null)},error:m=>{var h;"function"==typeof s.callback&&s.callback(null==m||null===(h=m.response)||void 0===h?void 0:h.data),console.error(m)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}(),T=function(){var C=(0,I.A)(function*(s){s.params=s.params||{},(0,F.hm)({url:`api/ChargingSession/monitor/${s.params.StationCode}/${s.params.ConnectorId}`,success:u=>{"function"==typeof s.callback&&s.callback(u.data||null)},error:u=>{var m;"function"==typeof s.callback&&s.callback(null==u||null===(m=u.response)||void 0===m?void 0:m.data),console.error(u)},loading:null==s?void 0:s.loading})});return function(u){return C.apply(this,arguments)}}()},4916:(j,y,p)=>{p.r(y),p.d(y,{OrderInfoDetailPageModule:()=>En});var I=p(177),F=p(9417),d=p(4488),k=p(2175),v=p(467),R=p(8833),n=p(4438);let D=(()=>{var i;class r{constructor(){this.APP_ROUTE=R._}ngOnInit(){}}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=n.VBU({type:i,selectors:[["app-modal-add-customer-invoice-success"]],decls:10,vars:1,consts:[[1,"p-4","text-center"],["src","../../../../assets/icon/ion-img/success.svg"],[1,"mt-5"],["color","light","shape","round","fill","solid","expand","block",3,"href"]],template:function(t,e){1&t&&(n.j41(0,"div",0),n.nrm(1,"ion-img",1),n.j41(2,"h4"),n.EFF(3,"\u0110\xe3 g\u1eedi y\xeau c\u1ea7u xu\u1ea5t h\xf3a \u0111\u01a1n"),n.k0s(),n.j41(4,"div")(5,"small"),n.EFF(6,"B\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c h\xf3a \u0111\u01a1n qua email \u0111\xe3 \u0111\u0103ng k\xed"),n.k0s()(),n.j41(7,"div",2)(8,"ion-button",3),n.EFF(9,"Quay v\u1ec1 trang ch\u1ee7"),n.k0s()()()),2&t&&(n.R7$(8),n.Y8G("href",e.APP_ROUTE.TABS_DEFAULT))},dependencies:[d.Jm,d.KW],styles:["ion-img[_ngcontent-%COMP%]{width:3.5rem;margin:1rem auto}"]}),r})();var $=p(7158);const O=function(){var i=(0,v.A)(function*(r){var o,t,e,a,l,c;r.params=r.params||{},(0,$.Ll)({url:"api/CustomerInvoice/create",params:{IsCompany:null!==(o=r.params.IsCompany)&&void 0!==o?o:null,BuyerName:null!==(t=r.params.BuyerName)&&void 0!==t?t:null,TaxCode:null!==(e=r.params.TaxCode)&&void 0!==e?e:null,CompanyName:null!==(a=r.params.CompanyName)&&void 0!==a?a:null,Address:null!==(l=r.params.Address)&&void 0!==l?l:null,IsDefault:null!==(c=r.params.IsDefault)&&void 0!==c?c:null},success:g=>{"function"==typeof r.callback&&r.callback(g.data||null)},error:g=>{var f;"function"==typeof r.callback&&r.callback(null==g||null===(f=g.response)||void 0===f?void 0:f.data),console.error(g)},loading:null==r?void 0:r.loading})});return function(o){return i.apply(this,arguments)}}(),T=function(){var i=(0,v.A)(function*(r){var o,t;r.params=r.params||{},(0,$.hm)({url:"api/CustomerInvoice/get-customerinvoices",params:{PageNumber:null!==(o=r.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(t=r.params.PageSize)&&void 0!==t?t:10},success:e=>{"function"==typeof r.callback&&r.callback(e.data||null)},error:e=>{var a;"function"==typeof r.callback&&r.callback(null==e||null===(a=e.response)||void 0===a?void 0:a.data),console.error(e)},loading:null==r?void 0:r.loading})});return function(o){return i.apply(this,arguments)}}(),C=function(){var i=(0,v.A)(function*(r){r.params=r.params||{},(0,$.hm)({url:`api/CustomerInvoice/get/${r.params.CustomerInvoiceId}`,success:o=>{"function"==typeof r.callback&&r.callback(o.data||null)},error:o=>{var t;"function"==typeof r.callback&&r.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:null==r?void 0:r.loading})});return function(o){return i.apply(this,arguments)}}(),s=function(){var i=(0,v.A)(function*(r){var o,t,e,a,l,c,g;r.params=r.params||{},(0,$.IH)({url:"api/CustomerInvoice/update",params:{CustomerInvoiceId:null!==(o=r.params.CustomerInvoiceId)&&void 0!==o?o:null,IsCompany:null!==(t=r.params.IsCompany)&&void 0!==t?t:null,BuyerName:null!==(e=r.params.BuyerName)&&void 0!==e?e:null,TaxCode:null!==(a=r.params.TaxCode)&&void 0!==a?a:null,CompanyName:null!==(l=r.params.CompanyName)&&void 0!==l?l:null,Address:null!==(c=r.params.Address)&&void 0!==c?c:null,IsDefault:null!==(g=r.params.IsDefault)&&void 0!==g?g:null},success:f=>{"function"==typeof r.callback&&r.callback(f.data||null)},error:f=>{var E;"function"==typeof r.callback&&r.callback(null==f||null===(E=f.response)||void 0===E?void 0:E.data),console.error(f)},loading:null==r?void 0:r.loading})});return function(o){return i.apply(this,arguments)}}();var m=p(3524),h=p(4842);let _=(()=>{var i;class r{constructor(t,e,a){this.modalController=t,this.loadingController=e,this.toastController=a,this.customerInvoice={IsCompany:!0},this.loadingController.create({message:""}).then(l=>this.loading=l)}ngOnInit(){this.refreshData()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}refreshData(t){this.CustomerInvoiceId?C({loading:e=>{var a,l;e?null===(a=this.loading)||void 0===a||a.present():null===(l=this.loading)||void 0===l||l.dismiss()},params:{CustomerInvoiceId:this.CustomerInvoiceId},callback:e=>{var a;this.response=e,null!=e&&e.Succeeded?this.customerInvoice=null!==(a=e.Data)&&void 0!==a?a:{}:(0,m.cX)(this.toastController,{},e).then(l=>l.present()),t&&t()}}):t&&t()}close(t){var e=this;return(0,v.A)(function*(){e.modalController.dismiss(null,"cancel")})()}submit(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.CustomerInvoiceId?s({loading:a=>{var l,c;a?null===(l=e.loading)||void 0===l||l.present():null===(c=e.loading)||void 0===c||c.dismiss()},params:e.customerInvoice,callback:a=>{e.response=a,null!=a&&a.Succeeded?e.modalController.dismiss(null,"success"):(0,m.cX)(e.toastController,{},a).then(l=>l.present())}}):O({loading:a=>{var l,c;a?null===(l=e.loading)||void 0===l||l.present():null===(c=e.loading)||void 0===c||c.dismiss()},params:e.customerInvoice,callback:a=>{e.response=a,null!=a&&a.Succeeded?e.modalController.dismiss(null,"success"):(0,m.cX)(e.toastController,{},a).then(l=>l.present())}})})()}changeBuyerName(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.BuyerName=t.detail.value})()}changeBuyerPhone(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.BuyerPhone=t.detail.value})()}changeBuyerEmail(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.BuyerEmail=t.detail.value})()}changeCompanyName(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.CompanyName=t.detail.value})()}changeAddress(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.Address=t.detail.value})()}changeTaxCode(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.TaxCode=t.detail.value})()}changeIsDefault(t){var e=this;return(0,v.A)(function*(){e.customerInvoice.IsDefault=t.detail.checked})()}}return(i=r).\u0275fac=function(t){return new(t||i)(n.rXU(d.W3),n.rXU(d.Xi),n.rXU(d.K_))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-modal-add-customer-invoice"]],inputs:{CustomerInvoiceId:"CustomerInvoiceId"},decls:70,vars:10,consts:[["slot","end"],["color","dark",3,"click"],["name","close-outline"],["slot","fixed",3,"ionRefresh"],[1,"container","text-center","mb-3"],[1,"text-muted"],[1,"container","mb-3"],["lines","none"],[1,"form-group"],[1,"text-danger"],[1,"ion-item-input"],["placeholder","H\u1ecd v\xe0 t\xean",3,"value","ionChange"],["placeholder","T\xean c\xf4ng ty",3,"value","ionChange"],["placeholder","\u0110\u1ecba ch\u1ec9",3,"value","ionChange"],["placeholder","M\xe3 s\u1ed1 thu\u1ebf",3,"value","ionChange"],["placeholder","Email nh\u1eadn h\xf3a \u0111\u01a1n",3,"value","ionChange"],["placeholder","S\u0110T li\xean h\u1ec7",3,"value","ionChange"],["labelPlacement","end","justify","start",3,"checked","ionChange"],[1,"mt-4","pt-3"],["color","primary","shape","round","expand","block",3,"click"]],template:function(t,e){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),n.bIt("click",function(l){return e.close(l)}),n.nrm(4,"ion-icon",2),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Th\xf4ng tin xu\u1ea5t h\xf3a \u0111\u01a1n"),n.k0s()()(),n.j41(7,"ion-content")(8,"ion-refresher",3),n.bIt("ionRefresh",function(l){return e.onIonRefresher(l)}),n.nrm(9,"ion-refresher-content"),n.k0s(),n.j41(10,"div",4)(11,"small",5),n.EFF(12,"Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 t\u1ea5t c\u1ea3 th\xf4ng tin, b\u1ea1n s\u1ebd t\u1ef1 ch\u1ecbu tr\xe1ch nhi\u1ec7m v\u1ec1 th\xf4ng tin h\xf3a \u0111\u01a1n."),n.k0s()(),n.j41(13,"div",6)(14,"ion-list",7)(15,"div",8)(16,"label"),n.EFF(17,"H\u1ecd v\xe0 t\xean "),n.j41(18,"span",9),n.EFF(19,"*"),n.k0s()(),n.j41(20,"div",10)(21,"ion-item")(22,"ion-input",11),n.bIt("ionChange",function(l){return e.changeBuyerName(l)}),n.k0s()()()(),n.j41(23,"div",8)(24,"label"),n.EFF(25,"T\xean c\xf4ng ty "),n.j41(26,"span",9),n.EFF(27,"*"),n.k0s()(),n.j41(28,"div",10)(29,"ion-item")(30,"ion-input",12),n.bIt("ionChange",function(l){return e.changeCompanyName(l)}),n.k0s()()()(),n.j41(31,"div",8)(32,"label"),n.EFF(33,"\u0110\u1ecba ch\u1ec9 "),n.j41(34,"span",9),n.EFF(35,"*"),n.k0s()(),n.j41(36,"div",10)(37,"ion-item")(38,"ion-input",13),n.bIt("ionChange",function(l){return e.changeAddress(l)}),n.k0s()()()(),n.j41(39,"div",8)(40,"label"),n.EFF(41,"M\xe3 s\u1ed1 thu\u1ebf "),n.j41(42,"span",9),n.EFF(43,"*"),n.k0s()(),n.j41(44,"div",10)(45,"ion-item")(46,"ion-input",14),n.bIt("ionChange",function(l){return e.changeTaxCode(l)}),n.k0s()()()(),n.j41(47,"div",8)(48,"label"),n.EFF(49,"Email nh\u1eadn h\xf3a \u0111\u01a1n"),n.k0s(),n.j41(50,"div",10)(51,"ion-item")(52,"ion-input",15),n.bIt("ionChange",function(l){return e.changeBuyerEmail(l)}),n.k0s()()()(),n.j41(53,"div",8)(54,"label"),n.EFF(55,"S\u0110T li\xean h\u1ec7"),n.k0s(),n.j41(56,"div",10)(57,"ion-item")(58,"ion-input",16),n.bIt("ionChange",function(l){return e.changeBuyerPhone(l)}),n.k0s()()()(),n.j41(59,"div",8)(60,"label"),n.EFF(61,"\u0110\u1eb7t l\xe0m m\u1eb7c \u0111\u1ecbnh"),n.k0s(),n.j41(62,"div",10)(63,"ion-item")(64,"ion-checkbox",17),n.bIt("ionChange",function(l){return e.changeIsDefault(l)}),n.EFF(65,"Ch\u1ecdn l\xe0m m\u1eb7c \u0111\u1ecbnh"),n.k0s()()()(),n.j41(66,"div",18)(67,"ion-button",19),n.bIt("click",function(l){return e.submit(l)}),n.EFF(68),n.nI1(69,"translate"),n.k0s()()()()()),2&t&&(n.R7$(22),n.Y8G("value",e.customerInvoice.BuyerName),n.R7$(8),n.Y8G("value",e.customerInvoice.CompanyName),n.R7$(8),n.Y8G("value",e.customerInvoice.Address),n.R7$(8),n.Y8G("value",e.customerInvoice.TaxCode),n.R7$(6),n.Y8G("value",e.customerInvoice.BuyerEmail),n.R7$(6),n.Y8G("value",e.customerInvoice.BuyerPhone),n.R7$(6),n.Y8G("checked",!!e.customerInvoice.IsDefault),n.R7$(4),n.JRh(n.bMT(69,8,"Save")))},dependencies:[d.Jm,d.QW,d.eY,d.W9,d.eU,d.iq,d.$w,d.uz,d.nf,d.To,d.Ki,d.BC,d.ai,d.hB,d.Gw,h.D9]}),r})();var b=p(1261);function x(i,r){1&i&&(n.j41(0,"div",17),n.nrm(1,"ion-spinner",18),n.k0s())}function G(i,r){1&i&&(n.j41(0,"div",19),n.nrm(1,"ion-img",20),n.j41(2,"div",21),n.EFF(3),n.nI1(4,"translate"),n.k0s()()),2&i&&(n.R7$(3),n.JRh(n.bMT(4,1,"DataNotFound")))}const N=i=>({$implicit:i});function B(i,r){if(1&i&&(n.qex(0),n.j41(1,"div",22),n.eu8(2,23),n.k0s(),n.bVm()),2&i){const o=r.$implicit;n.XpG();const t=n.sdS(29);n.R7$(2),n.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",n.eq3(2,N,o))}}function V(i,r){if(1&i){const o=n.RV6();n.j41(0,"ion-infinite-scroll",24),n.bIt("ionInfinite",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.onIonInfinite(e))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function J(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",25)(1,"div",26)(2,"ion-radio",27)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"ion-icon",28),n.bIt("click",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.editCustomerInvoice(e))}),n.k0s()(),n.nrm(7,"hr"),n.j41(8,"table",29)(9,"tr")(10,"td"),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.j41(13,"td")(14,"b"),n.EFF(15),n.k0s()()(),n.j41(16,"tr")(17,"td"),n.EFF(18),n.nI1(19,"translate"),n.k0s(),n.j41(20,"td")(21,"b"),n.EFF(22),n.k0s()()(),n.j41(23,"tr")(24,"td"),n.EFF(25),n.nI1(26,"translate"),n.k0s(),n.j41(27,"td")(28,"b"),n.EFF(29),n.k0s()()(),n.j41(30,"tr")(31,"td"),n.EFF(32),n.nI1(33,"translate"),n.k0s(),n.j41(34,"td")(35,"b"),n.EFF(36),n.k0s()()(),n.j41(37,"tr")(38,"td"),n.EFF(39),n.nI1(40,"translate"),n.k0s(),n.j41(41,"td")(42,"b"),n.EFF(43),n.k0s()()(),n.j41(44,"tr")(45,"td"),n.EFF(46),n.nI1(47,"translate"),n.k0s(),n.j41(48,"td")(49,"b"),n.EFF(50),n.k0s()()()()()}if(2&i){const o=r.$implicit;n.R7$(2),n.Y8G("value",o.CustomerInvoiceId),n.R7$(2),n.JRh(n.bMT(5,14,"ExportBillInfo")),n.R7$(7),n.JRh(n.bMT(12,16,"FullName")),n.R7$(4),n.JRh(o.BuyerName),n.R7$(3),n.JRh(n.bMT(19,18,"BillCompanyName")),n.R7$(4),n.JRh(o.CompanyName),n.R7$(3),n.JRh(n.bMT(26,20,"BillCompanyAddress")),n.R7$(4),n.JRh(o.Address),n.R7$(3),n.JRh(n.bMT(33,22,"BillCompanyTax")),n.R7$(4),n.JRh(o.TaxCode),n.R7$(3),n.JRh(n.bMT(40,24,"Email")),n.R7$(4),n.JRh(o.BuyerEmail),n.R7$(3),n.JRh(n.bMT(47,26,"Mobile")),n.R7$(4),n.JRh(o.BuyerPhone)}}let U=(()=>{var i;class r{constructor(t,e,a){this.modalController=t,this.toastController=e,this.loadingController=a,this.APP_ROUTE=R._,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.customerInvoices=[],this.loadingController.create({message:""}).then(l=>this.loading=l)}close(t){this.modalController.dismiss(null,"close")}submit(t){this.modalController.dismiss(this.CustomerInvoiceId,"submit")}ngOnInit(){this.refreshData()}onIonRefresher(t){this.filter={},this.refreshData(()=>{t.target.complete()})}onIonInfinite(t){this.loadMore(()=>{t.target.complete()})}resetData(){this.customerInvoices.length=0}pushData(t){1==this.paging.page&&(this.customerInvoices.length=0),this.customerInvoices=this.customerInvoices.concat(t)}totalData(){return this.customerInvoices.length}refreshData(t){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging(t)}loadMore(t){this.paging.page+=1,this.loadData_Paging(t)}searchChange(t){this.filter={},this.filter.search=t.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}sortChange(t,e){this.paging.sortfield=t||null,this.paging.sorttype=e||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}loadData_Paging(t){var e=this;return(0,v.A)(function*(){e.paging.loading=!0,T({loading:a=>{var l,c;a?null===(l=e.loading)||void 0===l||l.present():null===(c=e.loading)||void 0===c||c.dismiss()},params:{PageNumber:e.paging.page,PageSize:e.paging.limit},callback:a=>{var l;e.response=a,null!=a&&a.Succeeded?e.pushData(null!==(l=a.Data)&&void 0!==l?l:[]):(0,m.cX)(e.toastController,{},a).then(c=>c.present()),e.paging.loading=!1,e.paging.active=!(null==a||!a.HasNextPage),t&&t()}})})()}editCustomerInvoice(t,e){this.presentModalAddCustomerInvoice(t,e)}changeCustomerInvoice(t){this.CustomerInvoiceId=t.detail.value}presentModalAddCustomerInvoice(t,e){var a=this;return(0,v.A)(function*(){const l=yield a.modalController.create({component:_,componentProps:{CustomerInvoiceId:e},cssClass:"ion-modal-breakpoint",backdropDismiss:!0,keyboardClose:!0,breakpoints:[.75,1],initialBreakpoint:.75});l.onDidDismiss().then(c=>{"success"==c.role&&a.refreshData()}),l.present()})()}presentModalAddCustomerInvoiceSuccess(t){var e=this;return(0,v.A)(function*(){(yield e.modalController.create({component:D,cssClass:"ion-modal-small",backdropDismiss:!0,keyboardClose:!0})).present()})()}}return(i=r).\u0275fac=function(t){return new(t||i)(n.rXU(d.W3),n.rXU(d.K_),n.rXU(d.Xi))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-modal-customer-invoice"]],inputs:{CustomerInvoiceId:"CustomerInvoiceId"},decls:30,vars:11,consts:[["slot","start"],[3,"click"],["src","../../../../assets/icon/ion-icon/arrow-left.svg"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","container container-loading py-5 text-center",4,"ngIf"],["mode","md",3,"value","ionChange"],[1,"container","pb-4"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12"],["color","primary","expand","block","shape","round","fill","outline",3,"click"],["slot","start","src","../../../../assets/icon/ion-icon/plus-circle.svg"],[3,"ionInfinite",4,"ngIf"],[1,"p-3"],["color","primary","expand","block","shape","round",3,"click"],["templateCustomerInvoice",""],[1,"container-loading"],["name","circular","color","primary"],[1,"container","container-loading","py-5","text-center"],["src","../../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[1,"col-12","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-bill","rounded","bg-white"],[1,"d-flex","justify-content-between"],["label-placement","end",3,"value"],["src","../../../../assets/icon/ion-icon/edit.svg",1,"fs-4",3,"click"],[1,"table","table-borderless","m-0"]],template:function(t,e){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),n.bIt("click",function(l){return e.close(l)}),n.nrm(4,"ion-icon",2),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Th\xf4ng tin xu\u1ea5t h\xf3a \u0111\u01a1n \u0111\xe3 l\u01b0u"),n.k0s()()(),n.j41(7,"ion-content")(8,"ion-refresher",3),n.bIt("ionRefresh",function(l){return e.onIonRefresher(l)}),n.nrm(9,"ion-refresher-content"),n.k0s(),n.DNE(10,x,2,0,"div",4)(11,G,5,3,"div",5),n.j41(12,"ion-radio-group",6),n.bIt("ionChange",function(l){return e.changeCustomerInvoice(l)}),n.j41(13,"div",7)(14,"div",8),n.DNE(15,B,3,4,"ng-container",9),n.j41(16,"div",10)(17,"ion-button",11),n.bIt("click",function(l){return e.presentModalAddCustomerInvoice(l)}),n.nrm(18,"ion-icon",12),n.j41(19,"ion-label"),n.EFF(20),n.nI1(21,"translate"),n.k0s()()()()()(),n.DNE(22,V,2,0,"ion-infinite-scroll",13),n.k0s(),n.j41(23,"ion-footer")(24,"div",14)(25,"ion-button",15),n.bIt("click",function(l){return e.submit(l)}),n.EFF(26),n.nI1(27,"translate"),n.k0s()()(),n.DNE(28,J,51,28,"ng-template",null,16,n.C5r)),2&t&&(n.R7$(10),n.Y8G("ngIf",!e.response),n.R7$(1),n.Y8G("ngIf",e.response&&!e.customerInvoices.length),n.R7$(1),n.Y8G("value",e.CustomerInvoiceId),n.R7$(3),n.Y8G("ngForOf",e.customerInvoices),n.R7$(5),n.JRh(n.bMT(21,7,"Create")),n.R7$(2),n.Y8G("ngIf",e.paging.active),n.R7$(4),n.JRh(n.bMT(27,9,"Choice")))},dependencies:[I.Sq,I.bT,I.T3,d.Jm,d.QW,d.W9,d.M0,d.eU,d.iq,d.KW,d.Ax,d.Hp,d.he,d.KO,d.f0,d.To,d.Ki,d.w2,d.BC,d.ai,d.uR,d.Je,h.D9],styles:[".table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0;padding-right:.5rem;color:var(ion-color-medium)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;white-space:nowrap;text-align:right}.card-bill[_ngcontent-%COMP%]{padding:1rem}.card-bill.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}"]}),r})();var S=p(6944),X=p(3232),Y=p(9061),w=p(6539),K=p(2313),M=p(1312),P=p(3588),L=p(7586),z=p.n(L);function W(i,r){1&i&&(n.j41(0,"div",7),n.nrm(1,"ion-spinner",8),n.k0s())}function H(i,r){1&i&&(n.qex(0),n.j41(1,"div",10),n.nrm(2,"ion-spinner",11),n.k0s(),n.bVm())}function Q(i,r){if(1&i&&(n.qex(0),n.j41(1,"tr")(2,"td"),n.EFF(3,"G\xf3i s\u1ea1c"),n.k0s(),n.j41(4,"td")(5,"div"),n.EFF(6),n.k0s(),n.j41(7,"div")(8,"b",19),n.EFF(9),n.k0s(),n.j41(10,"small"),n.EFF(11),n.k0s()()()(),n.j41(12,"tr")(13,"td"),n.EFF(14,"Ph\xed \u0111\u1ed7 xe"),n.k0s(),n.j41(15,"td"),n.EFF(16),n.k0s()(),n.bVm()),2&i){const o=n.XpG(3);let t,e;n.R7$(6),n.JRh(o.orderDetail.ProductName),n.R7$(3),n.SpI("",o.APP_FUNC_FormatMoney(null!==(t=o.orderDetail.AftertaxPrice)&&void 0!==t?t:0),"\u0111"),n.R7$(2),n.Lme(" / ",o.orderDetail.PowerValue," ",null!==(e=o.orderDetail.Unit)&&void 0!==e?e:"kWh",""),n.R7$(5),n.SpI("",o.APP_FUNC_FormatMoney(0),"\u0111")}}function Z(i,r){if(1&i&&(n.qex(0),n.j41(1,"div",20)(2,"div",21)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",13)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&i){const o=n.XpG(3);n.R7$(4),n.JRh(n.bMT(5,3,"Exchange")),n.R7$(5),n.JRh(n.bMT(10,5,"ExchangeValue")),n.R7$(4),n.SpI("",o.APP_FUNC_FormatMoney(o.orderInfo.ExchangeValue),"\u0111")}}function q(i,r){1&i&&(n.j41(0,"b",19),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&i&&(n.R7$(1),n.JRh(n.bMT(2,1,"RefundYes")))}function nn(i,r){if(1&i&&(n.qex(0),n.j41(1,"div",22)(2,"div",21)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.DNE(6,q,3,3,"b",23),n.k0s(),n.j41(7,"table",13)(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td")(13,"b"),n.EFF(14),n.k0s()()()()(),n.bVm()),2&i){const o=n.XpG(3);n.R7$(4),n.JRh(n.bMT(5,4,"Refund")),n.R7$(2),n.Y8G("ngIf",o.orderInfo.IsRefund),n.R7$(4),n.JRh(n.bMT(11,6,"RefundValue")),n.R7$(4),n.SpI("",o.APP_FUNC_FormatMoney(o.orderInfo.RefundValue),"\u0111")}}function en(i,r){if(1&i&&(n.qex(0),n.j41(1,"div",12)(2,"table",13)(3,"tr")(4,"td"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"td")(8,"b"),n.EFF(9),n.k0s()()(),n.j41(10,"tr")(11,"td"),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"td")(15,"b"),n.EFF(16),n.k0s()()(),n.j41(17,"tr")(18,"td"),n.EFF(19),n.nI1(20,"translate"),n.k0s(),n.j41(21,"td")(22,"b"),n.EFF(23),n.k0s()()(),n.j41(24,"tr")(25,"td"),n.EFF(26),n.nI1(27,"translate"),n.k0s(),n.j41(28,"td"),n.EFF(29),n.k0s()(),n.j41(30,"tr")(31,"td"),n.EFF(32),n.nI1(33,"translate"),n.k0s(),n.j41(34,"td"),n.EFF(35),n.k0s()()()(),n.nrm(36,"hr",14),n.j41(37,"div",15)(38,"div",16)(39,"b"),n.EFF(40),n.nI1(41,"translate"),n.k0s()(),n.j41(42,"table",13),n.DNE(43,Q,17,5,"ng-container",4),n.j41(44,"tr")(45,"td"),n.EFF(46,"Gi\u1ea3m gi\xe1"),n.k0s(),n.j41(47,"td"),n.EFF(48),n.k0s()(),n.j41(49,"tr",17)(50,"td"),n.EFF(51,"Th\xe0nh vi\xean VIP"),n.k0s(),n.j41(52,"td"),n.EFF(53),n.k0s()(),n.j41(54,"tr",17)(55,"td"),n.EFF(56,"VAT"),n.k0s(),n.j41(57,"td"),n.EFF(58),n.k0s()(),n.j41(59,"tr",17)(60,"td")(61,"b"),n.EFF(62,"T\u1ed5ng c\u1ed9ng"),n.k0s(),n.nrm(63,"br"),n.j41(64,"small",18),n.EFF(65,"\u0110\xe3 bao g\u1ed3m VAT"),n.k0s()(),n.j41(66,"td",19)(67,"strong"),n.EFF(68),n.k0s()()()()(),n.DNE(69,Z,14,7,"ng-container",4)(70,nn,15,8,"ng-container",4),n.bVm()),2&i){const o=n.XpG(2);let t,e,a;n.R7$(5),n.JRh(n.bMT(6,21,"OrderCode")),n.R7$(4),n.JRh(o.orderInfo.OrderCode),n.R7$(3),n.JRh(n.bMT(13,23,"TotalAmount")),n.R7$(4),n.SpI("",o.APP_FUNC_FormatMoney(o.orderInfo.RealValue),"\u0111"),n.R7$(3),n.JRh(n.bMT(20,25,"OrderStatus")),n.R7$(3),n.ZvI("text-",o.APP_FUNC_GetColor_VOrderStatus(o.orderInfo.VOrderStatus),""),n.R7$(1),n.JRh(o.orderInfo.VOrderStatusName),n.R7$(3),n.JRh(n.bMT(27,27,"PaymentMethod")),n.R7$(3),n.JRh(o.orderInfo.KindOfCard),n.R7$(3),n.JRh(n.bMT(33,29,"OrderDate")),n.R7$(3),n.JRh(o.APP_FUNC_FormatDate(o.orderInfo.OrderDate)),n.R7$(5),n.JRh(n.bMT(41,31,"OrderDetail")),n.R7$(3),n.Y8G("ngIf",o.orderDetail),n.R7$(5),n.SpI("-",o.APP_FUNC_FormatMoney(null!==(t=o.orderInfo.PromoteValue)&&void 0!==t?t:0),"\u0111"),n.R7$(5),n.SpI("-",o.APP_FUNC_FormatMoney(0),"%"),n.R7$(5),n.SpI("+",null!==(e=o.orderInfo.TaxPercent)&&void 0!==e?e:0,"%"),n.R7$(10),n.SpI("",o.APP_FUNC_FormatMoney(null!==(a=o.orderInfo.RealValue)&&void 0!==a?a:0),"\u0111"),n.R7$(1),n.Y8G("ngIf",(null==o.orderInfo?null:o.orderInfo.VOrderStatus)==o.v_order_status.DaHoanTien||(null==o.orderInfo?null:o.orderInfo.VOrderStatus)==o.v_order_status.DaSuDung&&o.orderInfo.ExchangeValue),n.R7$(1),n.Y8G("ngIf",(null==o.orderInfo?null:o.orderInfo.VOrderStatus)==o.v_order_status.DaHoanTien||(null==o.orderInfo?null:o.orderInfo.VOrderStatus)==o.v_order_status.DaSuDung&&o.orderInfo.RefundValue)}}function tn(i,r){if(1&i&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&i){const o=n.XpG(5);n.R7$(2),n.JRh(n.bMT(3,2,"Email")),n.R7$(4),n.JRh(o.customerInvoice.BuyerEmail)}}function on(i,r){if(1&i&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&i){const o=n.XpG(5);n.R7$(2),n.JRh(n.bMT(3,2,"Mobile")),n.R7$(4),n.JRh(o.customerInvoice.BuyerPhone)}}function an(i,r){if(1&i&&(n.j41(0,"table",13)(1,"tr")(2,"td"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"td")(6,"b"),n.EFF(7),n.k0s()()(),n.j41(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td")(13,"b"),n.EFF(14),n.k0s()()(),n.j41(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.j41(22,"tr")(23,"td"),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"td")(27,"b"),n.EFF(28),n.k0s()()(),n.DNE(29,tn,7,4,"tr",4)(30,on,7,4,"tr",4),n.k0s()),2&i){const o=n.XpG(4);n.R7$(3),n.JRh(n.bMT(4,10,"FullName")),n.R7$(4),n.JRh(o.customerInvoice.BuyerName),n.R7$(3),n.JRh(n.bMT(11,12,"BillCompanyName")),n.R7$(4),n.JRh(o.customerInvoice.CompanyName),n.R7$(3),n.JRh(n.bMT(18,14,"BillCompanyAddress")),n.R7$(4),n.JRh(o.customerInvoice.Address),n.R7$(3),n.JRh(n.bMT(25,16,"BillCompanyTax")),n.R7$(4),n.JRh(o.customerInvoice.TaxCode),n.R7$(1),n.Y8G("ngIf",o.customerInvoice.BuyerEmail),n.R7$(1),n.Y8G("ngIf",o.customerInvoice.BuyerPhone)}}function rn(i,r){if(1&i){const o=n.RV6();n.j41(0,"div",28)(1,"div",29)(2,"b"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",30),n.bIt("click",function(e){n.eBV(o);const a=n.XpG(3);return n.Njj(a.presentModalCustomerInvoice(e))}),n.nrm(6,"ion-icon",31),n.k0s()(),n.nrm(7,"hr"),n.DNE(8,an,31,18,"table",32),n.k0s()}if(2&i){const o=n.XpG(3);n.R7$(3),n.JRh(n.bMT(4,2,"ExportBillInfo")),n.R7$(5),n.Y8G("ngIf",o.customerInvoice)}}function ln(i,r){if(1&i){const o=n.RV6();n.qex(0),n.j41(1,"div",24)(2,"ion-radio-group",25),n.bIt("ionChange",function(e){n.eBV(o);const a=n.XpG(2);return n.Njj(a.changeIsGetBill(e))}),n.j41(3,"ion-radio",26),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"ion-radio",26),n.EFF(7),n.nI1(8,"translate"),n.k0s()()(),n.DNE(9,rn,9,4,"div",27),n.bVm()}if(2&i){const o=n.XpG(2);n.R7$(2),n.Y8G("value",0),n.R7$(1),n.Y8G("value",0),n.R7$(1),n.JRh(n.bMT(5,6,"NoGetBill")),n.R7$(2),n.Y8G("value",1),n.R7$(1),n.JRh(n.bMT(8,8,"YesGetBill")),n.R7$(2),n.Y8G("ngIf",o.IsGetBill)}}const sn=(i,r)=>[i,r];function dn(i,r){if(1&i&&(n.qex(0),n.j41(1,"div",9),n.DNE(2,H,3,0,"ng-container",4)(3,en,71,33,"ng-container",4)(4,ln,10,10,"ng-container",4),n.k0s(),n.bVm()),2&i){const o=n.XpG();let t;n.R7$(2),n.Y8G("ngIf",(null==o.orderInfo?null:o.orderInfo.VOrderStatus)==o.v_order_status.DangThanhToan),n.R7$(1),n.Y8G("ngIf",o.orderInfo),n.R7$(1),n.Y8G("ngIf",n.l_i(3,sn,o.v_order_status.DaSuDung,o.v_order_status.DaHoanTien).includes(null!==(t=null==o.orderInfo?null:o.orderInfo.VOrderStatus)&&void 0!==t?t:0))}}function cn(i,r){if(1&i&&(n.qex(0),n.j41(1,"ion-footer")(2,"div",33)(3,"ion-button",34)(4,"ion-label"),n.EFF(5,"\u0110\u1ebfn phi\xean s\u1ea1c"),n.k0s()()()(),n.bVm()),2&i){const o=n.XpG(2);let t;n.R7$(3),n.Y8G("href",o.APP_ROUTE.CHARGING_SESSION_DETAIL.replace(":id",null!==(t=null==o.chargingSession.ChargeSessionId?null:o.chargingSession.ChargeSessionId.toString())&&void 0!==t?t:""))}}function un(i,r){if(1&i&&(n.j41(0,"div",41)(1,"div")(2,"small"),n.EFF(3),n.k0s()(),n.j41(4,"div")(5,"b"),n.EFF(6),n.k0s()(),n.j41(7,"small"),n.EFF(8,"Vui l\xf2ng b\u1eaft \u0111\u1ea7u phi\xean s\u1ea1c!"),n.k0s()()),2&i){const o=n.XpG(3);n.R7$(3),n.SpI("\u0110\u01a1n h\xe0ng s\u1ebd h\u1ebft h\u1ea1n sau ",o.APP_FUNC_RoundNumber(o.timeout/6e4,1)," ph\xfat!"),n.R7$(3),n.JRh(o.getTimeCountdown())}}function mn(i,r){1&i&&(n.j41(0,"small"),n.EFF(1,"\u0110\u01a1n h\xe0ng \u0111\xe3 h\u1ebft h\u1ea1n"),n.k0s())}function gn(i,r){if(1&i){const o=n.RV6();n.j41(0,"ion-button",42),n.bIt("click",function(e){n.eBV(o);const a=n.XpG(3);return n.Njj(a.chargingStart(e))}),n.j41(1,"ion-label"),n.EFF(2,"B\u1eaft \u0111\u1ea7u phi\xean s\u1ea1c"),n.k0s()()}}function pn(i,r){if(1&i){const o=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",33),n.DNE(3,un,9,2,"div",35),n.j41(4,"div",36)(5,"div",37),n.DNE(6,mn,2,0,"small",4)(7,gn,3,0,"ion-button",38),n.k0s(),n.j41(8,"div",39)(9,"ion-button",40),n.bIt("click",function(e){n.eBV(o);const a=n.XpG(2);return n.Njj(a.sendFeedback(e))}),n.j41(10,"ion-label"),n.EFF(11,"Ph\u1ea3n h\u1ed3i"),n.k0s()()()()()(),n.bVm()}if(2&i){const o=n.XpG(2);n.R7$(3),n.Y8G("ngIf",o.timeCountdown>0),n.R7$(3),n.Y8G("ngIf",o.timeCountdown<=0),n.R7$(1),n.Y8G("ngIf",o.timeCountdown>0)}}function _n(i,r){if(1&i&&(n.qex(0),n.DNE(1,cn,6,1,"ng-container",4)(2,pn,12,3,"ng-container",4),n.bVm()),2&i){const o=n.XpG();n.R7$(1),n.Y8G("ngIf",o.chargingSession),n.R7$(1),n.Y8G("ngIf",!o.chargingSession)}}function vn(i,r){if(1&i&&(n.qex(0),n.j41(1,"ion-footer")(2,"div",33)(3,"ion-button",34)(4,"ion-label"),n.EFF(5,"\u0110\u1ebfn phi\xean s\u1ea1c"),n.k0s()()()(),n.bVm()),2&i){const o=n.XpG(2);let t;n.R7$(3),n.Y8G("href",o.APP_ROUTE.CHARGING_SESSION_DETAIL.replace(":id",null!==(t=null==o.chargingSession.ChargeSessionId?null:o.chargingSession.ChargeSessionId.toString())&&void 0!==t?t:""))}}function hn(i,r){if(1&i&&(n.qex(0),n.DNE(1,vn,6,1,"ng-container",4),n.bVm()),2&i){const o=n.XpG();n.R7$(1),n.Y8G("ngIf",o.chargingSession)}}function fn(i,r){if(1&i){const o=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",33)(3,"ion-button",43),n.bIt("click",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.sendFeedback(e))}),n.j41(4,"ion-label"),n.EFF(5,"G\u1eedi ph\u1ea3n h\u1ed3i"),n.k0s()()()(),n.bVm()}}const Cn=[{path:"",component:(()=>{var i;class r{constructor(t,e,a,l){var c;this.loadingController=e,this.toastController=a,this.modalController=l,this.APP_ROUTE=R._,this.APP_FUNC_FormatMoney=M.xi,this.APP_FUNC_FormatDate=M.Rv,this.APP_FUNC_GetColor_VOrderStatus=M.qM,this.APP_FUNC_RoundNumber=M.Rw,this.v_order_status=P.TL,this.customerInvoices=[],this.intervalCounter=0,this.timeout=6e5,this.timeCountdown=0,this.intervalCountdown=null,this.loadingController.create({message:""}).then(f=>this.loading=f);let g=null!==(c=t.snapshot.params.id)&&void 0!==c?c:"";g&&(this.OrderId=parseInt(g))}ngOnInit(){var t=this;(0,v.A)(function*(){(yield(0,w.kU)())&&(t.refreshData(),t.refreshInterval())})()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}refreshInterval(){clearInterval(this.intervalReload),this.intervalReload=setInterval(()=>{var t;this.orderInfo&&(null===(t=this.orderInfo)||void 0===t?void 0:t.VOrderStatus)==P.TL.DangThanhToan&&this.refreshData(()=>{this.intervalCounter++,this.intervalCounter>=10&&clearInterval(this.intervalReload)})},4e3)}refreshData(t){this.OrderId&&((0,Y.vp)({loading:e=>{var a,l;e?null===(a=this.loading)||void 0===a||a.present():null===(l=this.loading)||void 0===l||l.dismiss()},params:{OrderId:this.OrderId},callback:e=>{var a,l,c;this.response=e,null!=e&&e.Succeeded?(this.orderInfo=e.Data,[P.TL.DaThanhToan,P.TL.DangTrongPhienSac].includes(null!==(a=null===(l=this.orderInfo)||void 0===l?void 0:l.VOrderStatus)&&void 0!==a?a:0)&&(0,S.KX)({params:{OrderCode:null===(c=this.orderInfo)||void 0===c?void 0:c.OrderCode},callback:g=>{var f;if(null!=g&&g.Succeeded){if(this.chargingSession=(null!==(f=g.Data)&&void 0!==f?f:[]).find(E=>{var A;return[P.jT.DangSac].includes(null!==(A=E.VSessionStatus)&&void 0!==A?A:0)}),this.chargingSession)return}else(0,m.cX)(this.toastController,{},g).then(E=>E.present());this.setTimeCountdown()}})):(0,m.cX)(this.toastController,{},e).then(g=>g.present()),t&&t()}}),(0,X.K)({params:{OrderId:this.OrderId},callback:e=>{var a;null!=e&&e.Succeeded?this.orderDetail=null===(a=e.Data)||void 0===a?void 0:a.pop():(0,m.cX)(this.toastController,{},e).then(l=>l.present()),t&&t()}}))}chargingStart(t){var e=this;return(0,v.A)(function*(){var a,l,c;(0,S.aN)({loading:g=>{var f,E;g?null===(f=e.loading)||void 0===f||f.present():null===(E=e.loading)||void 0===E||E.dismiss()},params:{StationCode:null===(a=e.orderInfo)||void 0===a?void 0:a.StationCode,ConnectorId:null===(l=e.orderInfo)||void 0===l?void 0:l.ConnectorId,OrderCode:null===(c=e.orderInfo)||void 0===c?void 0:c.OrderCode},callback:g=>{null!=g&&g.Succeeded?window.location.replace(R._.CHARGING_SESSION_DETAIL.replace(":id",g.Data)):(0,m.cX)(e.toastController,{},g).then(f=>f.present())}})})()}sendFeedback(t){var e=this;return(0,v.A)(function*(){var a;(yield e.modalController.create({component:b.l,componentProps:{feedback:{DocType:K.v.ORDER_INFO,DocId:null===(a=e.orderInfo)||void 0===a?void 0:a.OrderId}},cssClass:"ion-modal-breakpoint",breakpoints:[.75,1],initialBreakpoint:.75})).present()})()}changeIsGetBill(t){this.IsGetBill=t.detail.value,this.GetCustomerinvoices()}selectCustomerInvoice(t){this.presentModalCustomerInvoice(t)}editCustomerInvoice(t){var e;this.presentModalAddCustomerInvoice(t,null===(e=this.customerInvoice)||void 0===e?void 0:e.CustomerInvoiceId)}GetCustomerinvoices(){var t=this;return(0,v.A)(function*(){T({loading:e=>{var a,l;e?null===(a=t.loading)||void 0===a||a.present():null===(l=t.loading)||void 0===l||l.dismiss()},params:{PageNumber:1,PageSize:100},callback:e=>{var a;if(null!=e&&e.Succeeded)if(t.customerInvoices=null!==(a=e.Data)&&void 0!==a?a:[],t.customerInvoices.length)if(1==t.customerInvoices.length)t.customerInvoice=t.customerInvoices[0];else{var l;t.customerInvoice=null!==(l=t.customerInvoices.filter(c=>c.IsDefault)[0])&&void 0!==l?l:t.customerInvoices[0]}else t.presentModalAddCustomerInvoice()}})})()}GetCustomerinvoice(t){var e=this;return(0,v.A)(function*(){t&&C({loading:a=>{var l,c;a?null===(l=e.loading)||void 0===l||l.present():null===(c=e.loading)||void 0===c||c.dismiss()},params:{CustomerInvoiceId:t},callback:a=>{null!=a&&a.Succeeded&&(e.customerInvoice=a.Data)}})})()}presentModalCustomerInvoice(t){var e=this;return(0,v.A)(function*(){var a;const l=yield e.modalController.create({component:U,componentProps:{CustomerInvoiceId:null===(a=e.customerInvoice)||void 0===a?void 0:a.CustomerInvoiceId}});l.onDidDismiss().then(c=>{"submit"==c.role&&e.GetCustomerinvoice(c.data)}),l.present()})()}presentModalAddCustomerInvoice(t,e){var a=this;return(0,v.A)(function*(){const l=yield a.modalController.create({component:_,componentProps:{CustomerInvoiceId:e},mode:"ios",cssClass:"ion-modal-breakpoint",backdropDismiss:!0,keyboardClose:!0,breakpoints:[.75,1],initialBreakpoint:.75});l.onDidDismiss().then(c=>{"success"==c.role&&a.GetCustomerinvoices()}),l.present()})()}presentModalAddCustomerInvoiceSuccess(t){var e=this;return(0,v.A)(function*(){(yield e.modalController.create({component:D,cssClass:"ion-modal-small",backdropDismiss:!0,keyboardClose:!0})).present()})()}setTimeCountdown(){var t;if(null!==(t=this.orderInfo)&&void 0!==t&&t.OrderDate){let e=new Date(this.orderInfo.OrderDate).getTime()-(new Date).getTime()+this.timeout;if(e>0){this.timeCountdown=e,clearInterval(this.intervalCountdown);let a=1e3;this.intervalCountdown=setInterval(()=>{if(this.timeCountdown<=a)return this.timeCountdown=0,void clearInterval(this.intervalCountdown);this.timeCountdown-=a},a)}}}getTimeCountdown(){return z()(this.timeCountdown).format("mm:ss")}}return(i=r).\u0275fac=function(t){return new(t||i)(n.rXU(k.nX),n.rXU(d.Xi),n.rXU(d.K_),n.rXU(d.W3))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-order-info-detail"]],decls:16,vars:10,consts:[["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","mb-5"],[1,"text-center","line-height-0","mb-3"],["color","primary","name","crescent"],[1,"card-order","rounded","bg-white"],[1,"table","table-borderless","m-0"],[1,"border-dashed"],[1,"card-order-detail","rounded","bg-white"],[1,"mb-2"],[1,"border-top"],[1,"text-muted","font-condensed"],[1,"text-primary"],[1,"card-order-exchange","rounded","bg-white","mt-3"],[1,"mb-2","d-flex","justify-content-between"],[1,"card-order-refund","rounded","bg-white","mt-3"],["class","text-primary",4,"ngIf"],[1,"mt-5","mb-3","bill-group-radio"],["mode","md",3,"value","ionChange"],["label-placement","end",3,"value"],["class","card-bill rounded bg-white mt-3",4,"ngIf"],[1,"card-bill","rounded","bg-white","mt-3"],[1,"d-flex","align-items-center","justify-content-between"],["size","small","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/chevron-right.svg",1,"fs-4"],["class","table table-borderless m-0",4,"ngIf"],[1,"container","py-3"],["color","primary","expand","block","shape","round",3,"href"],["class","mb-3 text-center",4,"ngIf"],[1,"row","align-items-center"],[1,"col","pr-2"],["color","primary","expand","block","shape","round",3,"click",4,"ngIf"],[1,"col-auto","pl-2"],["mode","md","size","default","color","medium","shape","round","fill","outline","expand","block",3,"click"],[1,"mb-3","text-center"],["color","primary","expand","block","shape","round",3,"click"],["mode","md","size","default","color","warning","shape","round","fill","outline","expand","block",3,"click"]],template:function(t,e){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n.nrm(3,"ion-back-button",1),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()(),n.j41(7,"ion-content")(8,"ion-refresher",2),n.bIt("ionRefresh",function(l){return e.onIonRefresher(l)}),n.nrm(9,"ion-refresher-content"),n.k0s(),n.DNE(10,W,2,0,"div",3)(11,dn,5,6,"ng-container",4),n.k0s(),n.qex(12,5),n.DNE(13,_n,3,2,"ng-container",6)(14,hn,2,1,"ng-container",6)(15,fn,6,0,"ng-container",6),n.bVm()),2&t&&(n.R7$(3),n.Y8G("defaultHref",e.APP_ROUTE.ORDER_INFO),n.R7$(2),n.JRh(n.bMT(6,8,"OrderInfo")),n.R7$(5),n.Y8G("ngIf",!e.response),n.R7$(1),n.Y8G("ngIf",null==e.response?null:e.response.Succeeded),n.R7$(1),n.Y8G("ngSwitch",null==e.orderInfo?null:e.orderInfo.VOrderStatus),n.R7$(1),n.Y8G("ngSwitchCase",e.v_order_status.DaThanhToan),n.R7$(1),n.Y8G("ngSwitchCase",e.v_order_status.DangTrongPhienSac),n.R7$(1),n.Y8G("ngSwitchCase",e.v_order_status.KhongThanhCong))},dependencies:[I.bT,I.ux,I.e1,d.Jm,d.QW,d.W9,d.M0,d.eU,d.iq,d.he,d.KO,d.f0,d.To,d.Ki,d.w2,d.BC,d.ai,d.uR,d.Je,d.el,h.D9],styles:['ion-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0;padding-right:.5rem;color:var(ion-color-medium)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;white-space:nowrap;text-align:right}.card-order[_ngcontent-%COMP%]{padding:1rem}.card-order.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.card-order-detail[_ngcontent-%COMP%]{padding:1rem}.card-order-detail.rounded[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-top-right-radius:0!important;border-bottom-left-radius:1.5rem!important;border-bottom-right-radius:1.5rem!important}.card-order-exchange[_ngcontent-%COMP%], .card-order-refund[_ngcontent-%COMP%]{padding:1rem}.card-order-exchange.rounded[_ngcontent-%COMP%], .card-order-refund.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]{padding:1rem}.card-bill.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.bill-group-radio[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin:0 2rem .5rem 0}hr.border-dashed[_ngcontent-%COMP%]{margin:0;position:relative;z-index:1}hr.border-dashed[_ngcontent-%COMP%]:before, hr.border-dashed[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;z-index:2;bottom:0;margin-bottom:-1rem;width:2rem;height:2rem;border-radius:50%;background-color:var(--ion-background-color-primary)}hr.border-dashed[_ngcontent-%COMP%]:before{left:-1rem}hr.border-dashed[_ngcontent-%COMP%]:after{right:-1rem}']}),r})()}];let In=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.$C({type:i}),i.\u0275inj=n.G2t({imports:[k.iI.forChild(Cn),k.iI]}),r})();var bn=p(9500);let En=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.$C({type:i}),i.\u0275inj=n.G2t({imports:[I.MD,F.YN,d.bv,In,bn.x]}),r})()}}]);