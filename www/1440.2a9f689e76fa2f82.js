"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1440],{1440:(tn,A,c)=>{c.r(A),c.d(A,{AuthPageModule:()=>H});var d=c(177),f=c(9417),s=c(4488),v=c(2175),r=c(467),E=c(7586),C=c.n(E),p=c(7158);const k=function(){var u=(0,r.A)(function*(o){o.params=o.params||{},(0,p.Ll)({authorization:!1,url:"api/Account/register-phonenumber-otpcode?api-version=1.0",params:{PhoneNumber:o.params.PhoneNumber},success:i=>{"function"==typeof o.callback&&o.callback(i.data||null)},error:i=>{var a;"function"==typeof o.callback&&o.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:null==o?void 0:o.loading})});return function(i){return u.apply(this,arguments)}}(),T=function(){var u=(0,r.A)(function*(o){o.params=o.params||{},(0,p.Ll)({authorization:!1,url:"api/Account/verify-phonenumber-otpcode",params:{PhoneNumber:o.params.PhoneNumber,OtpCode:o.params.OtpCode},success:i=>{"function"==typeof o.callback&&o.callback(i.data||null)},error:i=>{var a;"function"==typeof o.callback&&o.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:null==o?void 0:o.loading})});return function(i){return u.apply(this,arguments)}}(),I=function(){var u=(0,r.A)(function*(o){o.params=o.params||{},(0,p.Ll)({authorization:!1,url:"api/Account/reset-password-phonenumber",params:{PhoneNumber:o.params.PhoneNumber,OtpCode:o.params.OtpCode,Password:o.params.Password,ConfirmPassword:o.params.ConfirmPassword},success:i=>{"function"==typeof o.callback&&o.callback(i.data||null)},error:i=>{var a;"function"==typeof o.callback&&o.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:null==o?void 0:o.loading})});return function(i){return u.apply(this,arguments)}}(),N=function(){var u=(0,r.A)(function*(o){o.params=o.params||{},(0,p.Ll)({authorization:!1,url:"api/Account/login-phonenumber-password",params:{PhoneNumber:o.params.PhoneNumber,Password:o.params.Password},success:i=>{"function"==typeof o.callback&&o.callback(i.data||null)},error:i=>{var a;"function"==typeof o.callback&&o.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:null==o?void 0:o.loading})});return function(i){return u.apply(this,arguments)}}(),j=function(){var u=(0,r.A)(function*(o){o.params=o.params||{},(0,p.Ll)({authorization:!1,url:"api/Account/forgot-password-phonenumber",params:{PhoneNumber:o.params.PhoneNumber},success:i=>{"function"==typeof o.callback&&o.callback(i.data||null)},error:i=>{var a;"function"==typeof o.callback&&o.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:null==o?void 0:o.loading})});return function(i){return u.apply(this,arguments)}}();var y=c(23),O=c(6539),R=c(1312),g=c(8650),P=c(8833),n=c(4438),G=c(345),F=c(5788);const S=["ngOtpInput"],x=["ngPinInput"],w=["ngSetPinInput"],M=["ngConfirmPinInput"];function X(u,o){if(1&u&&n.eu8(0,12),2&u){n.XpG();const i=n.sdS(14);n.Y8G("ngTemplateOutlet",i)}}function V(u,o){if(1&u&&n.eu8(0,12),2&u){n.XpG();const i=n.sdS(16);n.Y8G("ngTemplateOutlet",i)}}function D(u,o){if(1&u&&n.eu8(0,12),2&u){n.XpG();const i=n.sdS(18);n.Y8G("ngTemplateOutlet",i)}}function B(u,o){if(1&u&&n.eu8(0,12),2&u){n.XpG();const i=n.sdS(20);n.Y8G("ngTemplateOutlet",i)}}function Y(u,o){if(1&u&&n.eu8(0,12),2&u){n.XpG();const i=n.sdS(22);n.Y8G("ngTemplateOutlet",i)}}function L(u,o){if(1&u){const i=n.RV6();n.j41(0,"div",13)(1,"div",14),n.nrm(2,"ion-img",15),n.k0s(),n.j41(3,"h3",16)(4,"b"),n.EFF(5,"iSAC Xin ch\xe0o!"),n.k0s()(),n.j41(6,"p",17)(7,"small"),n.EFF(8,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 b\u1eaft \u0111\u1ea7u"),n.nrm(9,"br"),n.EFF(10,"tr\u1ea3i nghi\u1ec7m d\u1ecbch v\u1ee5"),n.k0s()(),n.j41(11,"div",18)(12,"ion-item",19),n.nrm(13,"ion-icon",20),n.j41(14,"ion-input",21),n.bIt("change",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.changeMobile(t))})("keyup",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.keyupMobile(t))}),n.k0s()()(),n.j41(15,"div",22)(16,"ion-button",23),n.bIt("click",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.submitMobile(t))}),n.j41(17,"ion-label"),n.EFF(18,"\u0110\u0103ng nh\u1eadp"),n.k0s(),n.nrm(19,"ion-icon",24),n.k0s()()()}if(2&u){const i=n.XpG();n.R7$(14),n.Y8G("ngModel",i.dataForm.mobile)}}function $(u,o){if(1&u&&(n.j41(0,"small",33),n.EFF(1),n.k0s()),2&u){const i=n.XpG(2);n.R7$(1),n.SpI("(",i.getTimeCountdownSendOTP(),")")}}const h=u=>({length:u,allowNumbersOnly:!0});function U(u,o){if(1&u){const i=n.RV6();n.j41(0,"div",25)(1,"div",14),n.nrm(2,"ion-img",26),n.k0s(),n.j41(3,"h3",16)(4,"b"),n.EFF(5,"X\xe1c nh\u1eadn m\xe3 OTP"),n.k0s()(),n.j41(6,"p",17)(7,"small"),n.EFF(8,"Vui l\xf2ng nh\u1eadp m\xe3 OTP v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn"),n.nrm(9,"br"),n.EFF(10,"s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),n.j41(11,"b"),n.EFF(12),n.k0s()()(),n.j41(13,"div",27)(14,"ng-otp-input",28,29),n.bIt("onInputChange",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.onOtpChange(t))}),n.k0s()(),n.j41(16,"div",30)(17,"span"),n.EFF(18,"Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c m\xe3? "),n.k0s(),n.j41(19,"a",31),n.bIt("click",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.resendOTP(t))}),n.EFF(20,"G\u1eedi l\u1ea1i"),n.k0s(),n.DNE(21,$,2,1,"small",32),n.k0s()()}if(2&u){const i=n.XpG();n.R7$(12),n.JRh(i.APP_FUNC_FormatMobileNumber(i.dataForm.mobile)),n.R7$(2),n.Y8G("config",n.eq3(3,h,i.dataForm.otpLen)),n.R7$(7),n.Y8G("ngIf",i.timeoutSendOTP>0)}}function z(u,o){if(1&u){const i=n.RV6();n.j41(0,"div",34)(1,"div",14),n.nrm(2,"ion-img",15),n.k0s(),n.j41(3,"h3",17)(4,"b"),n.EFF(5,"Nh\u1eadp m\xe3 PIN"),n.k0s()(),n.j41(6,"p",35)(7,"small"),n.EFF(8,"Vui l\xf2ng nh\u1eadp m\xe3 PIN b\u1ea1n \u0111\xe3 \u0111\u0103ng k\xfd"),n.nrm(9,"br"),n.EFF(10,"v\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),n.j41(11,"b"),n.EFF(12),n.k0s()()(),n.j41(13,"div",27)(14,"ng-otp-input",28,36),n.bIt("onInputChange",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.onPinChange(t))}),n.k0s()(),n.j41(16,"div",30)(17,"span"),n.EFF(18,"T\xf4i \u0111\xe3 "),n.j41(19,"a",31),n.bIt("click",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.forgotPIN(t))}),n.EFF(20,"qu\xean m\xe3 PIN"),n.k0s(),n.EFF(21,"?"),n.k0s()()()}if(2&u){const i=n.XpG();n.R7$(12),n.JRh(i.APP_FUNC_FormatMobileNumber(i.dataForm.mobile)),n.R7$(2),n.Y8G("config",n.eq3(2,h,i.dataForm.pinLen))}}function J(u,o){if(1&u){const i=n.RV6();n.j41(0,"div",34)(1,"div",14),n.nrm(2,"ion-img",15),n.k0s(),n.j41(3,"h3",16)(4,"b"),n.EFF(5,"Nh\u1eadp m\xe3 PIN"),n.k0s()(),n.j41(6,"p",35)(7,"small"),n.EFF(8,"H\xe3y \u0111\u1eb7t m\xe3 PIN \u0111\u1ec3 b\u1ea3o m\u1eadt t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n!"),n.k0s()(),n.j41(9,"div",27)(10,"ng-otp-input",28,37),n.bIt("onInputChange",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.onSetPinChange(t))}),n.k0s()(),n.j41(12,"div",30)(13,"span"),n.EFF(14,"\xa0"),n.k0s()()()}if(2&u){const i=n.XpG();n.R7$(10),n.Y8G("config",n.eq3(1,h,i.dataForm.pinLen))}}function Q(u,o){if(1&u){const i=n.RV6();n.j41(0,"div",34)(1,"div",14),n.nrm(2,"ion-img",15),n.k0s(),n.j41(3,"h3",16)(4,"b"),n.EFF(5,"Nh\u1eadp m\xe3 PIN"),n.k0s()(),n.j41(6,"p",17)(7,"small"),n.EFF(8,"X\xe1c nh\u1eadn l\u1ea1i m\xe3 PIN"),n.k0s()(),n.j41(9,"div",27)(10,"ng-otp-input",28,38),n.bIt("onInputChange",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.onConfirmPinChange(t))}),n.k0s()(),n.j41(12,"div",30)(13,"a",31),n.bIt("click",function(t){n.eBV(i);const e=n.XpG();return n.Njj(e.backSetPIN(t))}),n.EFF(14,"Quay l\u1ea1i"),n.k0s()()()}if(2&u){const i=n.XpG();n.R7$(10),n.Y8G("config",n.eq3(1,h,i.dataForm.pinLen))}}const W=[{path:"",component:(()=>{var u;class o{constructor(a,t,e,l){var m=this;this.titleService=a,this.loadingController=e,this.toastController=l,this.dataForm={inputType:"mobile",otpLen:6,pinLen:6},this.timeoutSendOTP=0,this.intervalCountdownSendOTP=null,this.APP_FUNC_FormatMobileNumber=R.IV,a.setTitle("T\xe0i kho\u1ea3n"),(0,r.A)(function*(){m.loading=yield m.loadingController.create({message:""})})(),this.params={returnurl:t.snapshot.queryParamMap.get("returnurl")||void 0},(0,r.A)(function*(){(yield(0,O.lJ)())&&(window.location.href=P._.TABS)})()}ngOnInit(){}close(a){return(0,r.A)(function*(){window.location.href=P._.TABS})()}setInputType(a){var t=this;return(0,r.A)(function*(){t.dataForm.inputType=a})()}backSetPIN(a){var t=this;return(0,r.A)(function*(){var e,l;t.dataForm.pin=void 0,t.dataForm.pin2=void 0,null===(e=t.ngSetPinInputRef)||void 0===e||e.setValue(""),null===(l=t.ngConfirmPinInputRef)||void 0===l||l.setValue(""),t.setInputType("set-pin")})()}changeMobile(a){var t=this;return(0,r.A)(function*(){t.dataForm.mobile=a.target.value})()}keyupMobile(a){var t=this;return(0,r.A)(function*(){13==a.keyCode&&t.submitMobile(a)})()}onOtpChange(a){var t=this;return(0,r.A)(function*(){var e;t.dataForm.otp=a,(null===(e=t.dataForm.otp)||void 0===e?void 0:e.length)==t.dataForm.otpLen&&t.checkOTP()})()}onPinChange(a){var t=this;return(0,r.A)(function*(){var e;t.dataForm.pin=a,(null===(e=t.dataForm.pin)||void 0===e?void 0:e.length)==t.dataForm.pinLen&&t.checkPIN()})()}onSetPinChange(a){var t=this;return(0,r.A)(function*(){var e;t.dataForm.pin=a,(null===(e=t.dataForm.pin)||void 0===e?void 0:e.length)==t.dataForm.pinLen&&t.setInputType("confirm-pin")})()}onConfirmPinChange(a){var t=this;return(0,r.A)(function*(){var e;if(t.dataForm.pin2=a,(null===(e=t.dataForm.pin2)||void 0===e?void 0:e.length)==t.dataForm.pinLen)if(t.dataForm.pin!=t.dataForm.pin2){var l;t.dataForm.pin2="",null===(l=t.ngConfirmPinInputRef)||void 0===l||l.setValue(""),t.response={Succeeded:!1,Message:"M\xe3 PIN kh\xf4ng tr\xf9ng kh\u1edbp, h\xe3y nh\u1eadp l\u1ea1i!"}}else t.setPIN()})()}resendOTP(a){var t=this;return(0,r.A)(function*(){var e;t.timeoutSendOTP>0||(null===(e=t.ngOtpInputRef)||void 0===e||e.setValue(""),t.submitMobile())})()}resetOTP(a){var t=this;return(0,r.A)(function*(){var e;null===(e=t.ngPinInputRef)||void 0===e||e.setValue("")})()}forgotPIN(a){var t=this;return(0,r.A)(function*(){j({loading:e=>{var l,m;e?null===(l=t.loading)||void 0===l||l.present():null===(m=t.loading)||void 0===m||m.dismiss()},params:{PhoneNumber:t.dataForm.mobile},callback:e=>{t.response=e,null!=e&&e.Succeeded?t.dataForm.inputType="otp":(0,g.cX)(t.toastController,{},e).then(l=>l.present())}})})()}submitMobile(a){var t=this;return(0,r.A)(function*(){k({loading:e=>{var l,m;e?null===(l=t.loading)||void 0===l||l.present():null===(m=t.loading)||void 0===m||m.dismiss()},params:{PhoneNumber:t.dataForm.mobile},callback:e=>{t.response=e,null!=e&&e.Succeeded?e.Data.PhoneNumberConfirmed?t.dataForm.inputType="pin":(t.dataForm.inputType="otp",t.setTimeCountdown()):(0,g.cX)(t.toastController,{},e).then(l=>l.present())}})})()}checkOTP(){var a=this;return(0,r.A)(function*(){T({loading:t=>{var e,l;t?null===(e=a.loading)||void 0===e||e.present():null===(l=a.loading)||void 0===l||l.dismiss()},params:{PhoneNumber:a.dataForm.mobile,OtpCode:a.dataForm.otp},callback:t=>{var e;a.response=t,null!=t&&t.Succeeded?a.dataForm.inputType="set-pin":(null===(e=a.ngOtpInputRef)||void 0===e||e.setValue(""),(0,g.cX)(a.toastController,{},t).then(l=>l.present()))}})})()}checkPIN(){var a=this;return(0,r.A)(function*(){N({loading:t=>{var e,l;t?null===(e=a.loading)||void 0===e||e.present():null===(l=a.loading)||void 0===l||l.dismiss()},params:{PhoneNumber:a.dataForm.mobile,Password:a.dataForm.pin},callback:t=>{if(a.response=t,null!=t&&t.Succeeded){let{RefreshToken:l,JWToken:m,TokenExpiryDateValue:Z,UserName:q,PhoneNumber:nn}=t.Data;(0,y.Dj)({params:{AccessToken:m,RefreshToken:l,TokenExpiry:Z,UserName:q,PhoneNumber:nn},callback:_=>{var b;null!=_&&_.AccessToken&&(window.location.href=null!==(b=a.params.returnurl)&&void 0!==b?b:P._.TABS)}})}else{var e;null===(e=a.ngPinInputRef)||void 0===e||e.setValue(""),(0,g.cX)(a.toastController,{},t).then(l=>l.present())}}})})()}setPIN(){var a=this;return(0,r.A)(function*(){I({loading:t=>{var e,l;t?null===(e=a.loading)||void 0===e||e.present():null===(l=a.loading)||void 0===l||l.dismiss()},params:{PhoneNumber:a.dataForm.mobile,OtpCode:a.dataForm.otp,Password:a.dataForm.pin,ConfirmPassword:a.dataForm.pin2},callback:t=>{var e,l;a.response=t,null!=t&&t.Succeeded?a.checkPIN():(null===(e=a.ngSetPinInputRef)||void 0===e||e.setValue(""),null===(l=a.ngConfirmPinInputRef)||void 0===l||l.setValue(""),(0,g.cX)(a.toastController,{},t).then(m=>m.present()))}})})()}setTimeCountdown(){if(this.timeoutSendOTP<=0){this.timeoutSendOTP=3e4,clearInterval(this.intervalCountdownSendOTP);let a=1e3;this.intervalCountdownSendOTP=setInterval(()=>{if(this.timeoutSendOTP<=a)return this.timeoutSendOTP=0,void clearInterval(this.intervalCountdownSendOTP);this.timeoutSendOTP-=a},a)}}getTimeCountdownSendOTP(){return C()(this.timeoutSendOTP).format("mm:ss")}}return(u=o).\u0275fac=function(a){return new(a||u)(n.rXU(G.hE),n.rXU(v.nX),n.rXU(s.Xi),n.rXU(s.K_))},u.\u0275cmp=n.VBU({type:u,selectors:[["app-auth"]],viewQuery:function(a,t){if(1&a&&(n.GBs(S,5),n.GBs(x,5),n.GBs(w,5),n.GBs(M,5)),2&a){let e;n.mGM(e=n.lsd())&&(t.ngOtpInputRef=e.first),n.mGM(e=n.lsd())&&(t.ngPinInputRef=e.first),n.mGM(e=n.lsd())&&(t.ngSetPinInputRef=e.first),n.mGM(e=n.lsd())&&(t.ngConfirmPinInputRef=e.first)}},decls:23,vars:6,consts:[["slot","end"],[3,"click"],["name","close-outline"],["scroll-x","false","scroll-y","false"],[1,"w-100","h-100","d-flex","align-items-center"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["inputMobile",""],["inputOTP",""],["inputPIN",""],["inputSetPIN",""],["inputConfirmPIN",""],[3,"ngTemplateOutlet"],[1,"container","container-mobile"],[1,"mb-4"],["src","../../../assets/image/logo.svg"],[1,"mb-3","text-center"],[1,"mb-4","text-center"],[1,"ion-item-input"],["lines","none"],["slot","start","color","primary","src","../../../assets/icon/ion-icon/call.svg"],["type","number","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",3,"ngModel","change","keyup"],[1,"mt-4"],["color","primary","expand","block","shape","round",3,"click"],["slot","end","src","../../../assets/icon/ion-icon/arrow-right.svg"],[1,"container","container-otp"],["src","../../../assets/icon/ion-img/otp.svg"],[1,"row","text-center"],[3,"config","onInputChange"],["ngOtpInput",""],[1,"mt-4","text-center"],[1,"text-primmary","cursor-pointer",3,"click"],["class","ml-1",4,"ngIf"],[1,"ml-1"],[1,"container","container-pin"],[1,"mb-5","text-center"],["ngPinInput",""],["ngSetPinInput",""],["ngConfirmPinInput",""]],template:function(a,t){1&a&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),n.bIt("click",function(l){return t.close(l)}),n.nrm(4,"ion-icon",2),n.k0s()()()(),n.j41(5,"ion-content",3)(6,"div",4),n.qex(7,5),n.DNE(8,X,1,1,"ng-container",6)(9,V,1,1,"ng-container",6)(10,D,1,1,"ng-container",6)(11,B,1,1,"ng-container",6)(12,Y,1,1,"ng-container",6),n.bVm(),n.k0s()(),n.DNE(13,L,20,1,"ng-template",null,7,n.C5r)(15,U,22,5,"ng-template",null,8,n.C5r)(17,z,22,4,"ng-template",null,9,n.C5r)(19,J,15,3,"ng-template",null,10,n.C5r)(21,Q,15,3,"ng-template",null,11,n.C5r)),2&a&&(n.R7$(7),n.Y8G("ngSwitch",t.dataForm.inputType),n.R7$(1),n.Y8G("ngSwitchCase","mobile"),n.R7$(1),n.Y8G("ngSwitchCase","otp"),n.R7$(1),n.Y8G("ngSwitchCase","pin"),n.R7$(1),n.Y8G("ngSwitchCase","set-pin"),n.R7$(1),n.Y8G("ngSwitchCase","confirm-pin"))},dependencies:[d.bT,d.T3,d.ux,d.e1,f.BC,f.vS,s.Jm,s.QW,s.W9,s.eU,s.iq,s.KW,s.$w,s.uz,s.he,s.ai,s.su,F.gj],styles:[".container[_ngcontent-%COMP%]{max-width:30rem}.container-mobile[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:12.5rem;margin:auto}.container-otp[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:12.5rem;margin:auto}.container-pin[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:12.5rem;margin:auto}"]}),o})()}];let K=(()=>{var u;class o{}return(u=o).\u0275fac=function(a){return new(a||u)},u.\u0275mod=n.$C({type:u}),u.\u0275inj=n.G2t({imports:[v.iI.forChild(W),v.iI]}),o})(),H=(()=>{var u;class o{}return(u=o).\u0275fac=function(a){return new(a||u)},u.\u0275mod=n.$C({type:u}),u.\u0275inj=n.G2t({imports:[d.MD,f.YN,s.bv,K,F.Ph]}),o})()}}]);