"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6263],{6263:(J,C,g)=>{g.r(C),g.d(C,{ChargingLocationPageModule:()=>Y});var d=g(177),P=g(9417),p=g(8974),m=g(2175),u=g(467),T=g(2385),R=g(7392),I=g(7762),x=g(5312),f=g(3801),v=g(6841),_=g(1312),h=g(8650),F=g(3588),y=g(8833),t=g(4438),j=g(4842);const b=o=>({$implicit:o});function D(o,s){1&o&&(t.j41(0,"div",16),t.nrm(1,"ion-spinner",17),t.k0s())}function E(o,s){if(1&o){const l=t.RV6();t.qex(0),t.j41(1,"ion-button",22),t.bIt("click",function(n){t.eBV(l);const r=t.XpG(3);return t.Njj(r.refreshCurrentPosition(n))}),t.nrm(2,"ion-icon",23),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.bVm()}if(2&o){const l=t.XpG().$implicit;t.R7$(4),t.JRh(l.text)}}function S(o,s){if(1&o){const l=t.RV6();t.qex(0),t.j41(1,"ion-button",22),t.bIt("click",function(n){t.eBV(l);const r=t.XpG().$implicit,e=t.XpG(2);return t.Njj(e.clearFilter(n,r))}),t.j41(2,"ion-label"),t.EFF(3),t.k0s(),t.nrm(4,"ion-icon",24),t.k0s(),t.bVm()}if(2&o){const l=t.XpG().$implicit;t.R7$(3),t.JRh(l.text)}}function G(o,s){if(1&o){const l=t.RV6();t.qex(0),t.j41(1,"ion-button",22),t.bIt("click",function(n){t.eBV(l);const r=t.XpG().$implicit,e=t.XpG(2);return t.Njj(e.clearFilter(n,r))}),t.j41(2,"ion-label"),t.EFF(3),t.k0s(),t.nrm(4,"ion-icon",24),t.k0s(),t.bVm()}if(2&o){const l=t.XpG().$implicit;t.R7$(3),t.JRh(l.text)}}function V(o,s){if(1&o&&(t.qex(0)(1,19),t.DNE(2,E,5,1,"ng-container",20)(3,S,5,1,"ng-container",20)(4,G,5,1,"ng-container",21),t.bVm()()),2&o){const l=s.$implicit;t.R7$(),t.Y8G("ngSwitch",l.type),t.R7$(),t.Y8G("ngSwitchCase","Nearby"),t.R7$(),t.Y8G("ngSwitchCase","Search")}}function $(o,s){if(1&o&&(t.j41(0,"div",18),t.DNE(1,V,5,3,"ng-container",14),t.k0s()),2&o){const l=t.XpG();t.R7$(),t.Y8G("ngForOf",l.getFilters())}}function M(o,s){1&o&&(t.j41(0,"div",25),t.nrm(1,"img",26),t.j41(2,"div",27),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&o&&(t.R7$(3),t.JRh(t.bMT(4,1,"DataNotFound")))}function N(o,s){if(1&o&&(t.qex(0),t.j41(1,"div",28),t.eu8(2,29),t.k0s(),t.bVm()),2&o){const l=s.$implicit;t.XpG();const i=t.sdS(20);t.R7$(2),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.eq3(2,b,l))}}function k(o,s){if(1&o){const l=t.RV6();t.j41(0,"ion-infinite-scroll",30),t.bIt("ionInfinite",function(n){t.eBV(l);const r=t.XpG();return t.Njj(r.onIonInfinite(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function O(o,s){if(1&o){const l=t.RV6();t.j41(0,"div",31)(1,"div",32),t.bIt("click",function(n){const r=t.eBV(l).$implicit,e=t.XpG();return t.Njj(e.openDetail(n,r))}),t.j41(2,"div",33)(3,"ion-avatar"),t.nrm(4,"img",34),t.k0s(),t.j41(5,"div",35)(6,"small"),t.EFF(7),t.k0s()()(),t.j41(8,"div",36)(9,"h6",37)(10,"b"),t.EFF(11),t.k0s()(),t.j41(12,"div"),t.nrm(13,"ion-icon",38),t.j41(14,"ion-text",39)(15,"small",40)(16,"b"),t.EFF(17),t.k0s(),t.EFF(18),t.k0s()()(),t.j41(19,"div")(20,"small"),t.EFF(21),t.k0s()()()(),t.j41(22,"div",41)(23,"div")(24,"ion-text",39)(25,"small"),t.EFF(26),t.k0s(),t.EFF(27," - "),t.j41(28,"small"),t.EFF(29),t.k0s()()(),t.j41(30,"div")(31,"ion-button",42),t.bIt("click",function(n){const r=t.eBV(l).$implicit,e=t.XpG();return t.Njj(e.openDirection(n,r))}),t.j41(32,"ion-label"),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.nrm(35,"ion-icon",43),t.k0s()()()()}if(2&o){let l,i,n,r;const e=s.$implicit,a=t.XpG();t.R7$(4),t.Y8G("src",a.getLocImage(e),t.B4B),t.R7$(3),t.SpI("",a.getDistance2CL(e),"km"),t.R7$(4),t.JRh(e.LocName),t.R7$(5),t.HbH(e.TotalConnectorReady?"text-primary":"text-danger"),t.R7$(),t.JRh(null!==(l=e.TotalConnectorReady)&&void 0!==l?l:0),t.R7$(),t.SpI("/",null!==(i=e.TotalConnector)&&void 0!==i?i:0," \u0111\u1ea7u s\u1ea1c s\u1eb5n s\xe0ng"),t.R7$(3),t.JRh(e.LocAddress),t.R7$(5),t.JRh(null!==(n=e.OpenTimeStart)&&void 0!==n?n:"--:--"),t.R7$(3),t.JRh(null!==(r=e.OpenTimeEnd)&&void 0!==r?r:"--:--"),t.R7$(2),t.Y8G("color",a.APP_FUNC_GetColor_VLocationStatus(e.VLocationStatus)),t.R7$(2),t.JRh(t.bMT(34,12,"Direction"))}}const X=[{path:"",component:(()=>{var o;class s{constructor(i,n,r,e,a){var c=this;this.router=i,this.modalController=n,this.toastController=r,this.loadingController=e,this.animationController=a,this.APP_ROUTE=y._,this.v_location_status=F.Ix,this.APP_FUNC_GetColor_VLocationStatus=_.Bb,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.currentPosition=x.c.app_default.geolocation.pos,this.chargingLocations=[],(0,f.Xz)().then(L=>this.currentPosition=L),(0,u.A)(function*(){c.loading=yield c.loadingController.create({message:""})})()}ngOnInit(){this.refreshData()}onIonRefresher(i){this.filter={},this.refreshData(()=>{i.target.complete()})}onIonInfinite(i){this.loadMore(()=>{i.target.complete()})}resetData(){this.chargingLocations.length=0}pushData(i,n){this.chargingLocations=this.chargingLocations.concat(i),n&&n(this.chargingLocations)}totalData(){return this.chargingLocations.length}refreshData(i){this.filter={},this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging(i)}loadMore(i){this.paging.page+=1,this.loadData_Paging(i)}searchChange(i){this.filter={},this.filter.search=i.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging()}sortChange(i,n){this.paging.sortfield=i||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging()}loadData_Paging(i){var n=this;return(0,u.A)(function*(){if(n.paging.loading=!0,n.filter.search)(0,v.tC)({loading:e=>{var a,c;e?null===(a=n.loading)||void 0===a||a.present():null===(c=n.loading)||void 0===c||c.dismiss()},params:{Search:n.filter.search,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:e=>{var a;n.response=e,null!=e&&e.Succeeded?n.pushData(null!==(a=e.Data)&&void 0!==a?a:[]):(0,h.cX)(n.toastController,{},e).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==e||!e.HasNextPage),i&&i()}});else if(n.filter.ElectricTypeFilter||n.filter.ConnectorTypeFilter||n.filter.VConnectorStatusFilter)(0,v.Zd)({loading:e=>{var a,c;e?null===(a=n.loading)||void 0===a||a.present():null===(c=n.loading)||void 0===c||c.dismiss()},params:{ElectricTypeFilter:n.filter.ElectricTypeFilter,ConnectorTypeFilter:n.filter.ConnectorTypeFilter,VConnectorStatusFilter:n.filter.VConnectorStatusFilter,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:e=>{var a;n.response=e,null!=e&&e.Succeeded?n.pushData(null!==(a=e.Data)&&void 0!==a?a:[]):(0,h.cX)(n.toastController,{},e).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==e||!e.HasNextPage),i&&i()}});else{var r=yield(0,f.Xz)();(0,v.Bc)({loading:e=>{var a,c;e?null===(a=n.loading)||void 0===a||a.present():null===(c=n.loading)||void 0===c||c.dismiss()},params:{TopLeftLat:r.lat+.1,TopLeftLong:r.lng-.1,RightBottomLat:r.lat-.1,RightBottomLong:r.lng+.1,PageNumber:n.paging.page,PageSize:n.paging.limit},callback:e=>{var a;n.response=e,null!=e&&e.Succeeded?(n.pushData(null!==(a=e.Data)&&void 0!==a?a:[],c=>{c.forEach(L=>{})}),0==n.totalData()&&1==n.paging.page&&(n.filter.VConnectorStatusFilter=F.EF.DangRanh,n.filterChange())):(0,h.cX)(n.toastController,{},e).then(c=>c.present()),n.paging.loading=!1,n.paging.active=!(null==e||!e.HasNextPage),i&&i()}})}})()}presentModalFilterChargingLocationComponent(i){var n=this;return(0,u.A)(function*(){const r=yield n.modalController.create({component:T.T,componentProps:{filter:Object.assign({},n.filter,{search:null})},backdropDismiss:!0,keyboardClose:!0,cssClass:"ion-modal-filter",enterAnimation:e=>(0,h.l9)(n.animationController,e),leaveAnimation:e=>(0,h.CV)(n.animationController,e)});r.onDidDismiss().then(e=>{"clear"==e.role?(n.filter={},n.filterChange()):"submit"==e.role&&(n.filter=e.data,n.filterChange())}),r.present()})()}openDirection(i,n){return(0,u.A)(function*(){i.preventDefault(),yield R.P.open({url:(0,_.LZ)(yield(0,f.Xz)(),{lat:null==n?void 0:n.LocLat,lng:null==n?void 0:n.LocLong})})})()}openDetail(i,n){var r=this;return(0,u.A)(function*(){var e,a;r.router.navigateByUrl(y._.CHARGING_LOCATION_DETAIL.replace(":id",null!==(e=null===(a=n.ChargeLocationId)||void 0===a?void 0:a.toString())&&void 0!==e?e:""))})()}getLocImage(i){var n;if(!i.LocImage&&i.LocImages)if("string"==typeof i.LocImages){var r,e;i.LocImage=(null!==(r=(null!==(e=JSON.parse(i.LocImages))&&void 0!==e?e:[])[0])&&void 0!==r?r:{}).imageurl}else{var a,c;i.LocImage=(null!==(a=(null!==(c=i.LocImages)&&void 0!==c?c:[])[0])&&void 0!==a?a:{}).imageurl}return null!==(n=i.LocImage)&&void 0!==n?n:"assets/favicon/favicon.svg"}getDistance2CL(i){return parseFloat((0,_.GH)(this.currentPosition,{lat:null==i?void 0:i.LocLat,lng:null==i?void 0:i.LocLong}).toFixed(2))}JSONstringify(i){return JSON.stringify(null!=i?i:{},null,2)}getFilters(){var i=[];if(this.filter.search&&i.push({type:"Search",value:this.filter.search,text:this.filter.search}),this.filter.ElectricTypeFilter)switch(this.filter.ElectricTypeFilter){case 1:i.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"AC"});break;case 2:i.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"DC"});break;case 3:i.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"T\u1ea5t c\u1ea3 d\xf2ng \u0111i\u1ec7n"})}if(this.filter.VConnectorStatusFilter)switch(this.filter.VConnectorStatusFilter){case 2500:i.push({type:"VConnectorStatusFilter",value:this.filter.VConnectorStatusFilter,text:"S\u1eb5n s\xe0ng s\u1ea1c"});break;case 2599:i.push({type:"VConnectorStatusFilter",value:this.filter.VConnectorStatusFilter,text:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"})}return this.filter.ConnectorTypeFilter&&this.filter.ConnectorTypeFilter.split(";").forEach(n=>{i.push({type:"ConnectorTypeFilter",value:n,text:n})}),i.length||i.push({type:"Nearby",value:"Nearby",text:"G\u1ea7n \u0111\xe2y"}),i}clearFilter(i,n){var r=this;return(0,u.A)(function*(){if("Search"==n.type)r.filter.search=void 0;else if("ElectricTypeFilter"==n.type)r.filter.ElectricTypeFilter=void 0;else if("VConnectorStatusFilter"==n.type)r.filter.VConnectorStatusFilter=void 0;else if("ConnectorTypeFilter"==n.type){var e;r.filter.ConnectorTypeFilter=null===(e=r.filter.ConnectorTypeFilter)||void 0===e?void 0:e.split(";").filter(a=>a!=n.value).join(";")}r.filterChange()})()}refreshCurrentPosition(i){var n=this;return(0,u.A)(function*(){I.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var r=(0,u.A)(function*(e){if(e.coords){var a={lat:e.coords.latitude,lng:e.coords.longitude};yield(0,f.fj)({params:a}),n.refreshData()}});return function(e){return r.apply(this,arguments)}}())})()}}return(o=s).\u0275fac=function(i){return new(i||o)(t.rXU(m.Ix),t.rXU(p.W3),t.rXU(p.K_),t.rXU(p.Xi),t.rXU(p.Hx))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-charging-location"]],decls:21,vars:9,consts:[["templateChargingLocation",""],[1,"container","p-0","d-flex","align-items-center"],[1,"flex-grow-1"],["mode","md","search-icon"," ",3,"ionChange","ionClear","placeholder"],[1,"pl-3"],["mode","md","color","light","shape","round",3,"click"],["src","../../../assets/icon/ion-icon/filter.svg"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","container list-filters",4,"ngIf"],["class","container py-5 text-center",4,"ngIf"],[1,"container","pt-3","pb-4"],[1,"row"],[4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","list-filters"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","ios","size","small","shape","round","color","primary",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/locate-outline.svg"],["slot","end","name","close-outline"],[1,"container","py-5","text-center"],["src","../../../assets/image/temp/no-info.svg"],[1,"text-muted","mt-4"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-day"],[1,"d-flex","align-items-start","p-3","cursor-pointer",3,"click"],[1,"col-auto","px-0"],[3,"src"],[1,"text-danger","text-center","mt-1"],[1,"col","pr-0"],[1,"my-0"],["src","../../../assets/icon/ion-icon/electric.svg","color","primary"],["color","medium"],[1,"font-weight-medium"],[1,"d-flex","align-items-center","justify-content-between","px-3","pb-3"],["shape","round",3,"click","color"],["src","../../../assets/icon/ion-icon/direction.svg","color","primary","slot","end"]],template:function(i,n){if(1&i){const r=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",1)(3,"div",2)(4,"ion-searchbar",3),t.nI1(5,"translate"),t.bIt("ionChange",function(a){return t.eBV(r),t.Njj(n.searchChange(a))})("ionClear",function(a){return t.eBV(r),t.Njj(n.searchChange(a))}),t.k0s()(),t.j41(6,"div",4)(7,"ion-button",5),t.bIt("click",function(a){return t.eBV(r),t.Njj(n.presentModalFilterChargingLocationComponent(a))}),t.nrm(8,"ion-icon",6),t.k0s()()()()(),t.j41(9,"ion-content",7)(10,"ion-refresher",8),t.bIt("ionRefresh",function(a){return t.eBV(r),t.Njj(n.onIonRefresher(a))}),t.nrm(11,"ion-refresher-content"),t.k0s(),t.DNE(12,D,2,0,"div",9)(13,$,2,1,"div",10)(14,M,5,3,"div",11),t.j41(15,"div",12)(16,"div",13),t.DNE(17,N,3,4,"ng-container",14),t.k0s()(),t.DNE(18,k,2,0,"ion-infinite-scroll",15),t.k0s(),t.DNE(19,O,36,14,"ng-template",null,0,t.C5r)}2&i&&(t.R7$(4),t.FS9("placeholder",t.bMT(5,7,"FindChargingLocation")),t.R7$(5),t.Y8G("fullscreen",!0),t.R7$(3),t.Y8G("ngIf",!n.response),t.R7$(),t.Y8G("ngIf",n.response),t.R7$(),t.Y8G("ngIf",n.response&&!n.chargingLocations.length),t.R7$(3),t.Y8G("ngForOf",n.chargingLocations),t.R7$(),t.Y8G("ngIf",n.paging.active))},dependencies:[d.Sq,d.bT,d.T3,d.ux,d.e1,d.fG,p.mC,p.Jm,p.W9,p.eU,p.iq,p.Ax,p.Hp,p.he,p.To,p.Ki,p.S1,p.w2,p.IO,p.ai,p.Gw,j.D9],styles:["ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding:0}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: .5rem;--padding-end: .5rem}.card-day[_ngcontent-%COMP%]{border:1px solid var(--ion-color-gray);border-radius:1rem}.card-day[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:3rem;height:3rem}.card-day[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .card-day[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{vertical-align:middle}.list-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 1rem;--padding-end: 1rem;margin:0 .5rem .5rem 0}.list-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover   ion-icon[slot=end][_ngcontent-%COMP%]{color:var(--ion-color-danger)}"]}),s})()}];let A=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[m.iI.forChild(X),m.iI]}),s})();var B=g(9500);let Y=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[d.MD,P.YN,p.bv,A,B.x]}),s})()}}]);