"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[615],{1038:(k,F,d)=>{d.d(F,{v:()=>o});var h=d(467),b=d(7158);const o=function(){var R=(0,h.A)(function*(l){l.params=l.params||{};var p=[];l.params.subFolder&&(l.params.subFolder=l.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),l.params.subFolder&&p.push(l.params.subFolder)),l.params.isconvertvideo=!!l.params.isconvertvideo,l.params.isconvertpdf2image=!!l.params.isconvertpdf2image,l.params.isconvertoffice2image=!!l.params.isconvertoffice2image,l.params.isresizeimage=!!l.params.isresizeimage;const n=new FormData;n.append("path",p.join("/")),n.append("types",l.params.fileType||null),n.append("file",l.params.file||null),n.append("base64",l.params.base64||!1),n.append("isconvertvideo",l.params.isconvertvideo),n.append("isconvertpdf2image",l.params.isconvertpdf2image),n.append("isconvertoffice2image",l.params.isconvertoffice2image),n.append("isresizeimage",l.params.isresizeimage),(0,b.ZD)({url:"files",params:n,success:e=>{"function"==typeof l.callback&&l.callback(e.data||null)},error:e=>{"function"==typeof l.callback&&l.callback(),console.error(l,e)},loading:l.loading})});return function(p){return R.apply(this,arguments)}}()},9946:(k,F,d)=>{d.d(F,{ks:()=>R,sh:()=>l,z:()=>o});var h=d(467),b=d(7158);const o=function(){var p=(0,h.A)(function*(n){n.params=n.params||{},(0,b.hm)({url:"api/User/get-user",params:{},success:e=>{"function"==typeof n.callback&&n.callback(e.data||null)},error:e=>{var f;"function"==typeof n.callback&&n.callback(null==e||null===(f=e.response)||void 0===f?void 0:f.data),console.error(e)},loading:null==n?void 0:n.loading})});return function(e){return p.apply(this,arguments)}}(),R=function(){var p=(0,h.A)(function*(n){var e,f,v,U,M;n.params=n.params||{},(0,b.IH)({url:"api/User/update-user",params:{UserId:null!==(e=n.params.UserId)&&void 0!==e?e:null,FullName:null!==(f=n.params.FullName)&&void 0!==f?f:null,Address:null!==(v=n.params.Address)&&void 0!==v?v:null,Gender:null!==(U=n.params.Gender)&&void 0!==U?U:null,Birthday:null!==(M=n.params.Birthday)&&void 0!==M?M:null},success:_=>{"function"==typeof n.callback&&n.callback(_.data||null)},error:_=>{var C;"function"==typeof n.callback&&n.callback(null==_||null===(C=_.response)||void 0===C?void 0:C.data),console.error(_)},loading:null==n?void 0:n.loading})});return function(e){return p.apply(this,arguments)}}(),l=function(){var p=(0,h.A)(function*(n){var e,f;n.params=n.params||{},(0,b.IH)({url:"api/User/update-avatar",params:{UserId:null!==(e=n.params.UserId)&&void 0!==e?e:null,Avatar:null!==(f=n.params.Avatar)&&void 0!==f?f:null},success:v=>{"function"==typeof n.callback&&n.callback(v.data||null)},error:v=>{var U;"function"==typeof n.callback&&n.callback(null==v||null===(U=v.response)||void 0===U?void 0:U.data),console.error(v)},loading:null==n?void 0:n.loading})});return function(e){return p.apply(this,arguments)}}()},615:(k,F,d)=>{d.r(F),d.d(F,{UserInfoPageModule:()=>x});var h=d(177),b=d(9417),o=d(4488),R=d(2175),l=d(467),p=d(9946),n=d(8650),e=d(4438),f=d(4842);function v(i,m){if(1&i){const c=e.RV6();e.qex(0),e.j41(1,"ion-content")(2,"div",4)(3,"ion-list",5)(4,"div",6)(5,"label"),e.EFF(6),e.nI1(7,"translate"),e.j41(8,"span",7),e.EFF(9,"*"),e.k0s()(),e.j41(10,"div",8)(11,"ion-item")(12,"ion-input",9),e.bIt("ionChange",function(a){e.eBV(c);const t=e.XpG();return e.Njj(t.changeFullName(a))}),e.nI1(13,"translate"),e.k0s()()()(),e.j41(14,"div",6)(15,"label"),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"div",8)(19,"ion-item")(20,"ion-textarea",10),e.bIt("ionChange",function(a){e.eBV(c);const t=e.XpG();return e.Njj(t.changeAddress(a))}),e.nI1(21,"translate"),e.k0s()()()()()()(),e.j41(22,"ion-footer")(23,"div",11)(24,"ion-button",12),e.bIt("click",function(a){e.eBV(c);const t=e.XpG();return e.Njj(t.submit(a))}),e.j41(25,"ion-label"),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()(),e.bVm()}if(2&i){const c=e.XpG();e.R7$(6),e.SpI("",e.bMT(7,8,"FullName")," "),e.R7$(6),e.FS9("placeholder",e.bMT(13,10,"FullName")),e.Y8G("value",c.user.FullName),e.R7$(4),e.JRh(e.bMT(17,12,"Address")),e.R7$(4),e.FS9("placeholder",e.bMT(21,14,"Address")),e.Y8G("autoGrow",!0)("value",c.user.Address),e.R7$(6),e.JRh(e.bMT(27,16,"Complete"))}}let U=(()=>{var i;class m{constructor(r,a,t){var s=this;this.modalController=r,this.toastController=a,this.loadingController=t,this.user={},(0,l.A)(function*(){s.loading=yield s.loadingController.create({message:""})})()}ngOnInit(){(0,p.z)({loading:r=>{var a,t;r?null===(a=this.loading)||void 0===a||a.present():null===(t=this.loading)||void 0===t||t.dismiss()},callback:r=>{var a;this.response=r,null!=r&&r.Succeeded?this.user=null!==(a=r.Data)&&void 0!==a?a:{}:(0,n.cX)(this.toastController,{},r).then(t=>t.present())}})}close(r){var a=this;return(0,l.A)(function*(){a.modalController.dismiss(null,"cancel")})()}submit(r){var a=this;return(0,l.A)(function*(){(0,p.ks)({loading:t=>{var s,u;t?null===(s=a.loading)||void 0===s||s.present():null===(u=a.loading)||void 0===u||u.dismiss()},params:a.user,callback:t=>{a.response=t,null!=t&&t.Succeeded?a.modalController.dismiss(null,"success"):(0,n.cX)(a.toastController,{},t).then(s=>s.present())}})})()}changeFullName(r){var a=this;return(0,l.A)(function*(){a.user.FullName=r.detail.value})()}changeAddress(r){var a=this;return(0,l.A)(function*(){a.user.Address=r.detail.value})()}}return(i=m).\u0275fac=function(r){return new(r||i)(e.rXU(o.W3),e.rXU(o.K_),e.rXU(o.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-modal-update-user"]],decls:9,vars:4,consts:[["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],[4,"ngIf"],[1,"card-info","bg-white","container","py-3","min-h-100"],["lines","none"],[1,"form-group"],[1,"text-danger"],[1,"ion-item-input"],[3,"placeholder","value","ionChange"],[3,"autoGrow","placeholder","value","ionChange"],[1,"container","py-3"],["color","primary","expand","block","shape","round",3,"click"]],template:function(r,a){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(s){return a.close(s)}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.DNE(8,v,28,18,"ng-container",3)),2&r&&(e.R7$(6),e.JRh(e.bMT(7,2,"UpdateInfo")),e.R7$(2),e.Y8G("ngIf",null==a.response?null:a.response.Succeeded))},dependencies:[h.bT,o.Jm,o.QW,o.W9,o.M0,o.eU,o.iq,o.$w,o.uz,o.he,o.nf,o.nc,o.BC,o.ai,o.Gw,f.D9],styles:[".card-info[_ngcontent-%COMP%]{border-top-left-radius:1.5rem;border-top-right-radius:1.5rem}"]}),m})();var M=d(5312),_=d(1038),C=d(6539),y=d(1312),P=d(8833);function $(i,m){1&i&&(e.j41(0,"div",7),e.nrm(1,"ion-spinner",8),e.k0s())}function E(i,m){if(1&i&&(e.j41(0,"div",9)(1,"div",10)(2,"small",11),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"p",12)(6,"b"),e.EFF(7),e.nI1(8,"translate"),e.k0s()()(),e.j41(9,"div",10)(10,"small",11),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"p",12)(14,"b"),e.EFF(15),e.nI1(16,"translate"),e.k0s()()(),e.j41(17,"div",10)(18,"small",11),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"p",12)(22,"b"),e.EFF(23),e.nI1(24,"translate"),e.k0s()()(),e.j41(25,"div",10)(26,"small",11),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.j41(29,"p",12)(30,"b"),e.EFF(31),e.nI1(32,"translate"),e.k0s()()()()),2&i){const c=e.XpG();e.R7$(3),e.JRh(e.bMT(4,8,"FullName")),e.R7$(4),e.JRh(c.user.FullName||e.bMT(8,10,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(12,12,"Mobile")),e.R7$(4),e.JRh(c.APP_FUNC_FormatMobileNumber(c.user.PhoneNumber)||e.bMT(16,14,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(20,16,"Email")),e.R7$(4),e.JRh((null==c.user.Person?null:c.user.Person.Email)||e.bMT(24,18,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(28,20,"Address")),e.R7$(4),e.JRh(c.user.Address||e.bMT(32,22,"NotUpdate"))}}function j(i,m){if(1&i){const c=e.RV6();e.j41(0,"ion-footer")(1,"div",13)(2,"ion-button",14),e.bIt("click",function(a){e.eBV(c);const t=e.XpG();return e.Njj(t.presentModalUpdateUser(a))}),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()()}2&i&&(e.R7$(4),e.JRh(e.bMT(5,1,"Update")))}const G=[{path:"",component:(()=>{var i;class m{constructor(r,a,t){var s=this;this.modalController=r,this.toastController=a,this.loadingController=t,this.APP_ROUTE=P._,this.api_url=M.c.api_url,this.APP_FUNC_FormatMobileNumber=y.IV,(0,l.A)(function*(){s.loading=yield s.loadingController.create({message:""})})()}ngOnInit(){var r=this;(0,l.A)(function*(){(yield(0,C.kU)())&&r.refreshData()})()}onIonRefresher(r){this.refreshData(()=>{r.target.complete()})}refreshData(r){var a=this;return(0,l.A)(function*(){(0,p.z)({loading:t=>{var s,u;t?null===(s=a.loading)||void 0===s||s.present():null===(u=a.loading)||void 0===u||u.dismiss()},callback:t=>{var s;a.response=t,null!=t&&t.Succeeded?a.user=null!==(s=t.Data)&&void 0!==s?s:{}:(0,n.cX)(a.toastController,{},t).then(u=>u.present()),r&&r()}})})()}presentModalUpdateUser(r){var a=this;return(0,l.A)(function*(){let t=yield a.modalController.create({component:U});t.onDidDismiss().then(s=>{"success"==s.role&&window.location.reload()}),t.present()})()}changeAvatar(r){var a=this;return(0,l.A)(function*(){yield a.loadingController.create({spinner:"dots",message:"\u0110ang x\u1eed l\xfd t\u1eadp tin ...",animated:!1}),(0,y.oG)({accept:"image/*"},s=>{(0,_.v)({loading:u=>{var I,g;u?null===(I=a.loading)||void 0===I||I.present():null===(g=a.loading)||void 0===g||g.dismiss()},params:{file:s[0],subFolder:"avatar",fileType:"image"},callback:u=>{var I;0==(null==u?void 0:u.ReturnCode)&&(0,p.sh)({loading:g=>{var T,A;g?null===(T=a.loading)||void 0===T||T.present():null===(A=a.loading)||void 0===A||A.dismiss()},params:{UserId:null===(I=a.user)||void 0===I?void 0:I.UserId,Avatar:`${u.path}/${u.file.name}`},callback:g=>{null!=g&&g.Succeeded?a.refreshData():(0,n.cX)(a.toastController,{},g).then(T=>T.present())}})}})})})()}}return(i=m).\u0275fac=function(r){return new(r||i)(e.rXU(o.W3),e.rXU(o.K_),e.rXU(o.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-user-info"]],decls:13,vars:7,consts:[["mode","ios"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","card-info bg-white container py-3 min-h-100",4,"ngIf"],[4,"ngIf"],[1,"container-loading"],["name","circular","color","primary"],[1,"card-info","bg-white","container","py-3","min-h-100"],[1,"mb-3"],[1,"text-muted"],[1,"mt-1","mb-0"],[1,"container","py-3"],["expand","block","shape","round",3,"click"]],template:function(r,a){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-refresher",3),e.bIt("ionRefresh",function(s){return a.onIonRefresher(s)}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.DNE(10,$,2,0,"div",4)(11,E,33,24,"div",5),e.k0s(),e.DNE(12,j,6,3,"ion-footer",6)),2&r&&(e.R7$(3),e.Y8G("defaultHref",a.APP_ROUTE.TABS_USER),e.R7$(2),e.JRh(e.bMT(6,5,"UserInfo")),e.R7$(5),e.Y8G("ngIf",!a.response),e.R7$(1),e.Y8G("ngIf",a.user),e.R7$(1),e.Y8G("ngIf",null==a.user?null:a.user.UserId))},dependencies:[h.bT,o.Jm,o.QW,o.W9,o.M0,o.eU,o.he,o.To,o.Ki,o.w2,o.BC,o.ai,o.el,f.D9],styles:[".card-info[_ngcontent-%COMP%]{border-top-left-radius:1.5rem;border-top-right-radius:1.5rem}"]}),m})()}];let N=(()=>{var i;class m{}return(i=m).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[R.iI.forChild(G),R.iI]}),m})();var D=d(9500);let x=(()=>{var i;class m{}return(i=m).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.MD,b.YN,o.bv,N,D.x]}),m})()}}]);