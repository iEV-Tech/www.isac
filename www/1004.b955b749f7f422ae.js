"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1004],{6944:(B,D,f)=>{f.d(D,{KX:()=>P,_$:()=>R,aN:()=>j,cb:()=>I,eu:()=>k,kO:()=>d,wm:()=>y});var b=f(467),$=f(5972);const d=function(){var n=(0,b.A)(function*(s){var u,m,v,h;s.params=s.params||{},(0,$.hm)({url:"api/ChargingSession/get-mychargingsessions",params:{VSessionStatus:null!==(u=s.params.VSessionStatus)&&void 0!==u?u:null,VSessionStatusMulti:null!==(m=s.params.VSessionStatusMulti)&&void 0!==m?m:null,PageNumber:null!==(v=s.params.PageNumber)&&void 0!==v?v:1,PageSize:null!==(h=s.params.PageSize)&&void 0!==h?h:10},success:C=>{"function"==typeof s.callback&&s.callback(C.data||null)},error:C=>{var M;"function"==typeof s.callback&&s.callback(null==C||null===(M=C.response)||void 0===M?void 0:M.data),console.error(C)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}(),P=function(){var n=(0,b.A)(function*(s){var u,m,v;s.params=s.params||{},(0,$.hm)({url:"api/ChargingSession/get-mybyordercode",params:{OrderCode:null!==(u=s.params.OrderCode)&&void 0!==u?u:null,PageNumber:null!==(m=s.params.PageNumber)&&void 0!==m?m:1,PageSize:null!==(v=s.params.PageSize)&&void 0!==v?v:10},success:h=>{"function"==typeof s.callback&&s.callback(h.data||null)},error:h=>{var C;"function"==typeof s.callback&&s.callback(null==h||null===(C=h.response)||void 0===C?void 0:C.data),console.error(h)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}(),I=function(){var n=(0,b.A)(function*(s){s.params=s.params||{},(0,$.hm)({url:`api/ChargingSession/get-mybyid/${s.params.ChargeSessionId}`,success:u=>{"function"==typeof s.callback&&s.callback(u.data||null)},error:u=>{var m;"function"==typeof s.callback&&s.callback(null==u||null===(m=u.response)||void 0===m?void 0:m.data),console.error(u)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}(),j=function(){var n=(0,b.A)(function*(s){var u,m,v;s.params=s.params||{},(0,$.Ll)({url:"api/ChargingSession/start-create",params:{StationCode:null!==(u=s.params.StationCode)&&void 0!==u?u:null,ConnectorId:null!==(m=s.params.ConnectorId)&&void 0!==m?m:null,OrderCode:null!==(v=s.params.OrderCode)&&void 0!==v?v:null},success:h=>{"function"==typeof s.callback&&s.callback(h.data||null)},error:h=>{var C;"function"==typeof s.callback&&s.callback(null==h||null===(C=h.response)||void 0===C?void 0:C.data),console.error(h)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}(),y=function(){var n=(0,b.A)(function*(s){var u;s.params=s.params||{},(0,$.Ll)({url:"api/ChargingSession/start",params:{ChargeSessionId:null!==(u=s.params.ChargeSessionId)&&void 0!==u?u:null},success:m=>{"function"==typeof s.callback&&s.callback(m.data||null)},error:m=>{var v;"function"==typeof s.callback&&s.callback(null==m||null===(v=m.response)||void 0===v?void 0:v.data),console.error(m)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}(),R=function(){var n=(0,b.A)(function*(s){var u;s.params=s.params||{},(0,$.Ll)({url:"api/ChargingSession/stop",params:{ChargeSessionId:null!==(u=s.params.ChargeSessionId)&&void 0!==u?u:null},success:m=>{"function"==typeof s.callback&&s.callback(m.data||null)},error:m=>{var v;"function"==typeof s.callback&&s.callback(null==m||null===(v=m.response)||void 0===v?void 0:v.data),console.error(m)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}(),k=function(){var n=(0,b.A)(function*(s){s.params=s.params||{},(0,$.hm)({url:`api/ChargingSession/monitor/${s.params.StationCode}/${s.params.ConnectorId}`,success:u=>{"function"==typeof s.callback&&s.callback(u.data||null)},error:u=>{var m;"function"==typeof s.callback&&s.callback(null==u||null===(m=u.response)||void 0===m?void 0:m.data),console.error(u)},loading:s.loading})});return function(u){return n.apply(this,arguments)}}()},8623:(B,D,f)=>{f.r(D),f.d(D,{OrderInfoDetailPageModule:()=>Gn});var b=f(177),$=f(9417),d=f(8974),P=f(2175),I=f(467),j=f(5083),E=f(1806),y=f(9051),T=f(5970),R=f(8650),k=f(8833),n=f(4438),s=f(4842);const u=t=>({$implicit:t});function m(t,c){1&t&&(n.j41(0,"div",19),n.nrm(1,"ion-spinner",20),n.k0s())}function v(t,c){1&t&&(n.j41(0,"div",21),n.nrm(1,"ion-img",22),n.j41(2,"div",23),n.EFF(3),n.nI1(4,"translate"),n.k0s()()),2&t&&(n.R7$(3),n.JRh(n.bMT(4,1,"DataNotFound")))}function h(t,c){if(1&t&&(n.qex(0),n.j41(1,"div",24),n.eu8(2,25),n.k0s(),n.bVm()),2&t){const i=c.$implicit;n.XpG();const r=n.sdS(34);n.R7$(2),n.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",n.eq3(2,u,i))}}function C(t,c){if(1&t){const i=n.RV6();n.j41(0,"ion-infinite-scroll",26),n.bIt("ionInfinite",function(e){n.eBV(i);const o=n.XpG();return n.Njj(o.onIonInfinite(e))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function M(t,c){1&t&&(n.j41(0,"small",39),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.SpI("(",n.bMT(2,1,"Default"),")"))}function J(t,c){if(1&t){const i=n.RV6();n.j41(0,"div",27)(1,"div",28)(2,"ion-radio",29)(3,"div",30)(4,"b",31),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.DNE(7,M,3,3,"small",32),n.k0s()(),n.j41(8,"div",33)(9,"ion-button",34),n.bIt("click",function(e){const o=n.eBV(i).$implicit,a=n.XpG();return n.Njj(a.editCustomerInvoice(e,o.CustomerInvoiceId))}),n.nrm(10,"ion-icon",35),n.k0s(),n.j41(11,"ion-button",36),n.bIt("click",function(e){const o=n.eBV(i).$implicit,a=n.XpG();return n.Njj(a.deleteCustomerInvoice(e,o.CustomerInvoiceId))}),n.nrm(12,"ion-icon",37),n.k0s()()(),n.nrm(13,"hr"),n.j41(14,"table",38)(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.j41(22,"tr")(23,"td"),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"td")(27,"b"),n.EFF(28),n.k0s()()(),n.j41(29,"tr")(30,"td"),n.EFF(31),n.nI1(32,"translate"),n.k0s(),n.j41(33,"td")(34,"b"),n.EFF(35),n.k0s()()(),n.j41(36,"tr")(37,"td"),n.EFF(38),n.nI1(39,"translate"),n.k0s(),n.j41(40,"td")(41,"b"),n.EFF(42),n.k0s()()(),n.j41(43,"tr")(44,"td"),n.EFF(45),n.nI1(46,"translate"),n.k0s(),n.j41(47,"td")(48,"b"),n.EFF(49),n.k0s()()()()()}if(2&t){const i=c.$implicit;n.R7$(2),n.Y8G("value",i.CustomerInvoiceId),n.R7$(3),n.JRh(n.bMT(6,13,"ExportBillInfo")),n.R7$(2),n.Y8G("ngIf",i.IsDefault),n.R7$(10),n.JRh(n.bMT(18,15,"BillCompanyName")),n.R7$(4),n.JRh(i.CompanyName),n.R7$(3),n.JRh(n.bMT(25,17,"BillCompanyAddress")),n.R7$(4),n.JRh(i.Address),n.R7$(3),n.JRh(n.bMT(32,19,"BillCompanyTax")),n.R7$(4),n.JRh(i.TaxCode),n.R7$(3),n.JRh(n.bMT(39,21,"Email")),n.R7$(4),n.JRh(i.BuyerEmail),n.R7$(3),n.JRh(n.bMT(46,23,"Mobile")),n.R7$(4),n.JRh(i.BuyerPhone)}}let A=(()=>{var t;class c{constructor(r,e,o,a){this.modalController=r,this.toastController=e,this.loadingController=o,this.animationController=a,this.APP_ROUTE=k._,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.customerInvoices=[],this.loadingController.create({message:""}).then(l=>this.loading=l)}close(r){this.modalController.dismiss(null,"close")}submit(r){this.modalController.dismiss(this.CustomerInvoiceId,"submit")}ngOnInit(){this.refreshData()}onIonRefresher(r){this.filter={},this.refreshData(()=>{r.target.complete()})}onIonInfinite(r){this.loadMore(()=>{r.target.complete()})}resetData(){this.customerInvoices.length=0}pushData(r){1==this.paging.page&&(this.customerInvoices.length=0),this.customerInvoices=this.customerInvoices.concat(r)}totalData(){return this.customerInvoices.length}refreshData(r){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging(r)}loadMore(r){this.paging.page+=1,this.loadData_Paging(r)}searchChange(r){this.filter={},this.filter.search=r.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}sortChange(r,e){this.paging.sortfield=r||null,this.paging.sorttype=e||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}loadData_Paging(r){var e=this;return(0,I.A)(function*(){e.paging.loading=!0,(0,T.Ul)({loading:o=>{var a,l;o?null===(a=e.loading)||void 0===a||a.present():null===(l=e.loading)||void 0===l||l.dismiss()},params:{PageNumber:e.paging.page,PageSize:e.paging.limit},callback:o=>{var a;e.response=o,null!=o&&o.Succeeded?e.pushData(null!==(a=o.Data)&&void 0!==a?a:[]):(0,R.cX)(e.toastController,{},o).then(l=>l.present()),e.paging.loading=!1,e.paging.active=!(null==o||!o.HasNextPage),r&&r()}})})()}editCustomerInvoice(r,e){this.presentModalAddCustomerInvoice(r,e)}deleteCustomerInvoice(r,e){e&&(0,R.Yy)(this.modalController,this.animationController,{selectedId:e,message:{TitleConfirm:"Delete_Confirm",TextConfirm:"Delete"},fnConfirm:o=>{(0,T.NT)({loading:a=>{var l,_;a?null===(l=this.loading)||void 0===l||l.present():null===(_=this.loading)||void 0===_||_.dismiss()},params:{CustomerInvoiceId:o},callback:a=>{null!=a&&a.Succeeded?this.refreshData():(0,R.cX)(this.toastController,{},a).then(l=>l.present())}})}})}changeCustomerInvoice(r){this.CustomerInvoiceId=r.detail.value}presentModalAddCustomerInvoice(r,e){var o=this;return(0,I.A)(function*(){const a=yield o.modalController.create({component:E.$,componentProps:{CustomerInvoiceId:e}});a.onDidDismiss().then(l=>{"success"==l.role&&o.refreshData()}),a.present()})()}}return(t=c).\u0275fac=function(r){return new(r||t)(n.rXU(d.W3),n.rXU(d.K_),n.rXU(d.Xi),n.rXU(d.Hx))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-modal-customer-invoice"]],inputs:{CustomerInvoiceId:"CustomerInvoiceId"},decls:35,vars:17,consts:[["templateCustomerInvoice",""],["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","container container-loading py-5 text-center",4,"ngIf"],["mode","md",3,"ionChange","value"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12"],["color","primary","expand","block","shape","round","fill","outline",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/plus-circle.svg"],[1,"col-12","my-3","text-center"],[1,"text-muted"],[3,"ionInfinite",4,"ngIf"],[1,"p-3"],["color","primary","expand","block","shape","round",3,"click"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","container-loading","py-5","text-center"],["src","../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[1,"col-12","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-customer-invoice","rounded","bg-white"],[1,"d-flex","justify-content-between"],["label-placement","end",3,"value"],[1,"text-wrap"],[1,"mr-1"],["class","text-primary d-inline-block",4,"ngIf"],[1,"text-nowrap"],["size","small","color","medium","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/edit.svg",1,"fs-4"],["size","small","color","danger","fill","clear",3,"click"],["name","close-outline",1,"fs-5"],[1,"table","table-borderless","m-0"],[1,"text-primary","d-inline-block"]],template:function(r,e){if(1&r){const o=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),n.bIt("click",function(l){return n.eBV(o),n.Njj(e.close(l))}),n.nrm(4,"ion-icon",3),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6),n.nI1(7,"translate"),n.k0s()()(),n.j41(8,"ion-content")(9,"ion-refresher",4),n.bIt("ionRefresh",function(l){return n.eBV(o),n.Njj(e.onIonRefresher(l))}),n.nrm(10,"ion-refresher-content"),n.k0s(),n.DNE(11,m,2,0,"div",5)(12,v,5,3,"div",6),n.j41(13,"ion-radio-group",7),n.bIt("ionChange",function(l){return n.eBV(o),n.Njj(e.changeCustomerInvoice(l))}),n.j41(14,"div",8)(15,"div",9),n.DNE(16,h,3,4,"ng-container",10),n.j41(17,"div",11)(18,"ion-button",12),n.bIt("click",function(l){return n.eBV(o),n.Njj(e.presentModalAddCustomerInvoice(l))}),n.nrm(19,"ion-icon",13),n.j41(20,"ion-label"),n.EFF(21),n.nI1(22,"translate"),n.k0s()()(),n.j41(23,"div",14)(24,"small",15),n.EFF(25),n.nI1(26,"translate"),n.k0s()()()()(),n.DNE(27,C,2,0,"ion-infinite-scroll",16),n.k0s(),n.j41(28,"ion-footer")(29,"div",17)(30,"ion-button",18),n.bIt("click",function(l){return n.eBV(o),n.Njj(e.submit(l))}),n.EFF(31),n.nI1(32,"translate"),n.k0s()()(),n.DNE(33,J,50,25,"ng-template",null,0,n.C5r)}2&r&&(n.R7$(6),n.JRh(n.bMT(7,9,"CustomerInvoiceSaved")),n.R7$(5),n.Y8G("ngIf",!e.response),n.R7$(),n.Y8G("ngIf",e.response&&!e.customerInvoices.length),n.R7$(),n.Y8G("value",e.CustomerInvoiceId),n.R7$(3),n.Y8G("ngForOf",e.customerInvoices),n.R7$(5),n.JRh(n.bMT(22,11,"Create")),n.R7$(4),n.JRh(n.bMT(26,13,"CustomerInvoiceNotice")),n.R7$(2),n.Y8G("ngIf",e.paging.active),n.R7$(4),n.JRh(n.bMT(32,15,"Choice")))},dependencies:[b.Sq,b.bT,b.T3,d.Jm,d.QW,d.W9,d.M0,d.eU,d.iq,d.KW,d.Ax,d.Hp,d.he,d.KO,d.f0,d.To,d.Ki,d.w2,d.BC,d.ai,d.uR,d.Je,s.D9],styles:[".table[_ngcontent-%COMP%]{table-layout:fixed}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-customer-invoice[_ngcontent-%COMP%]{padding:1rem}.card-customer-invoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-customer-invoice[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-customer-invoice[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}"]}),c})();var G=f(6944),x=f(9061),X=f(6539),U=f(2313),S=f(8517),O=f(3588),V=f(5972);const Y=function(){var t=(0,I.A)(function*(c){var i,r,e,o,a,l,_;c.params=c.params||{},(0,V.Ll)({url:"api/Einvoice/createmyinvoice",params:{IsCompany:null!==(i=c.params.IsCompany)&&void 0!==i?i:null,TaxCode:null!==(r=c.params.TaxCode)&&void 0!==r?r:null,CompanyName:null!==(e=c.params.CompanyName)&&void 0!==e?e:null,Address:null!==(o=c.params.Address)&&void 0!==o?o:null,BuyerPhone:null!==(a=c.params.BuyerPhone)&&void 0!==a?a:null,BuyerEmail:null!==(l=c.params.BuyerEmail)&&void 0!==l?l:null,BillId:null!==(_=c.params.BillId)&&void 0!==_?_:null},success:g=>{"function"==typeof c.callback&&c.callback(g.data||null)},error:g=>{var p;"function"==typeof c.callback&&c.callback(null==g||null===(p=g.response)||void 0===p?void 0:p.data),console.error(g)},loading:c.loading})});return function(i){return t.apply(this,arguments)}}(),w=function(){var t=(0,I.A)(function*(c){var i;c.params=c.params||{},(0,V.IH)({url:"api/Einvoice/noeinvoice",params:{BillId:null!==(i=c.params.BillId)&&void 0!==i?i:null},success:r=>{"function"==typeof c.callback&&c.callback(r.data||null)},error:r=>{var e;"function"==typeof c.callback&&c.callback(null==r||null===(e=r.response)||void 0===e?void 0:e.data),console.error(r)},loading:c.loading})});return function(i){return t.apply(this,arguments)}}();var L=f(7586),H=f.n(L),K=f(9762);const z=["modalAddCustomerInvoiceSuccess"],W=()=>["android","ios"],Q=(t,c,i)=>[t,c,i];function Z(t,c){if(1&t){const i=n.RV6();n.j41(0,"ion-buttons",10),n.bIt("click",function(e){n.eBV(i);const o=n.XpG();return n.Njj(o.shareOrder(e))}),n.j41(1,"ion-chip",11)(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.nrm(5,"ion-icon",12),n.k0s()()}2&t&&(n.R7$(3),n.JRh(n.bMT(4,1,"Share")))}function q(t,c){1&t&&(n.j41(0,"div",13),n.nrm(1,"ion-spinner",14),n.k0s())}function nn(t,c){1&t&&(n.qex(0),n.j41(1,"div",16),n.nrm(2,"ion-spinner",17),n.k0s(),n.bVm())}function en(t,c){if(1&t&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&t){const i=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"PaymentMethod")),n.R7$(3),n.JRh(i.orderInfo.KindOfCard)}}function tn(t,c){if(1&t&&(n.j41(0,"tr",25)(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td"),n.EFF(5),n.k0s()()),2&t){const i=n.XpG(3);n.R7$(2),n.JRh(n.bMT(3,2,"Discount")),n.R7$(3),n.SpI("-",i.APP_FUNC_FormatMoney(i.orderInfo.PromoteValue),"\u0111")}}function on(t,c){1&t&&(n.j41(0,"b",32),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"RefundYes")))}function rn(t,c){1&t&&(n.j41(0,"b",32),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"RefundRequested")))}function an(t,c){if(1&t&&(n.qex(0),n.j41(1,"div",30)(2,"table",20)(3,"tr")(4,"td"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"td"),n.DNE(8,on,3,3,"b",31)(9,rn,3,3,"b",31),n.k0s()(),n.j41(10,"tr")(11,"td"),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"td")(15,"b"),n.EFF(16),n.k0s()()()()(),n.bVm()),2&t){const i=n.XpG(4);n.R7$(5),n.JRh(n.bMT(6,5,"Refund")),n.R7$(3),n.Y8G("ngIf",i.orderInfo.IsRefund&&i.orderInfo.RefundFinish),n.R7$(),n.Y8G("ngIf",i.orderInfo.IsRefund&&!i.orderInfo.RefundFinish),n.R7$(3),n.JRh(n.bMT(13,7,"RefundValue")),n.R7$(4),n.SpI("",i.APP_FUNC_FormatMoney(i.orderInfo.RefundValue),"\u0111")}}function ln(t,c){if(1&t&&(n.qex(0),n.j41(1,"div",33)(2,"div",29)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",20)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&t){const i=n.XpG(4);n.R7$(4),n.JRh(n.bMT(5,3,"Exchange")),n.R7$(5),n.JRh(n.bMT(10,5,"ExchangeValue")),n.R7$(4),n.SpI("",i.APP_FUNC_FormatMoney(i.orderInfo.ExchangeValue),"\u0111")}}function sn(t,c){if(1&t&&(n.qex(0),n.j41(1,"div",34)(2,"div",29)(3,"b"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"table",20)(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"translate"),n.k0s(),n.j41(11,"td")(12,"b"),n.EFF(13),n.k0s()()()()(),n.bVm()),2&t){const i=n.XpG(4);n.R7$(4),n.JRh(n.bMT(5,3,"BillVAT")),n.R7$(5),n.JRh(n.bMT(10,5,"Status")),n.R7$(4),n.JRh(i.orderInfo.VEinvoiceStatusName)}}function cn(t,c){if(1&t&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&t){const i=n.XpG(7);n.R7$(2),n.JRh(n.bMT(3,2,"Email")),n.R7$(4),n.JRh(i.customerInvoice.BuyerEmail)}}function dn(t,c){if(1&t&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"td")(5,"b"),n.EFF(6),n.k0s()()()),2&t){const i=n.XpG(7);n.R7$(2),n.JRh(n.bMT(3,2,"Mobile")),n.R7$(4),n.JRh(i.customerInvoice.BuyerPhone)}}function un(t,c){if(1&t&&(n.j41(0,"table",20)(1,"tr")(2,"td"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"td")(6,"b"),n.EFF(7),n.k0s()()(),n.j41(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td")(13,"b"),n.EFF(14),n.k0s()()(),n.j41(15,"tr")(16,"td"),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"td")(20,"b"),n.EFF(21),n.k0s()()(),n.DNE(22,cn,7,4,"tr",6)(23,dn,7,4,"tr",6),n.k0s()),2&t){const i=n.XpG(6);n.R7$(3),n.JRh(n.bMT(4,8,"BillCompanyName")),n.R7$(4),n.JRh(i.customerInvoice.CompanyName),n.R7$(3),n.JRh(n.bMT(11,10,"BillCompanyAddress")),n.R7$(4),n.JRh(i.customerInvoice.Address),n.R7$(3),n.JRh(n.bMT(18,12,"BillCompanyTax")),n.R7$(4),n.JRh(i.customerInvoice.TaxCode),n.R7$(),n.Y8G("ngIf",i.customerInvoice.BuyerEmail),n.R7$(),n.Y8G("ngIf",i.customerInvoice.BuyerPhone)}}function _n(t,c){if(1&t){const i=n.RV6();n.j41(0,"div",39)(1,"div",40)(2,"b"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",41),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(5);return n.Njj(o.presentModalCustomerInvoice(e))}),n.nrm(6,"ion-icon",42),n.k0s()(),n.nrm(7,"hr"),n.DNE(8,un,24,14,"table",43),n.k0s()}if(2&t){const i=n.XpG(5);n.R7$(3),n.JRh(n.bMT(4,2,"ExportBillInfo")),n.R7$(5),n.Y8G("ngIf",i.customerInvoice)}}function gn(t,c){if(1&t){const i=n.RV6();n.qex(0),n.j41(1,"div",35)(2,"ion-radio-group",36),n.bIt("ionChange",function(e){n.eBV(i);const o=n.XpG(4);return n.Njj(o.changeIsGetBill(e))}),n.j41(3,"ion-radio",37),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"ion-radio",37),n.EFF(7),n.nI1(8,"translate"),n.k0s()()(),n.DNE(9,_n,9,4,"div",38),n.bVm()}if(2&t){const i=n.XpG(4);n.R7$(2),n.Y8G("value",0),n.R7$(),n.Y8G("value",0),n.R7$(),n.JRh(n.bMT(5,6,"NoGetBill")),n.R7$(2),n.Y8G("value",1),n.R7$(),n.JRh(n.bMT(8,8,"YesGetBill")),n.R7$(2),n.Y8G("ngIf",i.IsGetBill)}}function mn(t,c){if(1&t&&(n.qex(0)(1),n.j41(2,"div",28)(3,"div",29)(4,"b"),n.EFF(5),n.nI1(6,"translate"),n.k0s()(),n.j41(7,"table",20)(8,"tr")(9,"td"),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"td"),n.EFF(13),n.k0s()(),n.j41(14,"tr")(15,"td"),n.EFF(16),n.nI1(17,"translate"),n.k0s(),n.j41(18,"td"),n.EFF(19),n.k0s()()()(),n.bVm(),n.DNE(20,an,17,9,"ng-container",6)(21,ln,14,7,"ng-container",6)(22,sn,14,7,"ng-container",6)(23,gn,10,10,"ng-container",6),n.bVm()),2&t){let i,r;const e=n.XpG(3);n.R7$(5),n.JRh(n.bMT(6,10,"Used")),n.R7$(5),n.JRh(n.bMT(11,12,"UsedElectricValue")),n.R7$(3),n.Lme("",e.APP_FUNC_RoundNumber(null!==(i=e.orderInfo.ElectricUsed)&&void 0!==i?i:0),"",null!==(i=e.orderInfo.Unit)&&void 0!==i?i:"kWh",""),n.R7$(3),n.JRh(n.bMT(17,14,"UsedMoneyValue")),n.R7$(3),n.SpI("",e.APP_FUNC_FormatMoney(null!==(r=e.orderInfo.AftertaxBillValue)&&void 0!==r?r:0),"\u0111"),n.R7$(),n.Y8G("ngIf",e.orderInfo.RefundValue),n.R7$(),n.Y8G("ngIf",e.orderInfo.ExchangeValue),n.R7$(),n.Y8G("ngIf",e.orderInfo.VEinvoiceStatus&&e.orderInfo.VEinvoiceStatus!=e.v_einvoice_status.ChuaXacNhan),n.R7$(),n.Y8G("ngIf",e.orderInfo.VEinvoiceStatus==e.v_einvoice_status.ChuaXacNhan)}}function fn(t,c){if(1&t&&(n.qex(0),n.j41(1,"div",18)(2,"div",19)(3,"table",20)(4,"tr")(5,"td"),n.EFF(6),n.nI1(7,"translate"),n.k0s(),n.j41(8,"td")(9,"b"),n.EFF(10),n.k0s()()(),n.j41(11,"tr")(12,"td"),n.EFF(13),n.nI1(14,"translate"),n.k0s(),n.j41(15,"td")(16,"b"),n.EFF(17),n.k0s()()(),n.j41(18,"tr")(19,"td"),n.EFF(20),n.nI1(21,"translate"),n.k0s(),n.j41(22,"td")(23,"b"),n.EFF(24),n.k0s()()(),n.DNE(25,en,6,4,"tr",6),n.j41(26,"tr")(27,"td"),n.EFF(28),n.nI1(29,"translate"),n.k0s(),n.j41(30,"td"),n.EFF(31),n.k0s()()()(),n.nrm(32,"hr",21),n.j41(33,"div",22)(34,"div",23)(35,"b"),n.EFF(36),n.nI1(37,"translate"),n.k0s()(),n.j41(38,"table",20)(39,"tr")(40,"td"),n.EFF(41),n.nI1(42,"translate"),n.k0s(),n.j41(43,"td")(44,"div"),n.EFF(45),n.k0s(),n.j41(46,"div")(47,"b"),n.EFF(48),n.k0s(),n.j41(49,"small"),n.EFF(50),n.k0s()()()(),n.DNE(51,tn,6,4,"tr",24),n.j41(52,"tr",25)(53,"td",26)(54,"b"),n.EFF(55),n.nI1(56,"translate"),n.k0s()(),n.j41(57,"td",27)(58,"strong"),n.EFF(59),n.k0s()()()()()(),n.DNE(60,mn,24,16,"ng-container",6),n.bVm()),2&t){let i,r,e,o,a;const l=n.XpG(2);n.R7$(6),n.JRh(n.bMT(7,22,"OrderCode")),n.R7$(4),n.JRh(l.orderInfo.OrderCode),n.R7$(3),n.JRh(n.bMT(14,24,"OrderValue")),n.R7$(4),n.SpI("",l.APP_FUNC_FormatMoney(l.orderInfo.PayValue),"\u0111"),n.R7$(3),n.JRh(n.bMT(21,26,"OrderStatus")),n.R7$(3),n.ZvI("text-",l.APP_FUNC_GetColor_VOrderStatus(l.orderInfo.VOrderStatus),""),n.R7$(),n.JRh(l.orderInfo.VOrderStatusName),n.R7$(),n.Y8G("ngIf",l.orderInfo.Paymethod),n.R7$(3),n.JRh(n.bMT(29,28,"OrderDate")),n.R7$(3),n.JRh(l.APP_FUNC_FormatDate(null!==(i=l.orderInfo.PurchaseDate)&&void 0!==i?i:l.orderInfo.OrderDate)),n.R7$(5),n.JRh(n.bMT(37,30,"Detail")),n.R7$(5),n.JRh(n.bMT(42,32,"ChargingPackage")),n.R7$(4),n.JRh(l.orderInfo.ChargePackName),n.R7$(3),n.SpI("",l.APP_FUNC_FormatMoney(null!==(r=l.orderInfo.PayValue)&&void 0!==r?r:0),"\u0111"),n.R7$(2),n.Lme(" / ",l.orderInfo.PowerValue,"",null!==(e=l.orderInfo.Unit)&&void 0!==e?e:"kWh",""),n.R7$(),n.Y8G("ngIf",l.orderInfo.PromoteValue),n.R7$(4),n.JRh(n.bMT(56,34,"PayValue")),n.R7$(4),n.SpI("",l.APP_FUNC_FormatMoney(null!==(o=l.orderInfo.RealValue)&&void 0!==o?o:0),"\u0111"),n.R7$(),n.Y8G("ngIf",n.sMw(36,Q,l.v_order_status.DaHoanTien,l.v_order_status.DaYeuCauHoanTien,l.v_order_status.HoanTat).includes(null!==(a=l.orderInfo.VOrderStatus)&&void 0!==a?a:0))}}function pn(t,c){if(1&t&&(n.qex(0),n.j41(1,"div",15),n.DNE(2,nn,3,0,"ng-container",6)(3,fn,61,40,"ng-container",6),n.k0s(),n.bVm()),2&t){const i=n.XpG();n.R7$(2),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VOrderStatus)==i.v_order_status.DangThanhToan),n.R7$(),n.Y8G("ngIf",i.orderInfo)}}function vn(t,c){if(1&t){const i=n.RV6();n.j41(0,"div",44),n.nrm(1,"ion-img",45),n.j41(2,"h4"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"div")(6,"small"),n.EFF(7),n.nI1(8,"translate"),n.k0s()(),n.j41(9,"div",46)(10,"ion-button",47),n.bIt("click",function(){n.eBV(i),n.XpG();const e=n.sdS(14);return n.Njj(null==e?null:e.dismiss())}),n.EFF(11),n.nI1(12,"translate"),n.k0s()()()}2&t&&(n.R7$(3),n.JRh(n.bMT(4,3,"InvoiceRequestSent")),n.R7$(4),n.JRh(n.bMT(8,5,"InvoiceRequestSentMessage")),n.R7$(4),n.JRh(n.bMT(12,7,"Close")))}function hn(t,c){if(1&t){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",49),n.bIt("click",function(e){n.eBV(i);const o=n.XpG();return n.Njj(o.cancelOrder(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&t&&(n.R7$(5),n.JRh(n.bMT(6,1,"CancelOrder")))}function In(t,c){if(1&t){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(2);return n.Njj(o.openDetailChargingSession(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&t&&(n.R7$(5),n.JRh(n.bMT(6,1,"GoToChargingSession")))}function Cn(t,c){if(1&t&&(n.j41(0,"div",52)(1,"div")(2,"small"),n.EFF(3),n.nI1(4,"translate"),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"div")(7,"b"),n.EFF(8),n.k0s()(),n.j41(9,"small"),n.EFF(10),n.nI1(11,"translate"),n.k0s()()),2&t){const i=n.XpG(3);n.R7$(3),n.E5c("",n.bMT(4,5,"Minute")," ",i.APP_FUNC_RoundNumber(i.timeout/6e4,1)," ",n.bMT(5,7,"Minute"),"!"),n.R7$(5),n.JRh(i.getTimeCountdown()),n.R7$(2),n.JRh(n.bMT(11,9,"PleaseStartChargingSession"))}}function bn(t,c){if(1&t){const i=n.RV6();n.j41(0,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(4);return n.Njj(o.chargingStart(e))}),n.j41(1,"ion-label"),n.EFF(2),n.nI1(3,"translate"),n.k0s()()}2&t&&(n.R7$(2),n.JRh(n.bMT(3,1,"StartChargingSession")))}function Rn(t,c){if(1&t&&(n.qex(0),n.j41(1,"div"),n.DNE(2,bn,4,3,"ion-button",53),n.k0s(),n.bVm()),2&t){const i=n.XpG(3);n.R7$(2),n.Y8G("ngIf",i.timeCountdown>0)}}function $n(t,c){if(1&t){const i=n.RV6();n.qex(0),n.j41(1,"div",54)(2,"div",55)(3,"small"),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"div",56)(7,"ion-button",47),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(3);return n.Njj(o.sendFeedback(e))}),n.j41(8,"ion-label"),n.EFF(9),n.nI1(10,"translate"),n.k0s()()()(),n.bVm()}2&t&&(n.R7$(4),n.JRh(n.bMT(5,2,"OrderHasExpired")),n.R7$(5),n.JRh(n.bMT(10,4,"Feedback")))}function kn(t,c){if(1&t&&(n.qex(0),n.j41(1,"ion-footer")(2,"div",48),n.DNE(3,Cn,12,11,"div",51)(4,Rn,3,1,"ng-container",6)(5,$n,11,6,"ng-container",6),n.k0s()(),n.bVm()),2&t){const i=n.XpG(2);n.R7$(3),n.Y8G("ngIf",i.timeCountdown>0),n.R7$(),n.Y8G("ngIf",i.timeCountdown>0),n.R7$(),n.Y8G("ngIf",i.timeCountdown<=0)}}function On(t,c){if(1&t&&(n.qex(0),n.DNE(1,In,7,3,"ng-container",6)(2,kn,6,3,"ng-container",6),n.bVm()),2&t){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.chargingSession),n.R7$(),n.Y8G("ngIf",!i.chargingSession)}}function Pn(t,c){if(1&t){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",50),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(2);return n.Njj(o.openDetailChargingSession(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&t&&(n.R7$(5),n.JRh(n.bMT(6,1,"GoToChargingSession")))}function Fn(t,c){if(1&t&&(n.qex(0),n.DNE(1,Pn,7,3,"ng-container",6),n.bVm()),2&t){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.chargingSession)}}function Tn(t,c){if(1&t){const i=n.RV6();n.qex(0),n.j41(1,"ion-footer")(2,"div",48)(3,"ion-button",57),n.bIt("click",function(e){n.eBV(i);const o=n.XpG();return n.Njj(o.sendFeedback(e))}),n.j41(4,"ion-label"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()()(),n.bVm()}2&t&&(n.R7$(5),n.JRh(n.bMT(6,1,"SendFeedback")))}function Mn(t,c){if(1&t){const i=n.RV6();n.j41(0,"div",48)(1,"ion-button",59),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(3);return n.Njj(o.completeOrder(e))}),n.j41(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s()()()}2&t&&(n.R7$(3),n.JRh(n.bMT(4,1,"Complete")))}function Sn(t,c){if(1&t){const i=n.RV6();n.j41(0,"div",48)(1,"ion-button",60),n.bIt("click",function(e){n.eBV(i);const o=n.XpG(3);return n.Njj(o.openDetailBill(e))}),n.nrm(2,"ion-icon",61),n.j41(3,"ion-label"),n.EFF(4),n.nI1(5,"translate"),n.k0s()()()}2&t&&(n.R7$(4),n.JRh(n.bMT(5,1,"ViewBill")))}function Dn(t,c){if(1&t&&(n.j41(0,"ion-footer"),n.DNE(1,Mn,5,3,"div",58)(2,Sn,6,3,"div",58),n.k0s()),2&t){const i=n.XpG(2);n.R7$(),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VEinvoiceStatus)==i.v_einvoice_status.ChuaXacNhan),n.R7$(),n.Y8G("ngIf",(null==i.orderInfo?null:i.orderInfo.VEinvoiceStatus)!=i.v_einvoice_status.ChuaXacNhan)}}function jn(t,c){if(1&t&&(n.qex(0),n.DNE(1,Dn,3,2,"ion-footer",6),n.bVm()),2&t){const i=n.XpG();n.R7$(),n.Y8G("ngIf",null==i.orderInfo?null:i.orderInfo.BillId)}}const En=[{path:"",component:(()=>{var t;class c{constructor(r,e,o,a,l,_){var g,p;this.router=r,this.loadingController=o,this.toastController=a,this.modalController=l,this.animationController=_,this.platform=j.Ii.getPlatform(),this.APP_ROUTE=k._,this.APP_FUNC_FormatMoney=S.xi,this.APP_FUNC_FormatDate=S.Rv,this.APP_FUNC_GetColor_VOrderStatus=S.qM,this.APP_FUNC_RoundNumber=S.Rw,this.v_order_status=O.TL,this.v_einvoice_status=O.XM,this.customerInvoices=[],this.intervalCounter=0,this.timeout=18e4,this.timeCountdown=0,this.intervalCountdown=null,this.loadingController.create({message:""}).then(Vn=>this.loading=Vn);let F=null!==(g=e.snapshot.params.id)&&void 0!==g?g:"";F&&(this.OrderId=parseInt(F));let N=null!==(p=e.snapshot.params.code)&&void 0!==p?p:"";N&&(this.OrderCode=N)}ngOnInit(){var r=this;this.IsOnInit=!0,(0,I.A)(function*(){(yield(0,X.kU)())&&r.refreshData()})()}ngOnDestroy(){this.IsOnInit=!1,this.destroyInterval()}ionViewDidEnter(){this.IsOnInit||this.ngOnInit()}ionViewDidLeave(){this.ngOnDestroy()}onIonRefresher(r){this.refreshData(()=>{r.target.complete()})}refreshInterval(){clearInterval(this.intervalReload),this.intervalReload=setInterval(()=>{var r,e;this.orderInfo&&[O.TL.DangThanhToan,O.TL.DaThanhToan].includes(null!==(r=null===(e=this.orderInfo)||void 0===e?void 0:e.VOrderStatus)&&void 0!==r?r:0)&&this.refreshData(()=>{this.intervalCounter++,this.intervalCounter>=10&&clearInterval(this.intervalReload)})},3e3)}destroyInterval(){clearInterval(this.intervalReload)}refreshData(r){var e=()=>{var o,a,l;this.refreshInterval(),[O.TL.DaThanhToan,O.TL.DangSac].includes(null!==(o=null===(a=this.orderInfo)||void 0===a?void 0:a.VOrderStatus)&&void 0!==o?o:0)&&(0,G.KX)({params:{OrderCode:null===(l=this.orderInfo)||void 0===l?void 0:l.OrderCode},callback:_=>{var g;if(null!=_&&_.Succeeded){if(this.chargingSession=(null!==(g=_.Data)&&void 0!==g?g:[]).find(p=>{var F;return[O.jT.DangSac].includes(null!==(F=p.VSessionStatus)&&void 0!==F?F:0)}),this.chargingSession)return}else(0,R.cX)(this.toastController,{},_).then(p=>p.present());this.setTimeCountdown()}})};this.OrderId?(0,x.vp)({loading:o=>{var a,l;o?null===(a=this.loading)||void 0===a||a.present():null===(l=this.loading)||void 0===l||l.dismiss()},params:{OrderId:this.OrderId},callback:o=>{this.response=o,null!=o&&o.Succeeded?(this.orderInfo=o.Data,e()):(0,R.cX)(this.toastController,{},o).then(a=>a.present()),r&&r()}}):this.OrderCode&&(0,x.FS)({loading:o=>{var a,l;o?null===(a=this.loading)||void 0===a||a.present():null===(l=this.loading)||void 0===l||l.dismiss()},params:{OrderCode:this.OrderCode},callback:o=>{this.response=o,null!=o&&o.Succeeded?(this.orderInfo=o.Data,e()):(0,R.cX)(this.toastController,{},o).then(a=>a.present()),r&&r()}})}chargingStart(r){var e=this;return(0,I.A)(function*(){var o,a,l;(0,G.aN)({loading:_=>{var g,p;_?null===(g=e.loading)||void 0===g||g.present():null===(p=e.loading)||void 0===p||p.dismiss()},params:{StationCode:null===(o=e.orderInfo)||void 0===o?void 0:o.StationCode,ConnectorId:null===(a=e.orderInfo)||void 0===a?void 0:a.ConnectorId,OrderCode:null===(l=e.orderInfo)||void 0===l?void 0:l.OrderCode},callback:_=>{null!=_&&_.Succeeded?e.router.navigateByUrl(k._.CHARGING_SESSION_DETAIL.replace(":id",_.Data)):(0,R.cX)(e.toastController,{},_).then(g=>g.present())}})})()}sendFeedback(r){var e=this;return(0,I.A)(function*(){var o;(yield e.modalController.create({component:y.l,componentProps:{feedback:{DocType:U.v.ORDER_INFO,DocId:null===(o=e.orderInfo)||void 0===o?void 0:o.OrderId}},cssClass:"ion-modal-breakpoint",breakpoints:[1],initialBreakpoint:1})).present()})()}shareOrder(r){var e=this;return(0,I.A)(function*(){(0,S.HU)(document.getElementById("orderShare")).then(o=>{var a;o&&(0,K.C)(o,`${null===(a=e.orderInfo)||void 0===a?void 0:a.OrderCode}.png`)})})()}changeIsGetBill(r){this.IsGetBill=r.detail.value,this.GetCustomerinvoices()}selectCustomerInvoice(r){this.presentModalCustomerInvoice(r)}editCustomerInvoice(r){var e;this.presentModalAddCustomerInvoice(r,null===(e=this.customerInvoice)||void 0===e?void 0:e.CustomerInvoiceId)}GetCustomerinvoices(){var r=this;return(0,I.A)(function*(){(0,T.Ul)({loading:e=>{var o,a;e?null===(o=r.loading)||void 0===o||o.present():null===(a=r.loading)||void 0===a||a.dismiss()},params:{PageNumber:1,PageSize:100},callback:e=>{var o;if(null!=e&&e.Succeeded)if(r.customerInvoices=null!==(o=e.Data)&&void 0!==o?o:[],r.customerInvoices.length)if(1==r.customerInvoices.length)r.customerInvoice=r.customerInvoices[0];else{var a;r.customerInvoice=null!==(a=r.customerInvoices.filter(l=>l.IsDefault)[0])&&void 0!==a?a:r.customerInvoices[0]}else r.presentModalAddCustomerInvoice()}})})()}GetCustomerinvoice(r){var e=this;return(0,I.A)(function*(){r&&(0,T.kT)({loading:o=>{var a,l;o?null===(a=e.loading)||void 0===a||a.present():null===(l=e.loading)||void 0===l||l.dismiss()},params:{CustomerInvoiceId:r},callback:o=>{null!=o&&o.Succeeded&&(e.customerInvoice=o.Data)}})})()}completeOrder(r){var e=this;return(0,I.A)(function*(){var o;if(null!==(o=e.orderInfo)&&void 0!==o&&o.BillId&&!e.isCompleteOrder)if(e.isCompleteOrder=!0,e.IsGetBill){var a;Y({loading:_=>{var g,p;_?null===(g=e.loading)||void 0===g||g.present():null===(p=e.loading)||void 0===p||p.dismiss()},params:Object.assign({},e.customerInvoice,{BillId:null===(a=e.orderInfo)||void 0===a?void 0:a.BillId}),callback:_=>{var g;null!=_&&_.Succeeded?(e.refreshData(),null===(g=e.modalAddCustomerInvoiceSuccessRef)||void 0===g||g.present()):((0,R.cX)(e.toastController,{},_).then(p=>p.present()),e.isCompleteOrder=!1)}})}else{var l;w({loading:_=>{var g,p;_?null===(g=e.loading)||void 0===g||g.present():null===(p=e.loading)||void 0===p||p.dismiss()},params:{BillId:null===(l=e.orderInfo)||void 0===l?void 0:l.BillId},callback:_=>{null!=_&&_.Succeeded?e.refreshData():((0,R.cX)(e.toastController,{},_).then(g=>g.present()),e.isCompleteOrder=!1)}})}})()}cancelOrder(r){var e=this;return(0,I.A)(function*(){var o;(0,R.Yy)(e.modalController,e.animationController,{selectedId:null===(o=e.orderInfo)||void 0===o?void 0:o.OrderId,message:{TitleConfirm:"CancelOrder",TextConfirm:"Confirm"},fnConfirm:a=>{(0,x.rZ)({loading:l=>{var _,g;l?null===(_=e.loading)||void 0===_||_.present():null===(g=e.loading)||void 0===g||g.dismiss()},params:{OrderId:a},callback:l=>{null!=l&&l.Succeeded?e.refreshData():(0,R.cX)(e.toastController,{},l).then(_=>_.present())}})}})})()}presentModalCustomerInvoice(r){var e=this;return(0,I.A)(function*(){var o;const a=yield e.modalController.create({component:A,componentProps:{CustomerInvoiceId:null===(o=e.customerInvoice)||void 0===o?void 0:o.CustomerInvoiceId}});a.onDidDismiss().then(l=>{"submit"==l.role&&e.GetCustomerinvoice(l.data)}),a.present()})()}presentModalAddCustomerInvoice(r,e){var o=this;return(0,I.A)(function*(){const a=yield o.modalController.create({component:E.$,componentProps:{CustomerInvoiceId:e}});a.onDidDismiss().then(l=>{"success"==l.role&&o.GetCustomerinvoices()}),a.present()})()}openDetailBill(r){var e=this;return(0,I.A)(function*(){var o,a;e.router.navigateByUrl(k._.BILL_INFO_DETAIL.replace(":id",null!==(o=null===(a=e.orderInfo)||void 0===a||null===(a=a.BillId)||void 0===a?void 0:a.toString())&&void 0!==o?o:""))})()}openDetailChargingSession(r){var e=this;return(0,I.A)(function*(){var o,a;e.router.navigateByUrl(k._.CHARGING_SESSION_DETAIL.replace(":id",null!==(o=null===(a=e.chargingSession)||void 0===a||null===(a=a.ChargeSessionId)||void 0===a?void 0:a.toString())&&void 0!==o?o:""))})()}setTimeCountdown(){var r;if(null!==(r=this.orderInfo)&&void 0!==r&&r.PurchaseDate){let e=new Date(this.orderInfo.PurchaseDate).getTime()-(new Date).getTime()+this.timeout;if(e>0){this.timeCountdown=e,clearInterval(this.intervalCountdown);let o=1e3;this.intervalCountdown=setInterval(()=>{if(this.timeCountdown<=o)return this.timeCountdown=0,void clearInterval(this.intervalCountdown);this.timeCountdown-=o},o)}}}getTimeCountdown(){return H()(this.timeCountdown).format("mm:ss")}}return(t=c).\u0275fac=function(r){return new(r||t)(n.rXU(P.Ix),n.rXU(P.nX),n.rXU(d.Xi),n.rXU(d.K_),n.rXU(d.W3),n.rXU(d.Hx))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-order-info-detail"]],viewQuery:function(r,e){if(1&r&&n.GBs(z,5),2&r){let o;n.mGM(o=n.lsd())&&(e.modalAddCustomerInvoiceSuccessRef=o.first)}},decls:22,vars:14,consts:[["modalAddCustomerInvoiceSuccess",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","end","class","ion-no-margin",3,"click",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],[4,"ngIf"],[1,"ion-modal-small"],[3,"ngSwitch"],[4,"ngSwitchCase"],["slot","end",1,"ion-no-margin",3,"click"],["color","primary",1,"no-opacity"],["src","../../../assets/icon/ion-icon/share.svg"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","mb-5"],[1,"text-center","line-height-0","mb-3"],["color","primary","name","crescent"],["id","orderShare",1,"container-order"],[1,"card-order","rounded","bg-white"],[1,"table","table-borderless","m-0"],[1,"border-dashed"],[1,"card-order-detail","rounded","bg-white"],[1,"mt-3","mb-2"],["class","border-top",4,"ngIf"],[1,"border-top"],[1,"pt-3"],[1,"pt-3","text-primary"],[1,"card-order-used","rounded","bg-white","mt-3"],[1,"mb-2","d-flex","justify-content-between"],[1,"card-order-refund","rounded","bg-white","mt-3"],["class","text-primary",4,"ngIf"],[1,"text-primary"],[1,"card-order-exchange","rounded","bg-white","mt-3"],[1,"card-order-einvoice","rounded","bg-white","mt-3"],[1,"mt-5","mb-3","bill-group-radio"],["mode","md",3,"ionChange","value"],["label-placement","end",3,"value"],["class","card-bill rounded bg-white mt-3",4,"ngIf"],[1,"card-bill","rounded","bg-white","mt-3"],[1,"d-flex","align-items-center","justify-content-between"],["size","small","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/chevron-right.svg",1,"fs-4"],["class","table table-borderless m-0",4,"ngIf"],[1,"container","p-4","text-center","container-success"],["src","../../../assets/icon/ion-img/success.svg"],[1,"mt-5"],["color","medium","shape","round","fill","outline","expand","block",3,"click"],[1,"container","py-3"],["color","danger","shape","round","fill","outline","expand","block",3,"click"],["color","primary","expand","block","shape","round",3,"click"],["class","mb-3 text-center",4,"ngIf"],[1,"mb-3","text-center"],["color","primary","expand","block","shape","round",3,"click",4,"ngIf"],[1,"row","align-items-center"],[1,"col","pr-2"],[1,"col-auto","pl-2"],["color","warning","shape","round","fill","outline","expand","block",3,"click"],["class","container py-3",4,"ngIf"],["color","primary","shape","round","expand","block",3,"click"],["color","primary","shape","round","fill","outline","expand","block",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/view-circle.svg",1,"fs-4"]],template:function(r,e){if(1&r){const o=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.DNE(7,Z,6,3,"ion-buttons",3),n.k0s()(),n.j41(8,"ion-content")(9,"ion-refresher",4),n.bIt("ionRefresh",function(l){return n.eBV(o),n.Njj(e.onIonRefresher(l))}),n.nrm(10,"ion-refresher-content"),n.k0s(),n.DNE(11,q,2,0,"div",5)(12,pn,4,2,"ng-container",6),n.j41(13,"ion-modal",7,0),n.DNE(15,vn,13,9,"ng-template"),n.k0s()(),n.qex(16,8),n.DNE(17,hn,7,3,"ng-container",9)(18,On,3,2,"ng-container",9)(19,Fn,2,1,"ng-container",9)(20,Tn,7,3,"ng-container",9)(21,jn,2,1,"ng-container",9),n.bVm()}2&r&&(n.R7$(3),n.Y8G("defaultHref",e.APP_ROUTE.TABS_DEFAULT),n.R7$(2),n.JRh(n.bMT(6,11,"OrderInfo")),n.R7$(2),n.Y8G("ngIf",n.lJ4(13,W).includes(e.platform)),n.R7$(4),n.Y8G("ngIf",!e.response),n.R7$(),n.Y8G("ngIf",null==e.response?null:e.response.Succeeded),n.R7$(4),n.Y8G("ngSwitch",null==e.orderInfo?null:e.orderInfo.VOrderStatus),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DangThanhToan),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DaThanhToan),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.DangSac),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.KhongThanhCong),n.R7$(),n.Y8G("ngSwitchCase",e.v_order_status.HoanTat||e.v_order_status.DaHoanTien||e.v_order_status.DaYeuCauHoanTien))},dependencies:[b.bT,b.ux,b.e1,d.Jm,d.QW,d.ZB,d.W9,d.M0,d.eU,d.iq,d.KW,d.he,d.KO,d.f0,d.To,d.Ki,d.w2,d.BC,d.ai,d.Sb,d.uR,d.Je,d.el,s.D9],styles:['ion-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem}.table[_ngcontent-%COMP%]{table-layout:fixed}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;vertical-align:top}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;font-size:.875rem;color:var(--ion-color-medium-shade)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   b[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-order[_ngcontent-%COMP%]{padding:1rem}.card-order.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.card-order-detail[_ngcontent-%COMP%]{padding:1rem}.card-order-detail.rounded[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-top-right-radius:0!important;border-bottom-left-radius:1.5rem!important;border-bottom-right-radius:1.5rem!important}.card-order-used[_ngcontent-%COMP%], .card-order-exchange[_ngcontent-%COMP%], .card-order-refund[_ngcontent-%COMP%], .card-order-einvoice[_ngcontent-%COMP%]{padding:1rem}.card-order-used.rounded[_ngcontent-%COMP%], .card-order-exchange.rounded[_ngcontent-%COMP%], .card-order-refund.rounded[_ngcontent-%COMP%], .card-order-einvoice.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]{padding:1rem}.card-bill.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-bill[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-bill[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:.875rem}.bill-group-radio[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{margin:0 2rem .5rem 0}hr.border-dashed[_ngcontent-%COMP%]{margin:0;position:relative;z-index:1}hr.border-dashed[_ngcontent-%COMP%]:before, hr.border-dashed[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;z-index:2;bottom:0;margin-bottom:-1rem;width:2rem;height:2rem;border-radius:50%;background-color:var(--ion-background-color-primary)}hr.border-dashed[_ngcontent-%COMP%]:before{left:-1rem}hr.border-dashed[_ngcontent-%COMP%]:after{right:-1rem}.container-success[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3.5rem;margin:1rem auto}']}),c})()}];let yn=(()=>{var t;class c{}return(t=c).\u0275fac=function(r){return new(r||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[P.iI.forChild(En),P.iI]}),c})();var xn=f(3584);let Gn=(()=>{var t;class c{}return(t=c).\u0275fac=function(r){return new(r||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[b.MD,$.YN,d.bv,yn,xn.x]}),c})()}}]);