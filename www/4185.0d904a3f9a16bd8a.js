"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4185],{6944:(E,P,c)=>{c.d(P,{_$:()=>k,cb:()=>C,eu:()=>S,gc:()=>I,kO:()=>g,wm:()=>O});var h=c(467),$=c(7158);const g=function(){var f=(0,h.A)(function*(r){var o,l;r.params=r.params||{},(0,$.hm)({url:"api/ChargingSession/get-mychargingsessions",params:{PageNumber:null!==(o=r.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(l=r.params.PageSize)&&void 0!==l?l:10},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{var m;"function"==typeof r.callback&&r.callback(null==u||null===(m=u.response)||void 0===m?void 0:m.data),console.error(u)},loading:null==r?void 0:r.loading})});return function(o){return f.apply(this,arguments)}}(),C=function(){var f=(0,h.A)(function*(r){r.params=r.params||{},(0,$.hm)({url:`api/ChargingSession/get-mybyid/${r.params.ChargeSessionId}`,success:o=>{"function"==typeof r.callback&&r.callback(o.data||null)},error:o=>{var l;"function"==typeof r.callback&&r.callback(null==o||null===(l=o.response)||void 0===l?void 0:l.data),console.error(o)},loading:null==r?void 0:r.loading})});return function(o){return f.apply(this,arguments)}}(),I=function(){var f=(0,h.A)(function*(r){var o,l,u;r.params=r.params||{},(0,$.Ll)({url:"api/ChargingSession/create",params:{StationCode:null!==(o=r.params.StationCode)&&void 0!==o?o:null,ConnectorId:null!==(l=r.params.ConnectorId)&&void 0!==l?l:null,OrderCode:null!==(u=r.params.OrderCode)&&void 0!==u?u:null},success:m=>{"function"==typeof r.callback&&r.callback(m.data||null)},error:m=>{var e;"function"==typeof r.callback&&r.callback(null==m||null===(e=m.response)||void 0===e?void 0:e.data),console.error(m)},loading:null==r?void 0:r.loading})});return function(o){return f.apply(this,arguments)}}(),O=function(){var f=(0,h.A)(function*(r){var o;r.params=r.params||{},(0,$.Ll)({url:"api/ChargingSession/start",params:{ChargeSessionId:null!==(o=r.params.ChargeSessionId)&&void 0!==o?o:null},success:l=>{"function"==typeof r.callback&&r.callback(l.data||null)},error:l=>{var u;"function"==typeof r.callback&&r.callback(null==l||null===(u=l.response)||void 0===u?void 0:u.data),console.error(l)},loading:null==r?void 0:r.loading})});return function(o){return f.apply(this,arguments)}}(),k=function(){var f=(0,h.A)(function*(r){var o;r.params=r.params||{},(0,$.Ll)({url:"api/ChargingSession/stop",params:{ChargeSessionId:null!==(o=r.params.ChargeSessionId)&&void 0!==o?o:null},success:l=>{"function"==typeof r.callback&&r.callback(l.data||null)},error:l=>{var u;"function"==typeof r.callback&&r.callback(null==l||null===(u=l.response)||void 0===u?void 0:u.data),console.error(l)},loading:null==r?void 0:r.loading})});return function(o){return f.apply(this,arguments)}}(),S=function(){var f=(0,h.A)(function*(r){r.params=r.params||{},(0,$.hm)({url:`api/ChargingSession/monitor/${r.params.StationCode}/${r.params.ConnectorId}`,success:o=>{"function"==typeof r.callback&&r.callback(o.data||null)},error:o=>{var l;"function"==typeof r.callback&&r.callback(null==o||null===(l=o.response)||void 0===l?void 0:l.data),console.error(o)},loading:null==r?void 0:r.loading})});return function(o){return f.apply(this,arguments)}}()},4185:(E,P,c)=>{c.r(P),c.d(P,{OrderInfoResultPageModule:()=>X});var h=c(177),$=c(9417),g=c(4488),R=c(2175),C=c(467),I=c(1261),O=c(6944),y=c(7158);const S=function(){var t=(0,C.A)(function*(d){var a,i,n;d.params=d.params||{},(0,y.hm)({url:"api/OrderDetail/get-byordercode",params:{OrderCode:null!==(a=d.params.OrderCode)&&void 0!==a?a:null,PageNumber:null!==(i=d.params.PageNumber)&&void 0!==i?i:1,PageSize:null!==(n=d.params.PageSize)&&void 0!==n?n:10},success:s=>{"function"==typeof d.callback&&d.callback(s.data||null)},error:s=>{var p;"function"==typeof d.callback&&d.callback(null==s||null===(p=s.response)||void 0===p?void 0:p.data),console.error(s)},loading:null==d?void 0:d.loading})});return function(a){return t.apply(this,arguments)}}();var f=c(9061),r=c(6539),o=c(1312),l=c(7518),u=c(3588),m=c(8833),e=c(4438),M=c(4842);function D(t,d){1&t&&(e.j41(0,"div",7),e.nrm(1,"ion-spinner",8),e.k0s())}function T(t,d){1&t&&(e.qex(0),e.j41(1,"div",15),e.nrm(2,"ion-spinner",16),e.k0s(),e.bVm())}function A(t,d){if(1&t&&(e.j41(0,"table",17)(1,"tr")(2,"td",18),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"td",19)(6,"b"),e.EFF(7),e.k0s()()(),e.j41(8,"tr")(9,"td",18),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td",19)(13,"b"),e.EFF(14),e.k0s()()(),e.j41(15,"tr")(16,"td",18),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"td",19)(20,"b"),e.EFF(21),e.k0s()()(),e.j41(22,"tr")(23,"td",18),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"td",19),e.EFF(27),e.k0s()(),e.j41(28,"tr")(29,"td",18),e.EFF(30),e.nI1(31,"translate"),e.k0s(),e.j41(32,"td",19),e.EFF(33),e.k0s()()()),2&t){const a=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,13,"OrderCode")),e.R7$(4),e.JRh(a.orderInfo.OrderCode),e.R7$(3),e.JRh(e.bMT(11,15,"TotalAmount")),e.R7$(4),e.SpI("",a.APP_FUNC_FormatMoney(a.orderInfo.RealValue),"\u0111"),e.R7$(3),e.JRh(e.bMT(18,17,"OrderStatus")),e.R7$(3),e.ZvI("text-",a.APP_FUNC_GetColor_VOrderStatus(a.orderInfo.VOrderStatus),""),e.R7$(1),e.JRh(a.orderInfo.VOrderStatusName),e.R7$(3),e.JRh(e.bMT(25,19,"PaymentMethod")),e.R7$(3),e.JRh(a.orderInfo.KindOfCard),e.R7$(3),e.JRh(e.bMT(31,21,"OrderDate")),e.R7$(3),e.JRh(a.APP_FUNC_FormatDate(a.orderInfo.OrderDate))}}function j(t,d){if(1&t&&(e.j41(0,"table",17)(1,"tr")(2,"td",18),e.EFF(3,"G\xf3i s\u1ea1c"),e.k0s(),e.j41(4,"td",19)(5,"div"),e.EFF(6),e.k0s(),e.j41(7,"div")(8,"b",20),e.EFF(9),e.k0s(),e.j41(10,"small"),e.EFF(11),e.k0s()()()(),e.j41(12,"tr")(13,"td",18),e.EFF(14,"Gi\u1ea3m gi\xe1"),e.k0s(),e.j41(15,"td",19),e.EFF(16),e.k0s()(),e.j41(17,"tr")(18,"td",18),e.EFF(19,"Ph\xed \u0111\u1ed7 xe"),e.k0s(),e.j41(20,"td",19),e.EFF(21),e.k0s()(),e.j41(22,"tr",21)(23,"td",18),e.EFF(24,"Th\xe0nh vi\xean VIP"),e.k0s(),e.j41(25,"td",19),e.EFF(26),e.k0s()(),e.j41(27,"tr",21)(28,"td",18),e.EFF(29,"VAT"),e.k0s(),e.j41(30,"td",19),e.EFF(31),e.k0s()(),e.j41(32,"tr",21)(33,"td",18)(34,"b"),e.EFF(35,"T\u1ed5ng c\u1ed9ng"),e.k0s(),e.nrm(36,"br"),e.j41(37,"small",22),e.EFF(38,"\u0110\xe3 bao g\u1ed3m VAT"),e.k0s()(),e.j41(39,"td",23)(40,"strong"),e.EFF(41),e.k0s()()()()),2&t){const a=e.XpG(2);let i,n,s,p,v;e.R7$(6),e.JRh(a.orderDetail.ProductName),e.R7$(3),e.SpI("",a.APP_FUNC_FormatMoney(null!==(i=a.orderDetail.AftertaxPrice)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme(" / ",a.orderDetail.PowerValue," ",null!==(n=a.orderDetail.Unit)&&void 0!==n?n:"kWh",""),e.R7$(5),e.SpI("",a.APP_FUNC_FormatMoney(null!==(s=a.orderDetail.PromoteValue)&&void 0!==s?s:0),"\u0111"),e.R7$(5),e.SpI("",a.APP_FUNC_FormatMoney(0),"\u0111"),e.R7$(5),e.SpI("-",a.APP_FUNC_FormatMoney(0),"%"),e.R7$(5),e.SpI("+",null!==(p=a.orderDetail.TaxPercent)&&void 0!==p?p:0,"%"),e.R7$(10),e.SpI("",a.APP_FUNC_FormatMoney(null!==(v=a.orderDetail.AftertaxPrice)&&void 0!==v?v:0),"\u0111")}}function N(t,d){if(1&t&&(e.qex(0),e.j41(1,"div",9),e.DNE(2,T,3,0,"ng-container",4),e.j41(3,"div",10),e.DNE(4,A,34,23,"table",11),e.k0s(),e.nrm(5,"hr",12),e.j41(6,"div",13)(7,"div",14)(8,"b"),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.DNE(11,j,42,9,"table",11),e.k0s()(),e.bVm()),2&t){const a=e.XpG();e.R7$(2),e.Y8G("ngIf",(null==a.orderInfo?null:a.orderInfo.VOrderStatus)==a.v_order_status.DangThanhToan),e.R7$(2),e.Y8G("ngIf",a.orderInfo),e.R7$(5),e.JRh(e.bMT(10,4,"OrderDetail")),e.R7$(2),e.Y8G("ngIf",a.orderDetail)}}function G(t,d){if(1&t){const a=e.RV6();e.qex(0),e.j41(1,"ion-footer")(2,"div",24)(3,"ion-button",25),e.bIt("click",function(n){e.eBV(a);const s=e.XpG();return e.Njj(s.chargingStart(n))}),e.j41(4,"ion-label"),e.EFF(5,"B\u1eaft \u0111\u1ea7u phi\xean s\u1ea1c"),e.k0s()()()(),e.bVm()}}function x(t,d){if(1&t){const a=e.RV6();e.qex(0),e.j41(1,"ion-footer")(2,"div",24)(3,"ion-button",26),e.bIt("click",function(n){e.eBV(a);const s=e.XpG();return e.Njj(s.sendFeedback(n))}),e.j41(4,"ion-label"),e.EFF(5,"G\u1eedi ph\u1ea3n h\u1ed3i"),e.k0s()()()(),e.bVm()}}const U=[{path:"",component:(()=>{var t;class d{constructor(i,n,s,p){var v,_=this;this.loadingController=n,this.toastController=s,this.modalController=p,this.APP_ROUTE=m._,this.APP_FUNC_FormatMoney=o.xi,this.APP_FUNC_FormatDate=o.Rv,this.APP_FUNC_GetColor_VOrderStatus=o.qM,this.v_order_status=u.TL,this.params={},this.intervalCounter=0,this.params.code=null!==(v=i.snapshot.params.code)&&void 0!==v?v:"",(0,C.A)(function*(){_.loading=yield _.loadingController.create({message:""})})()}ngOnInit(){var i=this;(0,C.A)(function*(){(yield(0,r.kU)())&&(i.refreshData(),i.refreshInterval())})()}onIonRefresher(i){this.refreshData(()=>{i.target.complete()})}refreshInterval(){clearInterval(this.intervalReload),this.intervalReload=setInterval(()=>{var i;this.orderInfo&&(null===(i=this.orderInfo)||void 0===i?void 0:i.VOrderStatus)==u.TL.DangThanhToan&&this.refreshData(()=>{this.intervalCounter++,this.intervalCounter>=10&&clearInterval(this.intervalReload)})},4e3)}refreshData(i){this.params.code&&((0,f.FS)({loading:n=>{var s,p;n?null===(s=this.loading)||void 0===s||s.present():null===(p=this.loading)||void 0===p||p.dismiss()},params:{OrderCode:this.params.code},callback:n=>{this.response=n,null!=n&&n.Succeeded?this.orderInfo=n.Data:(0,l.cX)(this.toastController,{},n).then(s=>s.present()),i&&i()}}),S({params:{OrderCode:this.params.code},callback:n=>{var s;null!=n&&n.Succeeded?this.orderDetail=null===(s=n.Data)||void 0===s?void 0:s.pop():(0,l.cX)(this.toastController,{},n).then(p=>p.present()),i&&i()}}))}chargingStart(i){var n=this;return(0,C.A)(function*(){var s,p,v;(0,O.gc)({loading:_=>{var b,F;_?null===(b=n.loading)||void 0===b||b.present():null===(F=n.loading)||void 0===F||F.dismiss()},params:{StationCode:null===(s=n.orderInfo)||void 0===s?void 0:s.StationCode,ConnectorId:null===(p=n.orderInfo)||void 0===p?void 0:p.ConnectorId,OrderCode:null===(v=n.orderInfo)||void 0===v?void 0:v.OrderCode},callback:_=>{null!=_&&_.Succeeded?window.location.replace(m._.CHARGING_SESSION_DETAIL.replace(":id",_.Data)):(0,l.cX)(n.toastController,{},_).then(b=>b.present())}})})()}sendFeedback(i){var n=this;return(0,C.A)(function*(){(yield n.modalController.create({component:I.l,componentProps:{FbCatgId:3},mode:"ios"})).present()})()}}return(t=d).\u0275fac=function(i){return new(i||t)(e.rXU(R.nX),e.rXU(g.Xi),e.rXU(g.K_),e.rXU(g.W3))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-order-info-result"]],decls:15,vars:9,consts:[["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","mb-4"],[1,"card-order","rounded","bg-white"],["class","table table-borderless m-0",4,"ngIf"],[1,"border-dashed"],[1,"card-bill-info","rounded","bg-white"],[1,"mb-2"],[1,"text-center","line-height-0","mb-3"],["color","primary","name","crescent"],[1,"table","table-borderless","m-0"],[1,"text-muted"],[1,"text-right"],[1,"text-primary"],[1,"border-top"],[1,"text-muted","font-condensed"],[1,"text-primary","text-right"],[1,"container","py-3"],["color","primary","expand","block","shape","round",3,"click"],["mode","md","size","default","color","warning","shape","round","fill","outline","expand","block",3,"click"]],template:function(i,n){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-refresher",2),e.bIt("ionRefresh",function(p){return n.onIonRefresher(p)}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.DNE(10,D,2,0,"div",3)(11,N,12,6,"ng-container",4),e.k0s(),e.qex(12,5),e.DNE(13,G,6,0,"ng-container",6)(14,x,6,0,"ng-container",6),e.bVm()),2&i&&(e.R7$(3),e.Y8G("defaultHref",n.APP_ROUTE.ORDER_INFO),e.R7$(2),e.JRh(e.bMT(6,7,"OrderInfo")),e.R7$(5),e.Y8G("ngIf",!n.response),e.R7$(1),e.Y8G("ngIf",null==n.response?null:n.response.Succeeded),e.R7$(1),e.Y8G("ngSwitch",null==n.orderInfo?null:n.orderInfo.VOrderStatus),e.R7$(1),e.Y8G("ngSwitchCase",n.v_order_status.DaThanhToan),e.R7$(1),e.Y8G("ngSwitchCase",n.v_order_status.KhongThanhCong))},dependencies:[h.bT,h.ux,h.e1,g.Jm,g.QW,g.W9,g.M0,g.eU,g.he,g.To,g.Ki,g.w2,g.BC,g.ai,g.el,M.D9],styles:['ion-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem}.card-order[_ngcontent-%COMP%]{padding:1rem}.card-order.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important}.card-order[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]{margin:0;position:relative;z-index:1}.card-order[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:before, .card-order[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;z-index:2;bottom:0;margin-bottom:-1rem;width:2rem;height:2rem;border-radius:50%;background-color:var(--ion-background-color-primary)}.card-order[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:before{left:-1rem}.card-order[_ngcontent-%COMP%] + hr[_ngcontent-%COMP%]:after{right:-1rem}.card-bill-info[_ngcontent-%COMP%]{padding:1rem}.card-bill-info.rounded[_ngcontent-%COMP%]{border-bottom-left-radius:1.5rem!important;border-bottom-right-radius:1.5rem!important}']}),d})()}];let V=(()=>{var t;class d{}return(t=d).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[R.iI.forChild(U),R.iI]}),d})();var B=c(9500);let X=(()=>{var t;class d{}return(t=d).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,$.YN,g.bv,V,B.x]}),d})()}}]);