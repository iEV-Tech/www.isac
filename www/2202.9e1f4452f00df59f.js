"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2202],{1038:(A,R,d)=>{d.d(R,{v:()=>i});var h=d(467),I=d(7158);const i=function(){var F=(0,h.A)(function*(t){t.params=t.params||{};var p=[];t.params.subFolder&&(t.params.subFolder=t.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),t.params.subFolder&&p.push(t.params.subFolder)),t.params.isconvertvideo=!!t.params.isconvertvideo,t.params.isconvertpdf2image=!!t.params.isconvertpdf2image,t.params.isconvertoffice2image=!!t.params.isconvertoffice2image,t.params.isresizeimage=!!t.params.isresizeimage;const n=new FormData;n.append("path",p.join("/")),n.append("types",t.params.fileType||null),n.append("file",t.params.file||null),n.append("base64",t.params.base64||!1),n.append("isconvertvideo",t.params.isconvertvideo),n.append("isconvertpdf2image",t.params.isconvertpdf2image),n.append("isconvertoffice2image",t.params.isconvertoffice2image),n.append("isresizeimage",t.params.isresizeimage),(0,I.ZD)({url:"files",params:n,success:e=>{"function"==typeof t.callback&&t.callback(e.data||null)},error:e=>{"function"==typeof t.callback&&t.callback(),console.error(t,e)},loading:t.loading})});return function(p){return F.apply(this,arguments)}}()},9946:(A,R,d)=>{d.d(R,{ks:()=>F,sh:()=>t,z:()=>i});var h=d(467),I=d(7158);const i=function(){var p=(0,h.A)(function*(n){n.params=n.params||{},(0,I.hm)({url:"api/User/get-user",params:{},success:e=>{"function"==typeof n.callback&&n.callback(e.data||null)},error:e=>{var f;"function"==typeof n.callback&&n.callback(null==e||null===(f=e.response)||void 0===f?void 0:f.data),console.error(e)},loading:null==n?void 0:n.loading})});return function(e){return p.apply(this,arguments)}}(),F=function(){var p=(0,h.A)(function*(n){var e,f,v,_,M;n.params=n.params||{},(0,I.IH)({url:"api/User/update-user",params:{UserId:null!==(e=n.params.UserId)&&void 0!==e?e:null,FullName:null!==(f=n.params.FullName)&&void 0!==f?f:null,Address:null!==(v=n.params.Address)&&void 0!==v?v:null,Gender:null!==(_=n.params.Gender)&&void 0!==_?_:null,Birthday:null!==(M=n.params.Birthday)&&void 0!==M?M:null},success:U=>{"function"==typeof n.callback&&n.callback(U.data||null)},error:U=>{var C;"function"==typeof n.callback&&n.callback(null==U||null===(C=U.response)||void 0===C?void 0:C.data),console.error(U)},loading:null==n?void 0:n.loading})});return function(e){return p.apply(this,arguments)}}(),t=function(){var p=(0,h.A)(function*(n){var e,f;n.params=n.params||{},(0,I.IH)({url:"api/User/update-avatar",params:{UserId:null!==(e=n.params.UserId)&&void 0!==e?e:null,Avatar:null!==(f=n.params.Avatar)&&void 0!==f?f:null},success:v=>{"function"==typeof n.callback&&n.callback(v.data||null)},error:v=>{var _;"function"==typeof n.callback&&n.callback(null==v||null===(_=v.response)||void 0===_?void 0:_.data),console.error(v)},loading:null==n?void 0:n.loading})});return function(e){return p.apply(this,arguments)}}()},2202:(A,R,d)=>{d.r(R),d.d(R,{UserInfoPageModule:()=>D});var h=d(177),I=d(9417),i=d(4488),F=d(2175),t=d(467),p=d(9946),n=d(8560),e=d(4438),f=d(4842);function v(o,m){if(1&o){const s=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"h4",2),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",3)(6,"ion-list",4)(7,"div",5)(8,"label"),e.EFF(9),e.nI1(10,"translate"),e.j41(11,"span",6),e.EFF(12,"*"),e.k0s()(),e.j41(13,"div",7)(14,"ion-item")(15,"ion-input",8),e.bIt("ionChange",function(a){e.eBV(s);const r=e.XpG();return e.Njj(r.changeFullName(a))}),e.nI1(16,"translate"),e.k0s()()()(),e.j41(17,"div",5)(18,"label"),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"div",7)(22,"ion-item")(23,"ion-textarea",9),e.bIt("ionChange",function(a){e.eBV(s);const r=e.XpG();return e.Njj(r.changeAddress(a))}),e.nI1(24,"translate"),e.k0s()()()(),e.j41(25,"div",10)(26,"div",11)(27,"ion-button",12),e.bIt("click",function(a){e.eBV(s);const r=e.XpG();return e.Njj(r.close(a))}),e.j41(28,"ion-label"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()(),e.j41(31,"div",13)(32,"ion-button",14),e.bIt("click",function(a){e.eBV(s);const r=e.XpG();return e.Njj(r.submit(a))}),e.j41(33,"ion-label"),e.EFF(34),e.nI1(35,"translate"),e.k0s()()()()()()(),e.bVm()}if(2&o){const s=e.XpG();e.R7$(3),e.JRh(e.bMT(4,10,"UpdateInfo")),e.R7$(6),e.SpI("",e.bMT(10,12,"FullName")," "),e.R7$(6),e.FS9("placeholder",e.bMT(16,14,"FullName")),e.Y8G("value",s.user.FullName),e.R7$(4),e.JRh(e.bMT(20,16,"Address")),e.R7$(4),e.FS9("placeholder",e.bMT(24,18,"Address")),e.Y8G("autoGrow",!0)("value",s.user.Address),e.R7$(6),e.JRh(e.bMT(30,20,"Cancel")),e.R7$(5),e.JRh(e.bMT(35,22,"Save"))}}let _=(()=>{var o;class m{constructor(l,a,r){var c=this;this.modalController=l,this.toastController=a,this.loadingController=r,this.user={},(0,t.A)(function*(){c.loading=yield c.loadingController.create({message:""})})()}ngOnInit(){(0,p.z)({loading:l=>{var a,r;l?null===(a=this.loading)||void 0===a||a.present():null===(r=this.loading)||void 0===r||r.dismiss()},callback:l=>{var a;this.response=l,null!=l&&l.Succeeded?this.user=null!==(a=l.Data)&&void 0!==a?a:{}:(0,n.cX)(this.toastController,{},l).then(r=>r.present())}})}close(l){var a=this;return(0,t.A)(function*(){a.modalController.dismiss(null,"cancel")})()}submit(l){var a=this;return(0,t.A)(function*(){(0,p.ks)({loading:r=>{var c,u;r?null===(c=a.loading)||void 0===c||c.present():null===(u=a.loading)||void 0===u||u.dismiss()},params:a.user,callback:r=>{a.response=r,null!=r&&r.Succeeded?a.modalController.dismiss(null,"success"):(0,n.cX)(a.toastController,{},r).then(c=>c.present())}})})()}changeFullName(l){var a=this;return(0,t.A)(function*(){a.user.FullName=l.detail.value})()}changeAddress(l){var a=this;return(0,t.A)(function*(){a.user.Address=l.detail.value})()}}return(o=m).\u0275fac=function(l){return new(l||o)(e.rXU(i.W3),e.rXU(i.K_),e.rXU(i.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-modal-update-user"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"p-3"],[1,"text-center"],[1,"mt-4"],["lines","none"],[1,"form-group"],[1,"text-danger"],[1,"ion-item-input"],[3,"placeholder","value","ionChange"],[3,"autoGrow","placeholder","value","ionChange"],[1,"row","pt-3","mt-4"],[1,"col-6","pr-2"],["color","light","expand","block","shape","round",3,"click"],[1,"col-6","pl-2"],["color","primary","expand","block","shape","round",3,"click"]],template:function(l,a){1&l&&e.DNE(0,v,36,24,"ng-container",0),2&l&&e.Y8G("ngIf",null==a.response?null:a.response.Succeeded)},dependencies:[h.bT,i.Jm,i.$w,i.uz,i.he,i.nf,i.nc,i.Gw,f.D9]}),m})();var M=d(5312),U=d(1038),C=d(6539),j=d(1312),P=d(8833);function $(o,m){1&o&&(e.j41(0,"div",7),e.nrm(1,"ion-spinner",8),e.k0s())}function y(o,m){if(1&o){const s=e.RV6();e.j41(0,"div",9)(1,"ion-thumbnail",10),e.bIt("click",function(a){e.eBV(s);const r=e.XpG();return e.Njj(r.changeAvatar(a))}),e.nrm(2,"img",11),e.k0s(),e.j41(3,"ion-card",12)(4,"ion-card-content")(5,"div",13)(6,"small",14),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"p",15)(10,"b",16),e.EFF(11),e.nI1(12,"translate"),e.k0s()()(),e.j41(13,"div",13)(14,"small",14),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"p",15),e.EFF(18),e.nI1(19,"translate"),e.k0s()(),e.j41(20,"div",13)(21,"small",14),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.j41(24,"p",15),e.EFF(25),e.nI1(26,"translate"),e.k0s()(),e.j41(27,"div",13)(28,"small",14),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"p",15),e.EFF(32),e.nI1(33,"translate"),e.k0s()()()()()}if(2&o){const s=e.XpG();e.R7$(2),e.Y8G("src",s.user.Avatar?s.api_url+"readfile/"+s.user.Avatar:"assets/favicon/favicon.svg",e.B4B),e.R7$(5),e.JRh(e.bMT(8,9,"FullName")),e.R7$(4),e.JRh(s.user.FullName||e.bMT(12,11,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(16,13,"Mobile")),e.R7$(3),e.JRh(s.APP_FUNC_FormatMobileNumber(s.user.PhoneNumber)||e.bMT(19,15,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(23,17,"Email")),e.R7$(3),e.JRh((null==s.user.Person?null:s.user.Person.Email)||e.bMT(26,19,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(30,21,"Address")),e.R7$(3),e.JRh(s.user.Address||e.bMT(33,23,"NotUpdate"))}}function E(o,m){if(1&o){const s=e.RV6();e.j41(0,"ion-footer")(1,"div",17)(2,"ion-button",18),e.bIt("click",function(a){e.eBV(s);const r=e.XpG();return e.Njj(r.presentModalUpdateUser(a))}),e.nrm(3,"ion-icon",19),e.j41(4,"ion-label"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()()()}2&o&&(e.R7$(5),e.JRh(e.bMT(6,1,"UpdateInfo")))}const G=[{path:"",component:(()=>{var o;class m{constructor(l,a,r){var c=this;this.modalController=l,this.toastController=a,this.loadingController=r,this.APP_ROUTE=P._,this.api_url=M.c.api_url,this.APP_FUNC_FormatMobileNumber=j.IV,(0,t.A)(function*(){c.loading=yield c.loadingController.create({message:""})})()}ngOnInit(){var l=this;(0,t.A)(function*(){(yield(0,C.kU)())&&l.refreshData()})()}onIonRefresher(l){this.refreshData(()=>{l.target.complete()})}refreshData(l){var a=this;return(0,t.A)(function*(){(0,p.z)({loading:r=>{var c,u;r?null===(c=a.loading)||void 0===c||c.present():null===(u=a.loading)||void 0===u||u.dismiss()},callback:r=>{var c;a.response=r,null!=r&&r.Succeeded?a.user=null!==(c=r.Data)&&void 0!==c?c:{}:(0,n.cX)(a.toastController,{},r).then(u=>u.present()),l&&l()}})})()}presentModalUpdateUser(l){var a=this;return(0,t.A)(function*(){let r=yield a.modalController.create({component:_,cssClass:"ion-modal-small"});r.onDidDismiss().then(c=>{"success"==c.role&&window.location.reload()}),r.present()})()}changeAvatar(l){var a=this;return(0,t.A)(function*(){yield a.loadingController.create({spinner:"dots",message:"\u0110ang x\u1eed l\xfd t\u1eadp tin ...",animated:!1}),(0,j.oG)({accept:"image/*"},c=>{(0,U.v)({loading:u=>{var b,g;u?null===(b=a.loading)||void 0===b||b.present():null===(g=a.loading)||void 0===g||g.dismiss()},params:{file:c[0],subFolder:"avatar",fileType:"image"},callback:u=>{var b;0==(null==u?void 0:u.ReturnCode)&&(0,p.sh)({loading:g=>{var T,k;g?null===(T=a.loading)||void 0===T||T.present():null===(k=a.loading)||void 0===k||k.dismiss()},params:{UserId:null===(b=a.user)||void 0===b?void 0:b.UserId,Avatar:`${u.path}/${u.file.name}`},callback:g=>{null!=g&&g.Succeeded?a.refreshData():(0,n.cX)(a.toastController,{},g).then(T=>T.present())}})}})})})()}}return(o=m).\u0275fac=function(l){return new(l||o)(e.rXU(i.W3),e.rXU(i.K_),e.rXU(i.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-user-info"]],decls:13,vars:7,consts:[["mode","ios"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","container py-4",4,"ngIf"],[4,"ngIf"],[1,"container-loading"],["name","circular","color","primary"],[1,"container","py-4"],[3,"click"],[3,"src"],["color","light"],[1,"mb-4"],[1,"text-muted"],[1,"mt-1","mb-0"],[1,"text-uppercase"],[1,"container","py-3"],["mode","md","size","default","expand","full","shape","round",1,"ion-no-margin",3,"click"],["slot","start","name","create-outline"]],template:function(l,a){1&l&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-refresher",3),e.bIt("ionRefresh",function(c){return a.onIonRefresher(c)}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.DNE(10,$,2,0,"div",4)(11,y,34,25,"div",5),e.k0s(),e.DNE(12,E,7,3,"ion-footer",6)),2&l&&(e.R7$(3),e.Y8G("defaultHref",a.APP_ROUTE.TABS_USER),e.R7$(2),e.JRh(e.bMT(6,5,"UserInfo")),e.R7$(5),e.Y8G("ngIf",!a.response),e.R7$(1),e.Y8G("ngIf",a.user),e.R7$(1),e.Y8G("ngIf",null==a.user?null:a.user.UserId))},dependencies:[h.bT,i.Jm,i.QW,i.b_,i.I9,i.W9,i.M0,i.eU,i.iq,i.he,i.To,i.Ki,i.w2,i.Zx,i.BC,i.ai,i.el,f.D9],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size: 10rem;--border-radius: 50%;margin:auto;cursor:pointer}ion-card[_ngcontent-%COMP%]{margin:1.5rem 0;border-radius:.75rem}"]}),m})()}];let N=(()=>{var o;class m{}return(o=m).\u0275fac=function(l){return new(l||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[F.iI.forChild(G),F.iI]}),m})();var x=d(9500);let D=(()=>{var o;class m{}return(o=m).\u0275fac=function(l){return new(l||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,I.YN,i.bv,N,x.x]}),m})()}}]);